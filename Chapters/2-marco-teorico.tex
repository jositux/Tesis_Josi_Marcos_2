%-----------------------------------------------------
% Chapter 2: Características
%-----------------------------------------------------
\chapter{Marco teórico}
\label{chap: cap2}
\section{Desarrollo Colaborativo de Productos (CPD)}

La complejidad creciente de los productos, así como la personalización de los mismos a las particularidades de cada cliente, hace necesaria la participación de especialistas para acortar los ciclos de desarrollo de producto y de puesta en el mercado. Tradicionalmente se consideraba la figura de ``contratistas", a los que se entregaban los planos para que construyeran las distintas partes que integran un proyecto de cualquier sistema. Los contactos se producían de forma presencial y obligaban a frecuentes viajes para mantener el proyecto bajo control  \citep{Ruiz}. \vskip
El concepto teórico de \textbf{CPD} como se conoce en la actrualidad tuvo su primer aparición en 1994 en el artículo \textit{``Multimedia Comes of Age"} de Peter Cassidy \citep{Cassidy1994} para la revista CIO. Sin embargo, la colaboración en el desarrollo de productos tiene antecedentes anteriores en el libro \textit{``The sources of innovation"} de Eric Von Hippel \citep{VonHippel1988}. En 1995 apareció en más publicaciones como \textit{``Complexities of Collaborative Product Development"} de Margaret Bruce, Fiona Leverick y Dale Littler \citep{Complex1995}, durante esa época se analizaba sobre la relación entre compradores y proveedores, la complejidad misma del CPD y sus factores de éxito. Posteriormente, la temática fue apareciendo con más frecuencia en artículos periodísticos y presentaciones de papers en todo el mundo. Obviamente esto no excluye la posibilidad de existencia de conceptos anteriores similares o equivalentes. 


\subsection{Definiciones sobre el CPD}
En 1995, Bruce, Leverick y Littler describieron la visión de CPD como un medio efectivo para reducir el tiempo de desarrollo y el riesgo organizacional. Además declararon que el desarrollo colaborativo de productos es una proceso evolutivo y cómo la forma, el alcance de su iniciación y la continuación pueden cambiar en el tiempo \citep{Complex1995}. 

El CPD está definido por la Asociación de gestión de desarrollo de productos en inglés \textit{Product Development Management Association} (PDMA) \footnote{\url{http://www.pdma.org/}} desde 1996 como: \textquote{\textit{... cuando dos o más empresas deciden colaborar en el desarrollo de productos como socios mutuos, y esto difiere del concepto de externalización por el nivel de asociatividad, ya que las empresas colaboradoras están vinculadas en el proceso de entregar la solución final al cliente o al usuario}}. \vskip

Si bien con esta definición se puede comprender al CPD como colaboración entre agentes externos, hay otras como la de R. Del Rosario en el 2003 que lo describe como: \textquote{\textit{la aplicación de prácticas de colaboración en equipo a los esfuerzos de desarrollo de productos dentro de una organización y además abarca la concurrencia, la atención al ciclo de vida, los proveedores y la tecnología de información en un entorno centrado en el cliente}} \citep{Mesbah2007}.

Con respecto a la toma de desiciones, Marija Jankovic describe las implicaciones del contexto industrial colaborativo moderno durante el proceso de desarrollo del producto: \textquote{\textit{En este proceso, cada actor tiene objetivos definidos para su dominio de acción. Por lo tanto, la toma de decisiones en colaboración es un proceso donde los actores tienen objetivos diferentes y a menudo contradictorios. Los actores en el proceso colaborativo de toma de decisiones tienen también diferentes grados de conocimientos sobre el problema, así como diferentes informaciones y puntos de vista}} \citep{Marija2006}.

En este trabajo de investigación, el concepto de CPD no está orientado a la colaboración externa o interna de una empresa, sino que incluye elementos de colaboración y toma de decisiones entre personas independientemente de la organización a la que pertenece, por ejemplo: la colaboración para diseñar un producto entre un diseñador industrial y una persona sin formación específica.\vskip

En este contexto, el diseño tiene una importancia fundamental, ya que incorpora la información que define todos los pasos hasta la elaboración final del producto. Se puede establecer que la máxima eficacia se logra mediante la adecuación de esta etapa y es lo que realmente influye en el resultado final del producto. Por este motivo es importante comprender los conceptos de diseño que se explican a continuación.\vskip 

\subsection{Diseño}
ISO 9000:2000, la Norma que contiene el vocabulario de la Familia ISO 9000, define \textbf{diseño} (y desarrollo) como:
\textquote{\textit{Conjunto de procesos que transforma los requisitos en características especificadas, o en la especificación de un producto, proceso, o sistema. Perdiendo un poco de rigor, Diseñar es crear o definir cómo debe ser algo que satisface nuestros requisitos. Se trata de idear algo que no existe, o que no sabemos que existe. Sabemos qué función debe cumplir “ese algo”, pero no cómo debe ser, necesitamos diseñarlo.}} \citep{Pereiro2005}


\subsection{Co-diseño}
\textquote{\textit{El \textbf{co-diseño} o \textbf{diseño colaborativo} se refiere a cómo se aplica la creatividad colectiva a través de toda la duración de un proceso de diseño}}. El concepto ha surgido debido a que se considera una potencial herramienta con la cual enfocar el desarrollo de productos, en una industria que requiere nuevas tecnologías y procesos para abordar el diseño de artefactos cada vez más complejos. La irrupción del diseño colaborativo como paradigma ha cambiado el panorama de la práctica del diseño clásico porque permite la aparición de nuevos dominios de creatividad colectiva. 
\textquote{\textit{El \textbf{co-diseño} es definido por el hecho de que la creatividad de los diseñadores se une a la de personas que tienen otros perfiles y trabajan juntas en el proceso de elaboración del diseño}}\citep{Huerta2013}.
En esta definición se plantean dos elementos fundamentales que dan soporte al paradigma de diseño colaborativo:
\begin{enumerate}
    \item \textbf{Nuevos perfiles}\vskip
En esta nueva forma de comprender el diseño, al grupo habitual de trabajo se suman la iniciativa y la creatividad de otros perfiles que antes aportaban ideas generalmente como agentes externos: el investigador, el cliente y la persona que finalmente se beneficiará con el resultado del co-diseño (el usuario).
En el diseño colaborativo estos perfiles tienden a mezclarse: El usuario pasa a jugar un rol de ``experto en su experiencia” y puede aportar elementos de valor en la generación de conceptos e ideas en la etapa inicial de desarrollo. El trabajo del investigador, a partir de la experiencia del usuario, es proporcionar herramientas acertadas para recoger todos los datos que dicho perfil puede aportar y, a la vez, puede desempeñar un papel fundamental en formalizar las ideas. De allí surge la idea de que el investigador y el diseñador puede ser la misma persona.
\item \textbf{Objetivo en común}\vskip
La idea del \textit{objetivo compartido} se plantea como una de las principales diferencias con respecto a los métodos tradicionales del diseño de productos o artefactos. Los métodos de diseño generalmente se planteaban para ser llevados a cabo por expertos que realizaban tareas individuales. Con el trabajo individual no era necesario compartir la visión del objetivo general del proceso de diseño. En cambio, el diseño colaborativo plantea que este punto es fundamental: \textquote{\textit{Para que el equipo funcione correctamente necesita tener la visión del objetivo en común}}.

Lógicamente, después de comprender las características principales del diseño colaborativo, se infiere que el rol del diseñador en el proceso debe cambiar necesariamente al incluir este nuevos ``socios creativos'' en un entorno que tradicionalmente le pertenecía.\vskip
En la figura \ref{fig: co} se puede apreciar la diferencia de un esquema de diseño clásico o tradicional respecto al co-diseño . En el diseño clásico los roles trabajan por separado, si consideramos que el diseñador e investigador puede ser la misma persona, la interacción con el usuario es a través de un reporte o lista de requerimientos con las ideas sobre el diseño. De esa manera el diseñador trabaja en base a la lista y una vez finalizado el trabajo se efectúa la entrega o devolución. Por otra parte, en el co-diseño se permite al usuario participar durante todo el proceso de desarrollo de un proyecto de diseño a través de una interacción directa con el equipo de diseño/investigación. Esta interacción se realiza mediante las herramientas inherentes a cada proyecto, que pueden ser diagramas, referencias, artefactos, métodos y/o técnicas.

\end{enumerate}


\begin{figure}
\centering
\includegraphics[width=14cm]{Img/CPD/1-co.png}
\caption{\textbf{\footnotesize{Diseño clásico vs co-diseño. A la izquierda, en el diseño clásico la interacción se realiza mediante reportes o informes. A la derecha se aprecia la interacción de los participantes mediante la compartición de herramientas durante todo el proceso.}}}
\label{fig: co}
\end{figure}


\subsection{Diseño Iterativo}

El \textbf{diseño iterativo} en inglés \textit{Iterative Design} \textquote{\textit{es una metodología de diseño basada en un proceso cíclico de creación de prototipos y pruebas, para analizar y refinar un trabajo que se encuentra en progreso. En el diseño iterativo, la interacción con el sistema diseñado se utiliza como una herramienta de investigación para recolectar información y desarrollar el proyecto, implementando versiones sucesivas o iteraciones del diseño}} \citep{Zimmerman2003}. \vskip
La prueba, el análisis, el refinamiento y la repetición son necesarios porque la experiencia del usuario no se puede predecir por completo, en el proceso iterativo las decisiones de diseño se basan en la experimentación  con el prototipo\footnote{Un prototipo es un ejemplar o primer molde en que se fabrica una figura u otra cosa.} en progreso. De esta manera, el proyecto se desarrolla a través de un continuo diálogo entre los diseñadores, el diseño y el usuario. 

En un nivel superficial, el diseño iterativo solamente difiere de la metodología de cascada\footnote{La metodología en cascada, también llamado modelo en cascada, es el enfoque metodológico que ordena rigurosamente las etapas del ciclo de vida de un proyecto, de tal forma que el inicio de cada etapa debe esperar a la finalización de la inmediatamente anterior.} de una manera: En lugar de especificar toda la aplicación antes de compilarla, se diseña y construye completamente una parte de la aplicación, y luego se utiliza esa parte y las unidades completadas previamente como base para el diseño y la producción futuros. En otras palabras, iterar es diseñar y, más específicamente, comprender el diseño en el momento que se construye el diseño. Alistair Cockburn lo describe como \textbf{``aprender al completar''} y lo distingue del diseño incremental\footnote{El modelo incremental tiene como objetivo un crecimiento progresivo de la funcionalidad. Es decir, el producto va evolucionando con cada una de las entregas hasta que se amolda a lo requerido por el cliente o destinatario.
} en el sentido que éste consiste en agregar nuevos elementos, incluso de forma iterativa, mientras que iterar trata sobre volver a trabajar y refinar. \textquote{\textit{Lo más destacado del método iterativo es el siguiente principio subyacente: Hasta que se no se haya construido realmente lo que se está diseñando, no se podrá comprender en su totalidad}}\citep{Chronicles2009}.

\begin{figure}
\centering
\includegraphics[width=14cm]{Img/CPD/iterativo}
\caption{\textbf{\footnotesize{Diseño incremental vs iterativo.}}}
\label{fig: iterativo}
\end{figure}



\clearpage
\section{Diseño paramétrico} 
\label{disenoparam}
Para lograr la colaboración en el proceso de diseño es indispensable tener conocimientos sobre el enfoque de diseño paramétrico, revisar sus bases conceptuales y procedimentales.

\textquote{\textit{El \textbf{Diseño Paramétrico} se entiende en términos generales como un proceso de descripción de una problemática utilizando variables.}} Actualmente para describir estas variables, los diseñadores
insertan valores numéricos o algoritmos en un software especializado, al modificar las
variables se generan una serie de alternativas de soluciones, y según el criterio del diseñador, la solución final es creada. Davis y Hudson coinciden en que \textquote{\textit{el diseño paramétrico en su definición contemporánea es únicamente posible creando un modelo paramétrico}}. A esto último lo definen como \textquote{\textit{un conjunto de ecuaciones que expresan una geometría explícitamente por medio de funciones definidas por parámetros}}. \citep{Kaled2016} \vskip
Todo sistema de esta índole está compuesto por unos parámetros iniciales y las relaciones entre ellos, de manera que si se ajusta uno de los parámetros, el resultado se verá afectado de manera acorde, al igual que si se altera alguna de las relaciones. Esto brinda una característica de fuerte y sencilla maleabilidad, que permite verificar resultados fácilmente. El diseñador que emplea estas herramientas en vez de diseñar un objeto resultante, se enfoca en crear lógicas que pongan en relación estos parámetros y resulten en un sistema vivo y ampliamente modificable de acuerdo a su criterio pero asistido por la computadora. El uso de este método por medio de la manipulación de los sistemas fomenta la exploración y la experimentación de las formas del producto, que se generan automáticamente por la modificación de los parámetros o las relaciones. \vskip
Robert Woodbury afirma que \textquote{\textit{el diseño es cambio y que el modelado paramétrico representa el cambio}}. Lo menciona como una característica esencial del diseño paramétrico, como aquello que lo distingue de los métodos de diseño tradicionales. \textquote{\textit{Es marcar e identificar las partes y como se relacionan y cambian de manera coordinada}} \citep{Kaled2016}. La demostración explicita de las partes es lo que contribuye a la intervención y modificación interactiva en tiempo real, debido a la operatividad visible del cambio en el sistema. La lógica sistemática del diseño paramétrico permite evaluar las relaciones de manera visible, en lugar de hacerlo de manera intuitiva por medio de un proceso mental interno.
El autor Nigel Cross afirma que \textquote{\textit{El diseñador puede explorar y descubrir nuevas posibilidades en lugar de explorar sus conocimientos previos para llegar con una solución que ya conocía. Y que es necesaria una representación visual ya que diseñar es difícil de conducir puramente por procesos mentales internos}} \citep{Kaled2016}. \vskip
En la figura \ref{fig:procesopar} se puede analizar el proceso del diseño paramétrico: A partir de la abstracción de ideas y conceptos del diseño se establecen las condiciones geométricas y matemáticas, de estas derivan los parámetros y variables que sirven para programar el proceso, de la programación se obtiene como resultado la representación visual. En todo momento el diseñador puede modificar las condiciones geométricas y matemáticas, modificar los parámetros de la programación y explorar los resultados. Mediante el diseño iterativo se analizan los resultados, se vuelve a trabajar y refinar el modelo hasta lograr una versión o solución aceptable para el problema de diseño. 

\begin{figure}[h]
\includegraphics[width=12cm]{Img/CPD/diseno.png}
\centering
\caption{\textbf{\footnotesize{proceso de diseño paramétrico}}}
\label{fig:procesopar}
\end{figure}

\clearpage
\subsection{Historia del diseño paramétrico} 
El término \textit{paramétrico} se originó en las matemáticas, pero hay un debate sobre cuándo comenzaron los diseñadores a usar la palabra, David Gerber en su tesis doctoral \textit{``Parametric Practice''} acredita a Maurice Ruiter por usar el término en un trabajo de 1988 titulado \textit{``Parametric Design''} \citep{Davis2013}. En 1987 la compañía \textit{Parametric Technology Corporation} (PTC), fundada por el matemático Samuel Geisberg lanzó el primer software de modelado paramétrico con éxito comercial: Pro/ENGINEER \footnote{Pro/ENGINEER ahora conocido como Creo Elements/Pro, es un producto de diseño, fabricación e ingeniería asistida por computadora de PTC Corporation (Massachusetts. USA)}. Por su parte, Robert Stiles sostiene que la verdadera procedencia del término se produjo décadas antes en los escritos de los años 40 por el arquitecto italiano Luigi Moretti \citep{Davis2013}.\vskip
Moretti escribió extensamente sobre la arquitectura paramétrica, que define el estudio de los sistemas de arquitectura con el objetivo de \textit{definir las relaciones entre las dimensiones que dependen de los diversos parámetros}. En esa época utilizó el diseño de un estadio como ejemplo, explicando cómo la forma del estadio puede derivar de diecinueve parámetros relacionados con aspectos como ángulos de visión y el costo económico del hormigón.\vskip 
Sin embargo, la parametrización tiene una larga historia en las matemáticas y los ejemplos más antiguos que se encontraron para describir modelos tridimensionales se producen mucho tiempo antes. Un ejemplo es el artículo de James Dana en 1837 llamado \textit{``On the Drawing of Figures of Crystals''} \citep{dana1838drawing}. En el documento, explica los pasos generales para dibujar una gama de cristales y las disposiciones para sus variaciones utilizando un lenguaje propio mezclado con parámetros, variables y proporciones. En la figura \ref{fig:dana} se puede apreciar la definición de los parámetros de Dana.\vskip


\begin{figure}[h]
\includegraphics[width=12cm]{Img/GEO/geo-dana.jpg}
\centering
\caption{\textbf{\footnotesize{Definición de cristales por James Dana con un lenguaje propio}}}
\label{fig:dana}
\end{figure}


Existen muchos otros casos de ciencia del principio del siglo XIX involucrados con las matemáticas de representaciones paramétricas. Un ejemplo de esa época incluye a Sir John Leslie \footnote{John Leslie fué un físico y matemático escocés. Destacó principalmente en el estudio del calor. En 1804 inventó el cubo de Leslie, y en 1810 desarrolló el primer método de congelación artificial.}, en uno de sus libro sobre análisis geométrico, demostrando la auto-similitud de las curvas catenarias usando \textit{círculos paramétricos}. Otro ejemplo es Samuel Earnshaw \footnote{Samuel Earnshaw fué un matemático y físico inglés, destacado por sus contribuciones a la física teórica, especialmente el Teorema de Earnshaw.} que escribió sobre \textit{superficies paramétricas hiperbólicas} deformadas por líneas de fuerza en un documento que dio lugar al teorema de Earnshaw. Estos ejemplos de expresar la geometría con ecuaciones paramétricas son dos de muchos del período, un período mucho antes de que el arquitecto español Antoni Gaudí\footnote{Antoni Gaudí fué un arquitecto español, máximo representante del modernismo catalán con un sentido innato de la geometría y el volumen \url{http://www.antonigaudi.org/} } comenzara a diseñar arquitectura con curvas catenarias paramétricas y paraboloides hiperbólicos paramétricos a fines del siglo XIX.

Es imposible saber si Gaudí fue influenciado directamente por los científicos y matemáticos que anteriormente utilizaban ecuaciones paramétricas para definir geometrías. 
Mark Burry\footnote{Mark Cameron Burry es un arquitecto neozelandés y profesor de Arquitectura del Royal Melbourne Institute of Technology en Melbourne.}, el actual arquitecto ejecutivo de \textit{``La Sagrada Familia''} \footnote{El Templo Expiatorio de la Sagrada Familia, es una basílica católica de Barcelona, diseñada por el arquitecto Antoni Gaudí. Iniciada en 1882, todavía está en construcción.} explica que a pesar de que el currículum universitario de Gaudí incluía, entre otras cosas, matemáticas avanzadas, física general, ciencias naturales y geometría descriptiva; prácticamente no hay nada escrito por él mismo sobre sus motivaciones, las teorías y las prácticas de su obra. La comprensión de Gaudí sobre las matemáticas es la base de su arquitectura, especialmente en sus trabajos posteriores, que consiste en superficies diseñadas con helicoides, paraboloides e hiperboloides paramétricamente asociados con superficies regladas, booleanos, relaciones geométricas y arcos catenarios\footnote{Una catenaria es una curva ideal que representa físicamente la curva generada por una cadena, cuerda o cable sin rigidez flexional, suspendida de sus dos extremos y sometida a un campo gravitatorio uniforme.}

Burry plantea que uno de los primeros ejemplos es la maqueta que utilizó el arquitecto para representar el modelo de la cripta de la \textit{``Colonia Guell''}, a principios del siglo XX. \textquote{\textit{Este modelo estaba compuesto por cadenas que sostenían pesos, y actuaban por la fuerza de la gravedad.
La maqueta fue realizada al revés, y Gaudí le sacó una fotografía para poder visualizarla al derecho. Una cadena que cuelga tiene por lo menos cuatro parámetros: su longitud, su peso y los dos puntos a los que está sujetada. La cadena colgando a la merced de la fuerza de la gravedad adopta una forma curva. Esta curva es la función explicita de los parámetros de la cadena, con la propiedad agregada de que cuando es invertida la curva actúa por pura compresión. Al no haber una computadora, la cadena colgante es un modelo paramétrico gracias a la presencia de parámetros que controlan una forma derivada de una función explicita (en este caso, calculada por la gravedad)}}. \citep{Kaled2016}


\begin{figure}[h]
\includegraphics[width=12cm]{Img/GEO/geo-gaudic.jpg}
\centering
\caption{\textbf{\footnotesize{Maqueta gravitatoria y fotografía al revés donde se pueden apreciar los arcos catenarios.}}}
\label{fig:gaudi}
\end{figure}

Lo innovador del modelo de Gaudí, radica en que éste calcula automáticamente los resultados, porque que al mover un parámetro se afecta todo el modelo, que a pesar de ser análogo, marcó el inicio de la actualización en tiempo real de geometrías con bases matemáticas, lo cuál le da el énfasis utilitario de explorar las posibilidades que el modelo ofrece (ver figura \ref{fig:gaudi}).
Esto marcó la necesidad de facilitar la \textit{interacción entre el diseñador y el modelo}, que implicaba muchas representaciones manuales y modificaciones completas con cada cambio. \vskip 
No fue hasta la aparición de las computadoras y el primer programa CAD, \textbf{Sketchpad} de Ivan Sutherland en 1963 (ver figura \ref{img:sketchpad}) que se facilitó la interacción en tiempo real del diseñador y la computadora. Se describe como un sistema que tenía un puerto de entrada con un modelo de límites que promovía la interacción, porque al manipular una parte del modelo afectaría los cambios geométricos en otro. En el contexto de aparición de este programa, el proceso de diseño era enteramente manual y análogo, donde un cambio mínimo significaría comenzar de nuevo. Al representar las geometrías en dos dimensiones en la computadora se facilitaba el proceso de diseño. A partir de esto se fueron desarrollando un amplio número de software cuyas capacidades y posibilidades se extendían con aquellas del procesamiento de datos de las computadoras.  \citep{Kaled2016}\vskip




\clearpage
\subsection{Diseño paramétrico mediante CAD}
\label{cadparam}

La diferenciación entre los conceptos \textbf{computarización del diseño} y \textbf{diseño computacional} es esencial para la compresión de este trabajo. Ambos términos suelen ser tomados como iguales, definidos como el uso de tecnologías CAD para realizar un proyecto de diseño. La diferencia radica en su empleo: \textquote{\textit{la \textbf{computarización del diseño} apunta a el uso de la computadora como herramienta de dibujo o representación formal de un proyecto concebido en la mente del diseñador, mientras que el \textbf{diseño computacional} aborda el diseño con bases en el pensamiento algorítmico, lo que engloba al diseño paramétrico y generativo}} \citep{Kaled2016}. Esta diferenciación puede apreciarse claramente en el programa Sketchpad y el modelo de Gaudí. El programa de Sutherland representa geometrías modificables, mientras que la maqueta de Gaudí encarna un sistema complejo de parámetros y relaciones.

\begin{figure}[h]
\includegraphics[width=8cm]{Img/GEO/geo-sketchpadc.jpg}
\centering
\caption{\textbf{\footnotesize{Ivan Sutherland utilizando sketchpad en 1963}}}
\label{img:sketchpad}
\end{figure}

Los modelos CAD paramétricos se pueden desarrollar mediante aplicaciones CAD modernas y permiten a los ingenieros alterar y modificar la geometría de manera eficiente sin tener que volver a crear el modelo.
La parametrización de los modelos CAD se puede realizar en diferentes niveles, pudiendo elevar la calidad y la reutilización de un modelo CAD.
Además, la reutilización de modelos CAD puede disminuir el tiempo de entrega del desarrollo del producto, si el proceso está definido y usado apropiadamente \citep{Alfaiate2017}.


Un ejemplo de software CAD con posibilidad de diseño paramétrico es \textbf{AutoCad}\footnote{\url{https://latinoamerica.autodesk.com/products/autocad/overview}}, un programa masivamente utilizado para dibujo 2D y modelado 3D, actualmente desarrollado y comercializado por la empresa Autodesk\footnote{\url{https://latinoamerica.autodesk.com}}. \textquote{\textit{En Autocad el dibujo paramétrico se utiliza para diseñar utilizando restricciones, que son asociaciones y restricciones aplicadas a la geometría}} \citep{Autodesk2017}. En este software se utilizan dos tipos de restricciones generales:
\begin{enumerate}
    \item Las restricciones geométricas que controlan las relaciones entre los objetos. 
    \item Las restricciones por cota que controlan los valores de distancia, longitud, ángulo y radio de los objetos.
\end{enumerate}

En la figura \ref{fig:autocad-0} se ilustran las restricciones geométricas y las restricciones por cota que utiliza Autocad. Durante la fase de diseño de un proyecto, las restricciones proporcionan una manera de cumplir con determinados requisitos a la hora de experimentar con distintos diseños o de hacer cambios. Los cambios que se hacen en un objeto pueden ajustar otros objetos de forma automática, y restringir los cambios en los valores de distancia y de ángulo.

Las restricciones en este caso de ejemplo permiten:

\begin{itemize}
    \item Mantener requisitos y especificaciones de diseño restringiendo la geometría de un dibujo.
    \item Aplicar varias restricciones geométricas a los objetos de manera instantánea.
    \item Incluir fórmulas y ecuaciones en las restricciones por cota.
    \item Hacer cambios de diseño rápidamente cambiando el valor de una variable.
\end{itemize}



\begin{figure}[h]
\includegraphics[width=8cm]{Img/CPD/autocad-0.png}
\centering
\caption{\textbf{\footnotesize{Restricciones geométricas y por cota en un diseño paramétrico hecho con Autocad.}}}
\label{fig:autocad-0}
\end{figure}

\begin{figure}[h]
\includegraphics[width=14cm]{Img/CPD/autocad.jpg}
\centering
\caption{\textbf{\footnotesize{Pantalla de Autocad con un modelo mecánico y sus partes}}}
\end{figure}


\subsection{Diseño paramétrico especificado en algoritmos} 
El diseño paramétrico también es posible a través de las \textbf{interfaces de secuencias de comandos} en inglés \textit{scripting}\footnote{Un script es un programa informático usualmente simple, que por lo general se almacena en un archivo de texto plano. }. \textquote{\textit{Las interfaces de scripting permiten a los diseñadores/programadores escribir código para automatizar partes del diseño}}. Los desarrolladores de programas como AutoCAD, desde el año 1982 comenzaron a incluir estas interfaces para \textit{evitar la codificación de requerimientos específicos de algunos cliente y usuarios, que de toda manera se los pedirían}. Diez años más tarde, en 1992, cuando Mark Burry necesitaba modelar las hipérbolas de forma paramétrica para la Sagrada Familia, en lugar de pedirle a la empresa Autodesk que incluyera una función de hipérbola en AutoCAD, utilizó la interfaz de scripting para desarrollar su propia función. El script de Burry procesaba tres parámetros de entrada: un punto de origen, un punto mínimo y un punto de asíntota. Estos parámetros podían cambiar sus valores a través de una serie de ecuaciones explícitas escritas en código AutoLISP\footnote{AutoLISP es un lenguaje de programación derivado del lenguaje Lisp. Es utilizado para generar rutinas en AutoCAD y sus derivados.} para producir como resultado una hipérbola. 

El script, con sus parámetros de entrada, funciones explícitas y salidas es una realización arquetípica de la definición matemática de paramétrico. Ipek Dino ha argumentado que los scripts son inherentemente paramétricos, señalando que \textquote{\textit{los \textbf{sistemas paramétricos} se basan principalmente en \textbf{principios algorítmicos} ya que un algoritmo toma un valor o un conjunto de valores como entrada, ejecuta una serie de pasos computacionales que transforman la entrada y finalmente produce un valor o un conjunto de valores como salida}} (\citeauthor{Dino2012}, \citeyear{Dino2012}).
\vskip Por lo tanto, las interfaces de scripting disponible en gran parte de los paquetes de software para diseño están naturalmente predispuestas para generar modelos paramétricos.


\begin{figure}[h]
\includegraphics[width=14cm]{Img/CPD/cad-autolisp.jpg}
\centering
\caption{\textbf{\footnotesize{Programa AutoLisp para generar una espiral 3D con bloques simples, como
ejemplo de expresiones anidadas en el libro ``Coates's course book Generative Modelling''. \citep{Celani2008}}}}
\end{figure}



\clearpage

\subsection{Sistemas CAD según su uso}
Los diferentes usos del CAD se pueden identificar mediante una matriz distinguiendo entre tiempo y espacio \citep{Maher1997}, como se puede ver en la figura \ref{fig:tablacad} analizada a continuación:

\begin{enumerate}
\item El uso de CAD en el mismo lugar al mismo tiempo es posible con un Interfaz \textbf{CAD de usuario único}, donde uno o más los diseñadores pueden sentarse en una estación de trabajo para diseñar los modelos.
\item El uso de CAD en el mismo sitio pero en tiempos diferentes es posible gracias a la gestión de datos técnicos donde los datos están disponibles para la misma persona u otros miembros del equipo de diseño después que una sesión de diseño CAD se completa.
\item El uso de CAD al mismo tiempo en sitios diferentes se denomina como
\textbf{CAD colaborativo} o bien \textbf{Co-Diseño CAD}. En esta situación, diferentes diseñadores pueden ver y modificar el diseño en diferentes ubicaciones, viendo la misma imagen en la pantalla y comunicándose entre sí.
\item El uso de CAD en sitios diferentes en tiempos diferentes es posible gracias a la distribución de datos CAD a través de una red (\textbf{CAD distribuido}), permitiendo a los diseñadores acceder a los datos independientemente de su ubicación y disponibilidad.
\end{enumerate}


\begin{figure}[h]
\includegraphics[width=10cm]{Img/CPD/cad-time.png}
\centering
\caption{\textbf{\footnotesize{El uso del CAD en el espacio y tiempo}}}
\label{fig:tablacad}
\end{figure}

La forma en que se utiliza el CAD en el contexto de este trabajo, tiene como objetivo que la colaboración se convierta en un valor agregado y sea suministradora de componentes o sistemas para ser integrados en el producto final. Para lograr esto y establecer un sistema es indispensable conocer el contexto actual de las nuevas tecnologías web y sus posibilidades. 

Luis F. Ruiz Minguela define que \textquote{\textit{Para una efectiva colaboración no basta con una comunicación iterativa en la que se intercambian pocos datos del producto y siempre de arriba hacia abajo (top-down”), sino que es necesario disponer de un repositorio\footnote{Un repositorio, depósito o archivo es un sitio centralizado donde se almacena y mantiene información digital, habitualmente bases de datos o archivos informáticos.} común de datos que vayan más allá de la geometría representada en planos, incluyendo documentos de especificaciones, instrucciones de montaje, etc. y todos ellos en cualquier formato digital: texto, CAD/CAM/CAE, PDM, audio, vídeo y combinaciones de ellos}} \citep{Ruiz}.


\subsubsection{CAD distribuído e integrado}

En función de la naturaleza del diseño como trabajo colaborativo, el \textbf{CAD distribuído e integrado} es un tema de mucha relevancia para este trabajo de investigación.\vskip
\textquote{\textit{El \textbf{CAD distribuído} implica que los datos CAD están disponibles a través de una red distribuída. \textbf{El CAD integrado} implica que los datos CAD se pueden leer por más que un programa de computadora }} \citep{Synco1993}.\vskip
Tanto el hardware como las tecnologías de software evolucionaron para admitir la comunicación y el acceso multiusuario a los datos de diseño, la forma de acceso varía desde archivos compartidos hasta accesos compartidos mediante \textbf{Sistemas de Gestión de Bases de Datos} en inglés \textit{Data Base Management System} (DBMS)\footnote{\url{https://en.wikipedia.org/wiki/Database}}. El modelado de los datos de diseño proporciona la base para establecer el semántica de los datos compartidos. El CAD distribuido permite el acceso a los datos de diseño a través de un sistema de CAD predeterminado o bien un DBMS.\vskip
Los esfuerzos hacia la integración del CAD generaron como resultado el desarrollo de varios formatos  estándares para el \textbf{Intercambio de Datos} en inglés \textit{Data Exchange} (DE), así como muchos ``no estándares". Los formatos estándares de intercambio han variado desde formatos para datos de dibujo técnico hasta formatos para modelos de productos. 
DXF\footnote{\url{https://es.wikipedia.org/wiki/DXF}} e IGES\footnote{\url{https://wiki.eclipse.org/IGES_file_Specification}} son algunos formatos que resultaron de los esfuerzos en el intercambio de bases de datos de gráficos entre sistemas CAD.\vskip

La falta de características de diseño en los estándares de intercambio de datos, como topología, relación entre objetos, etc., obligó un cambio en el enfoque hacia los estándares de \textbf{intercambio de datos de productos}. El enfoque en el modelado de productos (por ejemplo, PDES- STEP\footnote{\url{https://pdesinc.org/}}, etc.) han puesto énfasis en el \textbf{modelado sólido 3D}, en la geometría, las características esenciales de los modelos, los datos no geométricos y el modelando del producto como un conjunto de conceptos u objetos.
Con todo lo visto respecto al CAD distribuído, sus características generales y diferentes enfoques de gestión e intercambio de datos, es necesario establecer las características del sistema informático para que efectivamente se logre la colaboración. A continuación se estudia un posible modelo.




\subsection{Modelo para el soporte informático a la colaboración }

La colaboración implica que el soporte informático debe proporcionar flexibilidad en la comunicación de datos e ideas, considerando que el diseño colaborativo involucra muchos tipos de conocimiento de diferentes dominios.
Los diseñadores requieren diferentes vistas del diseño y pueden tener intereses diferentes respecto al desarrollo de la solución de diseño y su representación asociada. Se necesitan múltiples niveles de abstracción para gestionar la diversidad del conocimiento. En términos de soporte informático, se necesitan diferentes formas de interactuar con otros diseñadores y herramientas para brindar respaldo a la diversidad.\vskip

El desarrollo del soporte informático para la colaboración se puede lograr mediante un \textbf{Espacio de Trabajo Compartido}, como se ilustra en la figura \ref{fig:espacio0}. El espacio de trabajo compartido es el medio a través del cual se produce la comunicación entre los participantes en el diseño colaborativo. Un espacio de trabajo compartido no solo proporciona una comunicación visual flexible y efectiva, sino que también proporciona un medio en el que un diseñador puede comprender el modelo/diseño de otro participante sin necesidad de tener el mismo vocabulario. Por lo tanto, también es importante compartir la representación subyacente de los elementos de diseño en el espacio de trabajo.

\begin{figure}[h]
\includegraphics[width=12cm]{Img/CPD/cad-shared0.png}
\centering
\caption{\textbf{\footnotesize{Espacio de trabajo compartido}}}
\label{fig:espacio0}
\end{figure}

Esto implica que el modelo ilustrado en la figura \ref{fig:espacio0} es demasiado simplista. Un espacio de trabajo compartido CAD consta se puede dividir en dos significados:
\begin{enumerate}
\item El espacio de trabajo con el que los diseñadores humanos ven e interactúan, y
\item La representación compartida del problema de diseño que utiliza la propia computadora para la persistencia y la comunicación entre procesos.
\end{enumerate}

Por ende se consideran dos categorías de representaciones de espacio de trabajo:

\begin{enumerate}
    \item \textbf{Representación visual compartida} y
    \item \textbf{Representación subyacente compartida}.
\end{enumerate}
La necesidad de mantener dos formas de representación compartida proviene de los requisitos de un sistema multiusuario en el que los participantes puedan ver el trabajo de los demás, proporcionado por la representación visual compartida (\textbf{modelo 3D}), con la posibilidad de que el sistema mantenga una o más representaciones de la solución de diseño (\textbf{versiones}) y cualquier conocimiento de dominio relevante proporcionado por la representación subyacente (\textbf{archivos extra}). En la figura \ref{fig:sistemashared} se puede apreciar un esquema resumido de las representaciones en un espacio de trabajo.

\begin{figure}[h]
\includegraphics[width=12cm]{Img/CPD/cad-shared.png}
\centering
\caption{\textbf{\footnotesize{Representaciones en un espacio de trabajo. El modelo 3D y posibles versiones como representación visual y los archivos extras como representación subyacente.}}}
\label{fig:sistemashared}
\end{figure}

Desde el punto de vista de un sistema informático se pueden establecer cuatro componentes necesarios para implementar un espacio de trabajo compartido:

\begin{enumerate}
    \item \textbf{Servidor de sesión}. Inicia el proceso de solicitud que se encarga de configurar la sesión para el diseño colaborativo.
    \item \textbf{Coordinador}. Un proceso de aplicación especial que incorpora la gestión y el control de datos entre la aplicación y el espacio de trabajo.
    \item \textbf{Representación visual compartida}. Intercambio visual de elementos de diseño desde el punto de vista geométrico.
    \item \textbf{Representación subyacente}. Conjunto genérico de objetos asociados a los modelos y los procesos.
\end{enumerate}

\begin{figure}[h]
\includegraphics[width=14cm]{Img/CPD/cad-shared1.png}
\centering
\caption{\textbf{\footnotesize{Modelo de sistema CAD colaborativo}}}
\label{fig:sistemaco}
\end{figure}

En este trabajo se aborda el concepto de diseño computacional con la utilización de modelos 3D paramétricos con el fin de lograr la colaboración entre personas con diferente formación o conocimientos técnicos. Es indispensable que los diseños se generen en función de sus parámetros y expongan sus características de manera comprensible por todas las partes involucradas. \vskip

De esa manera surge la necesidad de desarrollar un sistema de CAD distribuído para una comunicación eficiente mediante la compartición de modelos 3D entre los interesados, y así gracias al diseño iterativo lograr la colaboración para generar nuevas soluciones.

\clearpage
\section{Informática Gráfica: perspectiva del trabajo}
La \textbf{Informática Gráfica} es sin lugar a dudas un tema central en el desarrollo de este trabajo. A continuación se explican los principales campos que abarca, y la utilidad de cada uno.\vskip
La interpretación de la \textbf{información visual} por parte del cerebro sólo es posible luego de un proceso de aprendizaje; una vez que se aprende a procesar la información visual, por ejemplo, al reconocer objetos y la utilidad de cada uno, dicha información puede servir para la toma decisiones. \vskip
A pesar de la disparidad que puede haber entre los diferentes medios de registro visuales, por ejemplo, entre una hoja de papel y una pantalla de computadora, el conocimiento básico necesario para registrar la información visual es el mismo.
Mientras que en el papel es necesario conocer los puntos a entintar y su color, en la pantalla es necesario saber qué píxeles\footnote{Un píxel o pixel, en​plural píxeles es la menor unidad homogénea en color que forma parte de una imagen digital.} de la pantalla se deben activar para que emitan luz del color apropiado. \vskip
\textquote{\textit{Haciendo un poco de abstracción, si llamamos ``puntos del espacio de referencia''
a los puntos del papel, de la pantalla, o de cualquier otro medio de registro, la información necesaria para asignar características o propiedades ópticas a cada punto del espacio de referencia, tales como color, opacidad, etc., es o se conoce como \textbf{información gráfica}}}. \citep{Ramos2011}\vskip

Tomando como referencia la definición anterior, \textquote{\textit{la \textbf{Informática Gráfica} (IG) el área de la Informática que se dedica al estudio y desarrollo de procesos que permitan el tratamiento automático de la información gráfica}}.\vskip 
La información gráfica con que trabaja la IG puede estar dada por conjuntos de infinitos puntos, definidos en espacios continuos, o bien por conjuntos finitos definidos sobre espacios discretos, es decir, direccionables exclusivamente mediante números enteros. En el diagrama de la figura \ref{fig:grafica0} podemos ver los cuatro tipos de información gráfica en los espacios 2 y 3D.

\begin{figure}[h]
\includegraphics[width=8cm]{Img/CPD/grafica0.png}
\centering
\caption{\textbf{\footnotesize{ espacios de trabajo básicos en la Informática Gráfica}}}
\label{fig:grafica0}
\end{figure}

En los espacios continuos, la información gráfica definida en un espacio 2D se conoce como \textbf{imagen vectorial}, y si el espacio es 3D, entonces se llama \textbf{modelo vectorial}. Algo similar ocurre en los espacios discretos. Así, en 2D la información gráfica recibe el nombre de \textbf{imagen raster}\footnote{Una imagen ráster o mapa de bits es un archivo que representa una matriz de píxeles o puntos de color, a partir de un modelo vectorial 3D} o imagen discreta; en cambio, en los espacios discretos 3D es conocida como \textbf{información volumétrica}.

En la actualidad, la mayoría de las aplicaciones gráficas o \textit{sistemas gráficos} se limitan al tratamiento de la información gráfica definida en espacios de 2 y 3 dimensiones, aunque hay sistemas que permiten el estudio, tratamiento y visualización de información gráfica en espacios de dimensión mayor, espacialmente en 4D. En este trabajo de investigación se utiliza el conocimiento de la IG con la información definida en 2D y 3D exclusivamente.

\subsection{Campos que abarca la Informática Gráfica}
Hay muchas formas de tratar la información gráfica, y cada una de ellas puede dar lugar a un campo o subárea de especialización dentro de la IG.
Cualquiera de los cuatro tipos de información gráfica que se muestra en la figura \ref{fig:grafica0} puede ser la fuente de información con la que puede trabajar un proceso gráfico. Igualmente, generar información de uno de los cuatro tipos suele ser el principal objetivo de dichos procesos aunque, en algunas ocasiones, lo que se pretende es obtener información numérica (cálculo de superficies, volúmenes, estadísticas, etc.).
Según esto, se puede pensar en clasificar los diferentes campos y procesos de la IG, en función del tipo de información de entrada y salida, y de la clase de proceso que se efectúe con la información gráfica.
Entonces, si se relaciona mediante una flecha la clase de información de entrada que requiere un proceso o sistema gráfico, con el tipo de información de salida generada por éste, a partir del diagrama de la figura \ref{fig:grafica0} e incorporando la información numérica, se puede construir un diagrama, tal como se muestra en la figura \ref{fig:grafica1}, donde quedan especificados los principales campos de la IG.

\begin{figure}[h]
\includegraphics[width=16cm]{Img/CPD/grafica1.png}
\centering
\caption{\textbf{\footnotesize{Campos más significativos de actuación de la Informática Gráfica}}}
\label{fig:grafica1}
\end{figure}

En el diagrama de la figura \ref{fig:grafica1} aparecen los principales campos que abarca la IG, así como algunos de los procesos más comunes, como son los de conversión de unos tipos de información a otros. Además, es importante señalar que las flechas del diagrama indican el objetivo final del campo de estudio o del proceso, y no necesariamente el camino seguido para alcanzar dicho objetivo. Por ejemplo, en la \textbf{Síntesis de Imágenes}, uno de los métodos para conseguir una imagen raster a partir del modelo vectorial 3D, genera una imagen vectorial como paso previo a la obtención de la imagen raster.

A continuación, en la figura \ref{fig:grafica2} se definen los dos campos de la IG que son objetos de estudio en este trabajo de investigación: La \textbf{Síntesis de Imágenes} y el \textbf{Modelado}. 



\begin{figure}[h]
\includegraphics[width=12cm]{Img/CPD/grafica2.png}
\centering
\caption{\textbf{\footnotesize{Campos de la Informática Gráfica definidos para el trabajo de investigación. La síntesis de imágenes y el Modelado.}}}
\label{fig:grafica2}
\end{figure}


\subsection{Síntesis de Imágenes}

Un elemento indispensable para poder visualizar modelos 3D en una pantalla es la \textbf{Síntesis de imágenes}, definida como un \textquote{\textit{campo de la informática gráfica que se dedica principalmente al estudio y desarrollo de procesos para sintetizar imágenes raster}} \citep{Ramos2011}.\vskip
En la mayoría de los casos su principal objetivo es obtener imágenes de calidad, no importando demasiado si el modelo vectorial de partida es consistente (coherente) o no. Sin embargo, en el diseño CAD es fundamental que los modelos estén bien definidos (consistentes). La visualización en estos contextos es auxiliar (aunque necesaria), por lo que no tiene demasiada importancia la calidad de las imágenes, al menos en las primeras fases de diseño.\vskip

El conjunto de procesos que directa o indirectamente permiten la síntesis de imágenes debería conocerse como sintetizador de imágenes, o algo parecido. Sin embargo, se utiliza un término más ambiguo, como el de \textbf{sistema gráfico} (SG). 
La visualización o \textbf{rendering} se produce en función de las condiciones establecidas por el observador, cámara o visor. Es necesaria la presencia de una cámara o visor, debido a que el propósito de un sistema gráfico es crear una imagen bidimensional a partir de un modelo tridimensional, lo que implica la imposibilidad de mostrar simultáneamente en pantalla toda la información del modelo.
Esquemáticamente, el objetivo principal de un sistema gráfico se resume en la figura \ref{fig:grafica3}.

\begin{figure}[h]
\includegraphics[width=8cm]{Img/CPD/grafica3.png}
\centering
\caption{\textbf{\footnotesize{Rasterización de una imagen}}}
\label{fig:grafica3}
\end{figure}

\subsubsection{Estructuración de la Síntesis de Imágenes}
Como toda disciplina, la Síntesis de Imágenes se organiza y subdivide en campos de trabajo, principalmente para evitar la mezcla de conceptos, y facilitar así su estudio. Para ello, se busca y aplicar uno o más criterios de organización que permitan la estructuración coherente del área. Son dos los criterios principales que se utilizan: \textbf{el método de síntesis de imágenes utilizado}, y \textbf{el modelo de iluminación que se aplica}.

\begin{description}

\item \textbf{Métodos de síntesis de imágenes} \vskip
El criterio principal que se utiliza en la estructuración de la Síntesis de Imágenes es \textbf{el camino que se sigue (método) para sintetizar las imágenes raster}.

\begin{enumerate}
    \item \textbf{Síntesis estándar} \vskip
    Como se indica en la figura \ref{fig:grafica4}, la información se busca en el espacio vectorial, según las condiciones del visor, formando (mediante proyecciones) una imagen vectorial \footnote{Las imágenes vectoriales son gráficos formados a base de curvas y líneas a través de elementos geométricos definidos como vectores.}. Si se dispusiese de un monitor vectorial, la imagen creada podría ser mostrada directamente en dicho monitor. Sin embargo, hoy en día la mayor parte de los monitores son de tipo raster, lo que significa que la imagen vectorial se debe rasterizar, para que pueda ser mostrada en esta clase de monitores.
    
    \begin{figure}[h]
    \includegraphics[width=8cm]{Img/CPD/grafica4.png}
    \centering
    \caption{\textbf{\footnotesize{método de síntesis estándar}}}
    \label{fig:grafica4}
    \end{figure}

    \item \textbf{Síntesis directa} \vskip
    La imagen raster se forma buscando la información gráfica directamente del espacio vectorial. Para ello, se utilizan una serie de procesos que emulan el movimiento y características de la luz natural. La figura \ref{fig:grafica5} muestra un esquema de este camino de síntesis, al cual se le denomina método directo de síntesis, o simplemente síntesis directa
    
    \begin{figure}[h]
    \includegraphics[width=8cm]{Img/CPD/grafica5.png}
    \centering
    \caption{\textbf{\footnotesize{método de síntesis directa}}}
    \label{fig:grafica5}
    \end{figure}
    
     \item La tercera y última ruta mostrada en la figura \ref{fig:grafica6}, aunque se emplea con frecuencia en la visualización volumétrica, no se utiliza en la Síntesis de imágenes, ya que no se consigue mayor calidad en las imágenes, pudiendo incluso disminuir en muchos casos. En cambio, el camino inverso sí es frecuentado, pues la conversión de la información volumétrica en vectorial (isosurfacing) permite la visualización por cualquiera de los métodos anteriores.
    
    \begin{figure}[h]
    \includegraphics[width=8cm]{Img/CPD/grafica6.png}
    \centering
    \caption{\textbf{\footnotesize{Renderizado directo de volúmenes (DVR)}}}
    \label{fig:grafica6}
    \end{figure}
    
    \end{enumerate}

\clearpage

\item \textbf{Modelos de Iluminación} \vskip
\textquote{\textit{El objetivo final de los modelos de iluminación es determinar la cantidad (intensidad) y el color de la luz que llega a un punto dado en la superficie de los objetos. Para ello, modelan una serie de efectos lumínicos, como la transparencia, reflexiones de la luz, textura de las superficies y sombras}} \citep{Ramos2011}. Estos efectos luminosos dependen del número, tamaño y posición de las fuentes de luz, por lo cual los modelos de iluminación han de tener en cuenta dichas fuentes. Los 3 tipos de modelos de iluminación más comunes son:

\begin{enumerate}
    \item \textbf{Modelos Locales}\vskip
    En el cálculo de la iluminación de un punto dado no se tiene en consideración la luz emitida (reflejada o transmitida) por los objetos circundantes.
    \item \textbf{Modelos Globales}\vskip
    En el cálculo de la iluminación se tiene en cuenta parte de la luz aportada por los objetos vecinos.
    \item \textbf{Modelos SemiGlobales}\vskip
    El modelo tiene en consideración \textbf{toda} la luz aportada por los objetos circundantes.
\end{enumerate}

Lo que diferencia a un modelo global de uno semiglobal es si el modelo realiza o no cálculos ajustados sobre la iluminación debida a la luz difusa, ya que ésta es una de las cuestiones más difíciles de evaluar. Por lo tanto, es posible considerar los modelos globales como una extensión de los semiglobales, incorporando el cálculo de la aportación difusa.
Como era de esperar, los modelos de iluminación computacionalmente más económicos y sencillos son los modelos locales, y los más caros y complejos los globales. Sin embargo, la complejidad y el tiempo de cálculo extra en los modelos semiglobales y globales quedan compensados con una mayor calidad de las imágenes sintetizadas.
\end{description}

\subsubsection{ Compatibilidad entre los métodos de síntesis y los modelos de iluminación} 
Para un método de síntesis dado, algunos modelos de iluminación son más fáciles de implementar que otros, dependiendo de la naturaleza del método y de la complejidad del modelo de iluminación.
Así, los modelos locales pueden ser aplicados sin dificultad tanto en la síntesis estándar, como en la directa. En cambio, los modelos semiglobales son más sencillo de implementar en la síntesis directa, aunque también es posible utilizarlos en la síntesis estándar, si bien, al precio de un aumento considerable en la complejidad de los algoritmos.
Por otro lado, es más fácil utilizar los resultados de los cálculos sobre la luz difusa en la síntesis estándar que en la directa. Esto lleva a la necesidad de los planteamientos de síntesis híbridos, para incorporar en los modelos semiglobales (síntesis directa) los resultados de los cálculos sobre la aportación difusa (síntesis estándar).

\subsubsection{Procesos de visualización}
\textquote{\textit{A la utilización conjunta de un método de síntesis y de un modelo de iluminación (que obviamente han de ser compatibles entre sí), se suele llamar \textbf{proceso de visualización}}} \citep{Ramos2011}.\vskip
Cada proceso de visualización constituye un área de especialización dentro de la Síntesis de Imágenes, debido principalmente a las diferencias existentes entre las técnicas utilizadas en los métodos de síntesis estándar y el directo.
Teniendo en cuenta los métodos de síntesis, los modelos de iluminación y las compatibilidades entre ellos, en la siguiente tabla se puede apreciar la estructuración actual de la Síntesis de Imágenes. 

\begin{tabular}{|p{4.5cm}|p{2.7cm}|p{2.7cm}|p{2.7cm}|}
\cline{2-4}
\multicolumn{1}{c}{}&\multicolumn{3}{|c|}{\textbf{Modelos de Iluminación}}\\
\hline
\centering\textbf{Métodos de Síntesis}  & \centering{Locales} & \centering{Semiglobales} & \centering{Globales} \tabularnewline
\hline
\centering{Síntesis Estándar}  & \centering{visualización estándar, rendering} & \centering{rendering (mejorado)} & \centering{radiosidad (radiosity)} \tabularnewline
\hline
\centering{Síntesis Directa}  & \centering{Ray Casting} & \centering{Ray Tracing} & \centering{-} \tabularnewline
\hline
\centering{Síntesis Híbrida}  & \centering{-} & \centering{-} & \centering{radiosidad (mejorado)} \tabularnewline
\hline
\end{tabular}

En ella aparecen los diferentes procesos de visualización (campos) de la Síntesis de Imágenes nombrados según la terminología de uso más frecuente en castellano.

\vskip
\begin{enumerate}
    \item \textbf{Rendering estándar}\vskip
    Es el proceso de visualización más difundido, ya que no requiere equipos demasiado potentes para conseguir, en un tiempo razonable, imágenes de calidad aceptable. Cuando el proceso incorpora técnicas de los modelos de iluminación semiglobales, usualmente se continua utilizando el mismo término, o bien simplemente se le añade el calificativo de “mejorado” (enhanced).
    
    \item \textbf{Ray Tracing}\vskip
    El \textbf{algoritmo trazador de rayos} en inglés \textit{ray tracing}, inicialmente era desechado debido al gran potencial de cálculo que requiere, lo que implicaba una gran lentitud en la generación de las imágenes. Sin embargo, a medida que iba aumentando la velocidad de las computadoras y mejorando las técnicas de aceleración del algoritmo, fue ganando adeptos principalmente por la gran calidad de imágenes que puede generar. Hoy en día, no existe prácticamente ningún sistema gráfico que no ofrezca la posibilidad de generar imágenes mediante este algoritmo. El algoritmo trazador de rayos es más rápido y fácil de implementar si se aplica un modelo local \textbf{ray casting} aunque, claro está, la calidad de las imágenes obtenidas es inferior.
    
    \item \textbf{Radiosity}\vskip
    Basándose en técnicas utilizas en la calorimetría, hacia finales de 1980 fueron desarrollados procesos para el cálculo de la aportación luminosa debida a la luz difusa. Con ello aparecieron los modelos globales y un nuevo campo de la Síntesis de Imágenes, conocido como algoritmo de radiosidad o \textit{radiosity}. Este algoritmo es uno de los más utilizados en la gráfica con resultados realistas debido a la gran calidad de las imágenes que sintetiza. En la figura \ref{fig:grafica7} se puede apreciar una comparación de resultados visuales.
\end{enumerate}

\begin{figure}[h]
\includegraphics[width=12cm]{Img/CPD/grafica7.png}
\centering
\caption{\textbf{\footnotesize{Comparación de procesos de visualiación: a la izquierda ray tracing, a la derecha ray tracing + radiosity}}}
\label{fig:grafica7}
\end{figure}


\subsubsection{Características comunes en los procesos de visualización}
Aunque las técnicas utilizadas en los procesos de visualización difieren de unos a otros, la filosofía en todos ellos es básicamente la misma. Son tres los objetivos principales de cualquier visualizador: 

\begin{itemize}
    \item Dependiendo de la posición del observador en el espacio vectorial 3D, se localizan los puntos que caen dentro de su campo de visión, buscando sus propiedades físicas.
    \item A continuación, se calcula de forma individual o colectiva la iluminación que llega a cada uno de ellos, dependiendo del método utilizado.
    \item Por último, se genera la imagen raster, discretizando la información que se tiene sobre los puntos visibles del espacio vectorial y sobre la luz que reciben

\end{itemize}



\subsection{Ray Tracing}

\subsubsection{Conceptos generales}
\label{section:ray-concept}

\textquote{\textit{Todos los rayos de luz que atraviesen la pantalla han de converger en el punto de visión (ojo), esto es conocido como \textbf{modelo de ventana}. 
Si se traza un rayo desde el punto de visión a cada píxel de la pantalla, y se prolongan dichos rayos hasta que intersequen con los objetos que se encuentren en su camino, entonces es posible averiguar con qué objetos intersecan y el color de las superficies donde intersecan. Si se pintan los píxeles correspondiente con el color de los puntos de intersección, se obtiene la imagen del objeto que se trata de visualizar}} \citep{Ramos2011} como se puede apreciar en la figura \ref{fig:ojo}. Los objetos visualizados son aquellos que se encuentran dentro del volumen de la pirámide, cuyas aristas pasan por los vértices de la ventana, y convergen en el punto de visión. En definitiva, el principio en el que se basa el algoritmo de ray tracing es el de trazar una línea entre el punto de visión y el espacio de objetos (modelos), a través de cada píxel de la pantalla. \vskip
En el modelo de ventana, si un fotón llega al ojo del observador, necesariamente ha tenido que cruzar la pantalla siguiendo la dirección del rayo.
Entonces, si se trazan exclusivamente los rayos de luz que parten del punto de visión, a través de los píxeles de la pantalla hacia el espacio vectorial (conocidos como rayos primarios), se asegura que el sistema gráfico trabaje únicamente con los rayos útiles. Cuando el trazado de rayos se realiza de esta forma, es conocido como \textbf{trazado hacia atrás}. 
Dado el ahorro de cálculos que implica el invertir el recorrido de los fotones, el trazado de rayos hacia atrás es el procedimiento utilizado. Por tanto, siempre que se trate de ray casting o ray tracing, ambos algoritmos efectúan el trazado hacia atrás. 


 \begin{figure}[h]
    \includegraphics[width=10cm]{Img/GEO/geo-ojo1.png}
    \centering
    \caption{\textbf{\footnotesize{trazado de rayos hacia atrás partiendo del punto de visión hacia el objeto}}}
    \label{fig:ojo}
    \end{figure}
    
Cualquiera que sea el método de visualización aplicado, el paso previo a la obtención de las imágenes es siempre el de colocar convenientemente los elementos del escenario (objetos, visor y fuentes) en un espacio de referencia
común, al que se llama \textbf{Sistema Universal de Referencia} \textbf{(SUR)}. Excepto las fuentes puntuales, normalmente los demás elementos del escenario poseen su propio sistema de referencia, siendo el \textbf{SRV} el \textbf{Sistema de Referencia del Visor}, y el \textbf{SRO} el \textbf{Sistema de Referencia de los Objetos}.
A menudo, las características del sistema de referencia general (SUR) y de los sistemas locales coinciden, aunque también es frecuente que la orientación del SRV sea opuesta a la del SUR. Por ejemplo, en la figura \ref{fig:grafica8} vemos un SUR con orientación hacia la izquierda, y un SRV con orientación hacia la derecha.

 \begin{figure}[h]
    \includegraphics[width=10cm]{Img/CPD/grafica8.png}
    \centering
    \caption{\textbf{\footnotesize{ sistemas de referencia ortogonales con orientación opuesta }}}
    \label{fig:grafica8}
    \end{figure}
    

    
\subsubsection{Explicación del algoritmo Ray tracing}

Los modelos de iluminación semiglobales, además de considerar la contribución de las fuentes de luz, también tienen en cuenta la luz reflejada y la transmitida procedente de los objetos circundantes. El algoritmo ray tracing se considera una generalización del algoritmo de ray casting y utiliza un modelo de iluminación semiglobal.
Así, en la versión típica del algoritmo de ray tracing, el color (intensidad) en un punto de intersección rayo-superficie cualquiera viene determinado por tres tipos de aportaciones lumínicas:
\begin{itemize}
    \item Por un lado está la contribución o \textbf{color local}, que se debe a la iluminación directa de las fuentes, y la luz ambiental. En definitiva, se trata de aplicar el modelo de iluminación local utilizado en ray casting.
    \item Por otro lado está la contribución o \textbf{color reflejado}, que consiste en la luz que llega al punto de intersección desde los objetos circundantes, siguiendo la trayectoria de reflexión de la luz.
    \item Por último, el algoritmo de ray tracing también cuenta con la aportación del \textbf{color transmitido}, que se debe la luz que llega al punto de intersección después de cruzar (traspasar) los objetos vecinos (si es que son transmisores de la luz), siguiendo la trayectoria de transmisión. 

\end{itemize}

En la figura \ref{fig:grafica9} se pueden apreciar las tres contribuciones en un punto de intersección rayo-superficie dado.

\begin{figure}[h]
    \includegraphics[width=8cm]{Img/CPD/grafica9.png}
    \centering
    \caption{\textbf{\footnotesize{ modelo de iluminación semiglobal utilizando ray tracing  }}}
    \label{fig:grafica9}
\end{figure}

\begin{description}
\item \textbf{P}: \ Punto de intersección rayo-superficie
\item \textbf{L}: \ Luz o iluminación
\item \textbf{Rr}: Rayo reflejado por la superficie
\item \textbf{Rt}: Rayo Transmitido a través de la superficie

\end{description}

\vspace{3mm}
\textbf{Definición del rayo: ecuación explícita o paramétrica}\vskip
Los parámetros que definen el rayo (recta) son los siguientes: 
$$R_0 = [X_0 , \ Y_0 , \ Z_0] \ \ punto \ de \ origen\ del \ rayo$$
$$R_d = [X_d , \ Y_d , \ Z_d] \ \ vector \ de \ dirección\ del \ rayo$$

Partiendo de las expresiones anteriores, se pueden expresar las coordenadas de cualquier punto $[x, \ y, \ z]$ de la recta $R (rayo)$, en función de $``t”$, como sigue: 

$$
   X_0 = X_0 + X_d.t
$$
$$
   Y_0 = Y_0 + Y_d.t
$$
\begin{equation}
   Z_0 = Z_0 + Z_d.t
\end{equation}

Dando distintos valores a $``t”$, se obtienen todos los puntos de la recta. Escribiendo en formato vectorial las expresiones anteriores, se obtiene la \textbf{ecuación explícita del rayo (recta)}, es decir: 
\begin{equation}
R(t) = R_0 + R_d.t \ \ siendo \ t>0 \ para \ el \ rayo
\label{eq:rayos}
\end{equation}

Es conveniente que el vector de dirección del rayo esté normalizado, es decir, que su módulo sea unitario ${x_d}^2 + {y_d}^2 + {z_d}^2 = 1$. De esta forma $``t”$ representa la distancia desde el origen del rayo, referida al sistema de coordenadas.

\textquote{\textit{En ray tracing es de suma importancia conocer las distancias entre el origen del rayo (punto de visión) y los objetos con los que interseca, ya que el punto de intersección que se encuentre más cerca del origen del rayo,
normalmente será el único visible por el observador}}  \citep{Ramos2011}.

\vspace{5mm}
\textbf{Trazado de los rayos y cálculo de las intersecciones}\vskip
A la hora de sintetizar la imagen de un objeto es obvio que los rayos de luz más importantes son los que proceden de las superficies de éstos. \textquote{\textit{Encontrar los puntos de procedencia de los fotones en las superficies de los objetos, no es otra cosa que averiguar los puntos de intersección entre los rayos de luz (rectas) y los objetos}} \citep{Ramos2011}.
Los métodos y algoritmos de cálculo de los puntos de intersección rayo-objeto dependen principalmente de las características geométricas de los objetos. Debido a esto, las figuras geométricas más importantes tienen su propio algoritmo de intersección. Por ejemplo, las esferas, cilindros, conos, toros, etc., disponen de un algoritmo de intersección apropiado, basado en la ecuación o ecuaciones que definen dichos objetos. Por otro lado, los trozos de superficies también poseen su algoritmo de intersección, dependiendo de cómo hayan sido matemáticamente definidos. Así, el algoritmo de intersección de un polígono difiere del utilizado con las superficies curvas, y dentro de éstas, los algoritmos de intersección varían según sea la naturaleza de dichas superficies.\vskip
Podría suponerse que cada objeto que se diseñe necesita su propio algoritmo de intersección. Si esto fuese cierto, los sistemas gráficos generales serían inviables dada la infinidad de objetos que es posible diseñar. Afortunadamente, la utilización de esquemas de modelado como el \textbf{CSG}\footnote{La Geometría constructiva de sólidos es un modelo de representación y visualización mediante objetos 3D en forma de árbol basado en primitivas gráficas y operaciones booleanas.} reducen el problema del cálculo de las intersecciones, al simple desarrollo e implementación de un conjunto limitado de algoritmos de intersección, tantos como primitivas diferentes (polígonos, supeficies, curvas, etc.) se utilicen en el modelado de los objetos.
Por otra parte, los algoritmos basados en la síntesis directa (ray casting y ray tracing) utilizan un gran porcentaje de su tiempo de cálculo (entorno al 95\%) en la búsqueda de los puntos de intersección rayo-objeto. Por tal motivo, es muy importante que el grado de eficiencia de los algoritmos de intersección sea lo mayor posible. A tal efecto, en el desarrollo de dichos algoritmos se buscan técnicas que minimicen el número de operaciones aritméticas, sobre todo las más costosas, como el cálculo de raíces, divisiones o multiplicaciones, reduciendo éstas, si es posible, a sumas, restas y comparaciones.

\vspace{5mm}
\textbf{Naturaleza Recursiva del algoritmo de Ray Tracing}\vskip
\textquote{\textit{En ray tracing, además de los \textbf{rayos primarios}, en cada
punto de intersección rayo-superficie son trazados otros dos rayos, el \textbf{rayo reflejado} y el \textbf{rayo transmitido}. El trazado de estos rayos dependerá de que el objeto intersecado sea reflectante y/o transmisor de la luz}} \citep{Ramos2011}. 

\begin{figure}[h]
    \includegraphics[width=10cm]{Img/CPD/grafica10.png}
    \centering
    \caption{\textbf{\footnotesize{ rayos reflejados y transmitidos en ray tracing  }}}
    \label{fig:grafica10}
\end{figure}

En la figura \ref{fig:grafica10} puede apreciarse el trazado del rayo reflejado y transmitido, en cada punto de intersección. En la misma figura puede verse que cada rayo primario trazado lleva asociado un árbol binario (árbol de rayos) como el mostrado a continuación en la figura \ref{fig:grafica11}

\begin{figure}[h]
    \includegraphics[width=8cm]{Img/CPD/grafica11.png}
    \centering
    \caption{\textbf{\footnotesize{  árbol binario asociado a cada rayo primario  }}}
    \label{fig:grafica11}
\end{figure}

A la vista del árbol anterior es fácil comprender la naturaleza recursiva del algoritmo de ray tracing. Por la descripción gráfica que acabamos de ver del algoritmo, los pasos a dar para su desarrollo son:
\begin{enumerate}
    \item Primero se traza el rayo primario, es decir, se debe calcular el rayo procedente del ojo que pasa a través de un píxel dado, buscando la intersección más cercana con los objetos del escenario. Este proceso es similar en algoritmo de Ray Casting.
\item Una vez encontrado el punto de intersección, para averiguar el \textbf{color global} (final) del rayo primario (y del píxel), se calcula primero la contribución local en el punto de intersección. Para ello es preciso conocer, entre otros datos, qué fuentes aportan luz, y cuales no. Esto se consigue trazando \textbf{rayos de sombra} (Rs) desde el punto de intersección hacia cada una de las fuentes de luz, evaluando la contribución de cada fuente en función de sus características y de otros objetos interpuestos (si los hay) en la trayectoria del correspondiente rayo de sombra. En la figura \ref{fig:grafica12a} se pueden apreciar dos ejemplos.
\begin{figure}[h]
    \includegraphics[width=9cm]{Img/CPD/grafica12a.png}
    \centering
    \caption{\textbf{\footnotesize{  rayos de sombra para evaluar la \textit{contribución local} en un píxel   }}}
    \label{fig:grafica12a}
\end{figure}
\item Cuando la superficie presenta reflexión (que es lo más frecuente), se calcula la trayectoria del rayo reflejado con respecto al \textbf{vector normal} a la superficie en el punto de intersección. En el cálculo de esta trayectoria normalmente se supone que el objeto (superficie) es un \textbf{reflector perfecto}.

\item De la misma forma, si el objeto es transmisor de la luz, se calcula la trayectoria del rayo transmitido hacia el interior del objeto, determinando el ángulo de refracción por la ley de Snell\footnote{\url{https://es.wikipedia.org/wiki/Ley_de_Snell}}.
\end{enumerate}

\begin{figure}[h]
    \includegraphics[width=6cm]{Img/CPD/grafica12.png}
    \centering
    \caption{\textbf{\footnotesize{  trazado de los rayos reflejado y transmitido   }}}
    \label{fig:grafica12}
\end{figure}


Puesto que en el algoritmo de ray tracing los rayos normalmente se trazan hacia atrás, a continuación se sigue la pista del rayo reflejado (o bien la del transmitido), para encontrar los respectivos puntos de procedencia
de la luz, es decir, los puntos de intersección (más cercanos) con los objetos del escenario. Localizados éstos, de nuevo se generan rayos de sombra (para calcular la contribución local), de transmisión (para hallar la contribución transmitida) y de reflexión (para la contribución reflejada), todos ellos con origen en los puntos de intersección recién encontrados. Como se puede observar, algorítmicamente se vuelve a una situación similar a la del punto de
partida (aunque no igual), lo que se aconseja es una implantación recursiva del proceso de trazado de los rayos. 

\vskip

Se analiza este proceso a través del ejemplo de la figura \ref{fig:grafica13}. Se puede ver un escenario con planos y esferas, todos con un cierto grado de transparencia y reflexión. Siendo $E$ un rayo primario que interseca con la superficie $3$, primero se calcula la luz procedente de las fuentes generando los rayos de sombra $S1$ y $S2$; como se aprecia en la figura, el rayo $S2$ está bloqueado por el esferoide $4$, que al ser opaca anula el efecto de la fuente de luz $Lb$. Además, como la superficie $3$ es conductora de la luz, se ha de trazar el rayo transmitido $T1$.\vskip
Puesto que la superficie es al mismo tiempo reflectora, también se debe trazar el rayo reflejado $R1$. De modo similar se irían generando y evaluando el resto de los rayos, para poder determinar finalmente el color del rayo $E$. 

\begin{figure}[h]
    \includegraphics[width=12cm]{Img/CPD/grafica13.png}
    \centering
    \caption{\textbf{\footnotesize{Proceso de ray tracing  en un escenario con planos y esferas con cierto grado de transparencia y reflexión. }}}
    \label{fig:grafica13}
\end{figure}

La figura \ref{fig:grafica14} muestra el árbol de rayos correspondiente al ejemplo anterior.
La raíz del árbol representa el rayo primario procedente del ojo, y cada uno de los nodos es una intersección con un objeto. De cada nodo salen por un lado los rayos de sombra, y por otro los rayos reflejados y transmitidos, en el caso de que los objetos sean reflexores y transmisores, respectivamente.

\begin{figure}[h]
    \includegraphics[width=8cm]{Img/CPD/grafica14.png}
    \centering
    \caption{\textbf{\footnotesize{   árbol de rayos del ejemplo }}}
    \label{fig:grafica14}
\end{figure}

\vspace{5mm}
\textbf{Contribución de los diferentes rayos al color global}\vskip
A la hora de calcular el color global se debe considerar que no todos los rayos generados influyen en la misma proporción. Por ejemplo, la luz que llega directamente de una fuente, normalmente es bastante más intensa que la que llega a través de una trayectoria de reflexión, tras efectuar varias intersecciones.\vskip
Cuanto más abajo sea el nivel de un rayo (en el árbol de rayos), menor será su influencia a la hora de determinar el color final de un píxel.\vskip
En el momento de trazar, una cuestión que se plantea es cuándo se ha de dar por finalizado el proceso de generación del árbol de rayos. Por lo común, a parte de las limitaciones de memoria y de potencia de cálculo que imponga el sistema donde se realice el trazado, el avance de un rayo se dará por finalizado cuando no interseque con ningún objeto (y salga del escenario), o bien cuando su contribución al color final sea nula, situación que normalmente quedará establecida por el nivel en el árbol de los rayos trazados.\vskip
Así, todo rayo cuyo nivel dentro del árbol de rayos sea inferior a cierto nivel establecido será desestimado, ya que su contribución al color global se presupone ínfima. Por ejemplo, en el caso anterior, si se fija en $1$ la profundidad límite, el árbol de rayos resultante sería el de la figura \ref{fig:grafica15}; en él se aprecia que sólo se consideran hasta tres intersecciones para cada rayo generado. 

\begin{figure}[h]
    \includegraphics[width=6cm]{Img/CPD/grafica15.png}
    \centering
    \caption{\textbf{\footnotesize{ árbol de rayos con profundidad 1  }}}
    \label{fig:grafica15}
\end{figure}


La evaluación del árbol de rayos se realiza desde los nodos hoja hacia la raíz, acumulando las sucesivas aportaciones parciales, a modo de ``afluentes de luz”. Por tanto, la intensidad de un determinado nodo se calcula a partir de la intensidad de sus nodos hijos.\vskip
El pseudocódigo de una versión pedagógica (no optimizada, ni completa) del algoritmo trazador de rayos (TR) sería: 

\begin{minted}[baselinestretch=1, bgcolor=LightGray, linenos]{cpp} 

 color TR(VECTOR inicio_rayo, VECTOR dir_rayo, int profundidad)
{
define PROFUNDIDAD_MAX 4
define COLOR_FONDO AZUL
VECTOR pto_interseccion, dir_reflexion, dir_transmision;
COLOR color_local, color_reflexion, color_transmision;
//Se verifica si el rayo ha alcanzado la profundidad máx.
if(profundidad > PROFUNDIDAD_MAX)
return(negro);
else
{ //Se busca el punto de intersección rayo-superficie
pto_interseccion = hallar_interseccion(inicio_rayo, dir_rayo);
//Si no hay intersección se devuelve el color de fondo
if(pto_interseccion == 0)
return(COLOR_FONDO)
else
{
/* Se calcula la contribución local en el punto de intersección.

NOTA: Los argumentos requeridos no se especifican */
color_local = contribucion_local();
// ***Se calcula la contribución reflejada***
/* Primero se averigua la dirección en el espacio del rayo
reflejado. No se especifican los argumentos */
dir_reflexion = direccion_reflexion();
/* A continuación se llama recursivamente al proceso TR, para
calcular la contribución del rayo reflejado */
color_reflexion = TR(pto_interseccion, dir_reflexion, profundidad
+ 1);
// ***Se calcula la contribución transmitida***
/* Primero se averigua la dirección en el espacio del rayo
transmitido. No se especifican los argumentos */
dir_transmision = direccion_transmision();
/* A continuación se llama recursivamente al proceso TR, para 
calcular la contribución del rayo transmitido */
color_transmision = TR(pto_interseccion, dir_transmision,
profundidad + 1);
/* Finalmente se calcula el color global, resultante de la
suma de las tres contribuciones anteriores. A cada contribución se 
le asocia un peso, y así poder controlar el resultado final */
return(combinar_colores(color_local, peso_cl, color_reflexion,
peso_cr, color_transmision, peso_ct)); }//Final, si hay intersección
}//Final, si no se sobrepasa la profundidad máxima.
}//Final del proceso TR. 

\end{minted}

\subsubsection{Aliasing y antialiasing }
Al traspasar a un espacio discreto (discretizar) un modelo definido en un espacio continuo n-dimensional, inevitablemente \textit{``se pierde''} información sobre el modelo, debido a la diferencia de puntos utilizados en la definición de los modelos en ambos espacios. Cuanta más información visual del modelo se pueda transferir hacia el espacio discreto, mayor será la calidad de la imagen obtenida. \vskip
Por otro lado, cuando se discretiza el movimiento continuo de los objetos, también se produce pérdida de información, ya que no es posible registrar todas las ``instantáneas'' (frames) que constituyen el movimiento continuo.\vskip
\textquote{\textit{A la pérdida de información espacial se conoce como \textbf{aliasing espacial}, y a las discontinuidades del movimiento (pérdida de información) que pueden aparecer en las animaciones de los objetos, se asocian (o se deben) al \textbf{aliasing temporal}}} \citep{Ramos2011}. 

\begin{enumerate}
    \item \textbf{Aliasing espacial} \vskip
    Cuando se traza un rayo primario a través de un píxel hacia el escenario, se obtiene una muestra en inglés \textit{sample} del modelo, si es que el rayo interseca con éste. Entonces, si se pinta el píxel con el color de la muestra, se asigna las características de la muestra a un trozo de superficie del modelo, cuya área será igual a la proyección en paralelo del píxel sobre la superficie del modelo. Ver figura \ref{fig:grafica16}
    
    \begin{figure}[h]
    \includegraphics[width=9cm]{Img/CPD/grafica16.png}
    \centering
    \caption{\textbf{\footnotesize{  muestra del modelo  }}}
    \label{fig:grafica16}
    \end{figure}
    
    Sin embargo, como ocurre en el ejemplo, la superficie del modelo correspondiente a la proyección del píxel \textbf{puede tener otros puntos con características diferentes al de la muestra}, por lo que se estaría produciendo una pérdida de información (aliasing) en la imagen sintetizada. \vskip
    
    \vspace{5mm}
    \textbf{Efectos más comunes del aliasing}\vskip
    A continuación se ven, a modo de resumen, algunas de las principales consecuencias sobre la calidad de las imágenes, que se producen a causa de la pérdida de información. 
    
    \begin{itemize}
        \item La figura \ref{fig:grafica17} muestra la manifestación más usual del aliasing, que consiste en que las líneas curvas (y los perfiles en general) se transforman en curvas dentadas debido a la geometría rectangular de los píxeles. Este efecto es menor cuanto mayor sea la resolución del dispositivo gráfico. También se aprecia menos cuando la iluminación del fondo y de la imagen es la misma, pero el color es diferente, dado que entonces el ojo es más sensible a la diferencia de luminosidad, que a la diferencia de color. El dentado depende también del grado de orientación de la curva. Como se ve en esta figura, el dentado es mucho mayor que el arriba al tratarse de una curva más plana.  
        \begin{figure}[h]
        \includegraphics[width=8cm]{Img/CPD/grafica17.png}
        \centering
        \caption{\textbf{\footnotesize{ Aliasing sobre curvas y perfiles. El aliasing de las curvas también depende de su orientación  }}}
        \label{fig:grafica17}
        \end{figure}
    
        \item Otro de los efectos del aliasing consiste en la no apreciación de objetos
        cuya superficie sea menor que un píxel; también puede darse el caso de la existencia de objetos mayores que un píxel, pero estrechos, de modo que su aparición en la imagen dependerá de su ubicación con respecto a los puntos de muestreo.

        \begin{figure}[h]
        \includegraphics[width=6cm]{Img/CPD/grafica18.png}
        \centering
        \caption{\textbf{\footnotesize{ información no accesible al muestreo   }}}
        \label{fig:grafica18}
        \end{figure}
        
        En la figura \ref{fig:grafica18} se puede ver que dos objetos iguales A y B correrán distinta suerte durante el trazado, puesto que el objeto A tendrá representación en la imagen, ya que coincide con uno de los puntos de muestreo, mientras que el objeto B no aparecerá en la imagen, al no ser muestreado.\vskip
        Algo similar sucede con los objetos C y D pues, aunque su tamaño sea mayor que un píxel, ninguna de las muestras alcanza al objeto D, por lo que no será detectado, al contrario del C, que sí figurará en la imagen trazada, aunque con una calidad dudosa, como se ve a continuación. 
        
        \item Otro efecto común del aliasing es el de la``rotura" de los objetos, que depende de su orientación respecto a la matriz de muestreo (plano visual), es decir, dependiendo del número de puntos de muestreo que inciden sobre un objeto, un factor que varía según sea la posición del objeto, con respecto a la matriz de píxeles. 
        
        \begin{figure}[h]
        \includegraphics[width=8cm]{Img/CPD/grafica19.png}
        \centering
        \caption{\textbf{\footnotesize{rotura de los objetos }}}
        \label{fig:grafica19}
        \end{figure}
        
        En esta Figura  \ref{fig:grafica19}, A y B son de nuevo un ejemplo de objetos cuya aparición en la imagen dependerá de su posición en el plano visual. Por otra parte, el objeto C queda suficientemente representado pues coincide con suficientes puntos de muestreo, mientras que el objeto D quedaría \textit{roto} a causa de que los puntos de muestreo que coinciden con él están en dos columnas diferentes de la matriz de muestreo, por lo que quedará representado por píxeles que están en diferentes columnas, con lo cual el objeto parecerá roto o fragmentado. Como se puede apreciar, este problema está muy relacionado con los anteriores. 
    \end{itemize}
    
    \item \textbf{Antialiasing espacial } \vskip
    Aunque el aliasing no se puede evitar completamente, sin embargo es posible reducir sus efectos visuales hasta lograr calidad fotorrealista si\vskip
    \begin{description}
    \item \textbf{a)} Se considera a la superficie de los píxeles como trozos de espacio continuo, y no como puntos discretos.
    \item \textbf{b)} Si en vez de trazar una sola muestra por píxel, se toman varias, es decir, se trazan varios rayos por píxel.
    \end{description}
     \vskip
    
    
    En ray tracing, las técnicas principales que disminuyen el aliasing son: 
    \begin{itemize}
        \item \textbf{Sobremuestreo} (supersampling) \vskip
        Si en vez de trazar una sola muestra por píxel, se toman varias, es decir, se trazan varios rayos por píxel.\vskip
        El mayor problema que presenta esta técnica es que el número de
        cálculos necesarios para obtener una imagen se multiplicaría por n, siendo n el total de rayos trazados por cada píxel, aunque el proceso puede optimizarse haciendo que los píxeles contiguos compartan una misma muestra. Por ejemplo, en la figura \ref{fig:grafica20} se puede ver cómo trazando sólo 25 rayos es posible muestrear una matriz de 16 píxeles, trazando 4 rayos por cada píxel, por lo que en teoría deberían ser 64 los rayos trazados. 
        
         \begin{figure}[h]
        \includegraphics[width=6cm]{Img/CPD/grafica20.png}
        \centering
        \caption{\textbf{\footnotesize{ sobremuestreo optimizado  }}}
        \label{fig:grafica20}
        \end{figure}
        
    \item \textbf{Sobremuestreo adaptativo} (adaptative supersampling)\vskip
    Como en el caso anterior, esta técnica traza múltiples rayos por cada píxel, aunque en esta ocasión quedarán distribuidos de modo irregular, basándose en el principio de \textbf{trazar más rayos donde más se necesiten}.\vskip
    En efecto, no siempre es necesario lanzar un número constante de rayos para conseguir paliar los efectos del aliasing; los objetos del escenario suelen tener superficies homogéneas donde no es necesario trazar rayos extra, mientras que en otros lugares se hace preciso tomar un mayor número de muestras.\vskip
    En el \textbf{sobremuestreo adaptativo} primero se traza un número establecido de rayos. Seguidamente se analiza en qué zonas es necesario trazar más rayos (aquellas, p. ej., donde el color de las muestras difiera). Una vez determinadas las zonas heterogéneas, se procede a lanzar más rayos allí donde sean necesarios.\vskip
    En realidad el sobremuestreo y el sobremuestreo adaptativo, por lo general se utilizan conjuntamente, por lo que se trata de un planteamiento híbrido. Así, en el ejemplo de la figura \ref{fig:grafica20}, si al efectuar el sobremuestreo de de 4 rayos en un píxel dado resulta que el color de cada uno de los rayos es diferente, entonces se ha de subdividir la superficie del píxel en 4 trozos, y a continuación se ha de volver a realizar el sobremuestreo en cada subdivisión. También habría que efectuar esta operación en el caso de que los sondeos (muestras) fuesen incapaces de detectar objetos de menor tamaño que la superficie del píxel (o del subpíxel). En definitiva, el proceso de subdivisión debería continuarse hasta que no se produjese ninguna de las situaciones anteriores. 
    \end{itemize}
    
    \item \textbf{Sobremuestreo estocástico}\vskip
    Los métodos anteriores se basaban en dividir el píxel tratado en varias partes, y en cada una de ellas trazar un rayo. Sin embargo, en muchas ocasiones hay zonas tan finas que no son captadas por las sucesivas subdivisiones del píxel, ya que siempre (y en todos los píxeles) se utiliza la misma trama de división. Con el \textbf{sobremuestreo estocástico} también se lanzan múltiples rayos, aunque en esta ocasión son trazados aleatoriamente de forma que se cubra todo el píxel, pero no siempre con la misma trama.\vskip
    Con esta técnica, además de minimizar los problemas de los planteamientos anteriores, se pueden conseguir efectos ópticos, como la profundidad de campo y penumbras. Sin embargo se plantea el problema del \textbf{ruido}. Así, puede ocurrir que un píxel no tome su color correcto debido a la naturaleza aleatoria del proceso. De todos modos, por ser aleatorio, el ruido pasa más desapercibido al ojo humano que los problemas que plantean con otras técnicas, por lo que el sobremuestreo estocástico es una buena solución contra el aliasing, obteniéndose buenos resultados 
    
    \item \textbf{Sobremuestreo estadístico}\vskip
    En el \textbf{sobremuestreo estadístico} se intenta determinar el número de rayos necesarios, a partir de estimaciones obtenidas de muestras trazadas previamente. Por ejemplo, después de trazar cuatro rayos distribuidos regularmente en un píxel, los colores de las cuatro muestras han de pasar unos tests estadísticos que calculan en qué medida la estimación del color real del píxel es aceptable. Si la estimación es buena, se deja ese color; de lo contrario, se deberán lanzar más rayos, y volver a ejecutar las pruebas.\vskip
    Los parámetros de referencia que utilizan los tests estadísticos para saber si una estimación es buena o no, pueden ser modificados convenientemente, según interese una imagen de alta calidad o una imagen de menor calidad, pero obtenida con mayor rapidez. 
    
\end{enumerate}


El problema principal del algoritmo trazador de rayos es su velocidad, ya que para generar una imagen puede emplear una enorme cantidad de tiempo. Básicamente, esto se debe a que para cada rayo trazado se ha de probar si interseca con cada objeto presente en el escenario. Las principales técnicas de aceleración intentan minimizar el tiempo empleado en la búsqueda de puntos de intersección, aunque este no es el único criterio de aceleración utilizado. Muchos de estos procesos dependen de la tecnología de hardware utilizada (tarjetas de vídeo, monitores) tanto en los procesos de cálculos geométricos como los de rasterización.


Con lo visto en esta sección sobre la Síntesis de Imágenes, es suficiente para tener una idea global sobre este campo de la IG. Si bien en la actualidad se utilizan implementaciones de Radiosity y algoritmos de Pathtracing\footnote{\url{http://madebyevan.com/webgl-path-tracing/}} para generar resultados fotorrealistas\footnote{El fotorrealismo es la cualidad de una imagen generada por computadora que trata de imitar las imágenes generadas por cámaras fotográficas}, en el contexto de este trabajo de investigación se hace se enfoca en la visualización utilizando \textbf{Ray Tracing} ya que los objetivos de calidad de imágenes para el prototipo son suficientes con este método. A continuación se puede ver una panorámica general del otro campo que se analiza a lo largo de este trabajo: el \textbf{Modelado Geométrico}.


\clearpage
\section{Modelado Geométrico}

Los modelos son útiles porque permiten hacer estudios sobre objetos que de otra forma sería difícil realizar, ya sea porque aún no existen (no se han fabricado), o por que no son observables directamente (ej. moléculas). Sin embargo, los modelos físicos y matemáticos están limitados al ámbito de su utilidad, de forma que para analizar un nuevo problema normalmente se requiere un nuevo modelo. Se ha intentado solventar este inconveniente dando a los modelos un carácter de generalidad. Tradicionalmente fué el dibujo técnico quien tuvo mayor éxito como técnica de propósito general para describir modelos, ya que los planos se pueden utilizar para extraer información de diversas clases, incluyendo los datos para la formación de modelos físicos y matemáticos.
Sin embargo, con la llegada de los sistemas informáticos el dibujo técnico \footnote{Dibujo geométrico y a escala con fines técnicos o para aplicaciones técnicas.} fué desplazado por los \textbf{modelos informáticos}, que gracias a su dinamismo y universalidad superan con creces a cualquier otro tipo de modelado.\vskip

Los modelos informáticos se sirven de la enorme potencia de procesamiento de las computadoras para realizar tareas similares a las que podrían hacerse con los modelos tradicionales, pero aprovechando sus ventajas y evitando inconvenientes. Mediante técnicas y algoritmos desarrollados formalmente, es decir, con una base matemática sólida, se consiguen sistemas de modelado de propósito general que soportan una gran variedad de modelos diferentes, de igual manera que el dibujo técnico.\vskip

La cantidad total de datos que se deben almacenar en un modelo informático, depende del ámbito de las preguntas que algorítmicamente queramos responder a partir del modelo.
Muchos de los problemas a resolver mediante los modelos tienen naturaleza geométrica.
Por ejemplo, el problema de hallar la imagen coloreada de un objeto incluye cuestiones geométricas tales como:
\begin{description}
    \item a) ¿Qué partes del objeto son visibles para el observador?
    \item b) ¿Qué color se debe asignar a cada punto de la imagen?
\end{description}


Si se puede representar en la computadora la forma geométrica de un objeto, se pueden responder a estas preguntas y a muchas otras. De hecho, la información geométrica sobre un objeto es la parte más útil del total de información sobre el objeto. Además, las técnicas para almacenar y procesar la información geométrica son relativamente independientes de un modelo particular. Así, procesos esencialmente iguales de modelado se utilizan en la construcción de modelos de barcos, casas, o zapatos.
Acorde con lo dicho, en un modelo tiene sentido separar la información geométrica de los objetos, de la no geométrica. Bajo este planteamiento, \textquote{\textit{al total de información del modelo informático se conoce como \textbf{modelo del objeto}, mientras que la información exclusivamente geométrica constituye el \textbf{modelo geométrico}}} \citep{Ramos2011}.\vskip

Por lo tanto, el concepto de \textquote{\textit{{\textbf{Modelado Geométrico}} se refiere al conjunto de métodos utilizados para definir la forma y otras características de los objetos}} \citep{Ramos2011}. La construcción de los objetos es normalmente, en si misma, una operación asistida por ordenador. Éstos juegan un papel primordial, ya que sin su potencia de cálculo los procedimientos del Modelado Geométrico solamente podrían aplicarse en modelos de escasa importancia práctica.
Los métodos del Modelado Geométrico son un compendio de las técnicas utilizadas en varias disciplinas, como la Geometría Analítica y Descriptiva, la Topología, la Teoría de Conjuntos, el Análisis Numérico, las Estructuras de Datos, el Cálculo Vectorial y los Métodos Matriciales.\vskip
Se pueden enumerar tres aplicaciones básicas del Modelado Geométrico: 

\begin{itemize}
  \item \textbf{Representación} de los objetos existentes.
  \item \textbf{Diseño} de los objetos inexistentes y
  \item \textbf{Visualización} (rendering) de los objetos.
\end{itemize}
\vskip

El CAD y el CAM, han sido las principales fuerzas de desarrollo del campo del Modelado Geométrico, aunque otras áreas como la Robótica, Reconocimiento de Formas, Inteligencia Artificial, y el Cálculo Estructural (modelos de elementos finitos) han contribuido también ha su desarrollo.

\subsection{Transformaciones geométricas }

\textquote{\textit{El conjunto de operaciones elementales que realiza internamente una computadora para conseguir pasar de la \textbf{representación de un modelo geométrico} tridimensional a su imagen en pantalla 2D, pero que para la impresión del observador parezca estar contemplando un sistema de visualización en el mundo real con tres dimensiones 3D, utiliza las transformadas geométricas.}} \citep{villamarin2015}

Existen varias transformadas o transformaciones geométricas, sin embargo en este trabajo se revisan matemáticamente el escalamiento, la translación y la rotación.

\subsubsection{Representación}

\textquote{\textit{En el área de la \textbf{graficación por computadora} \footnote{Es el campo de la informática visual donde se utilizan computadoras tanto para generar como para manipular imágenes}, es común encontrar la representación de las ecuaciones de trasformación por medio de matrices}} \citep{Matias2007}, y se pueden encontrar dos tipos de notaciones para representarlas, una es representando las coordenadas de un punto $p$ como \textbf{vectores renglón}, en este caso una matriz de transformación $M$ en 2D, multiplica al punto por la derecha para obtener el nuevo punto $p^\prime$. 

\begin{equation}
   p = \begin{bmatrix}
       x & y         
     \end{bmatrix}, \ p^{\prime} = \begin{bmatrix}
       x & y         
     \end{bmatrix}= p.M  
\end{equation} 
     
La segunda notación es representando las coordenadas de un punto \textit{p} como \textit{vectores columna}, en este caso una matriz de transformación \textit{M}, multiplica al punto por la izquierda para obtener el nuevo punto $p^{\prime}$.
\begin{equation}
     p = \begin{bmatrix}
       x \\ y         
     \end{bmatrix}, \ p^{\prime} = \begin{bmatrix}
       x \\ y           
     \end{bmatrix}= p.M 
\end{equation}
     
En este trabajo de investigación, se representan los puntos por medio de \textbf{vectores renglón}, por lo tanto las matrices de transformación estarán modeladas para multiplicarlas por la derecha, sin embargo se puede obtener una matriz de transformación en la otra notación calculando su transpuesta.
No todas las transformaciones son aplicadas a un punto como una multiplicación de factores, por tal razón se utilizan las \textit{coordenadas homogéneas} para la representación matricial, y de esta forma todas las transformaciones son tratadas como multiplicaciones.
En coordenadas homogéneas, a cada punto 2D se le agrega una tercera coordenada, de esta forma, en lugar de representar los puntos como $p = (x,\ y) $  son representados como la terna $p = (x,\ y,\ \omega)$ , al mismo tiempo se dice que un par de coordenadas homogéneas $ (x,\y) $ y $(x,\ y,\ \omega)$ representan el mismo punto si una es múltiplo de la otra. Por ejemplo, la terna (4, -2, 6) y (8, -4, 12) representan el mismo punto 2D pero en diferentes coordenadas triples, esto significa que cada punto tiene un sinfín de representaciones en coordenadas homogéneas.\vskip
Al menos una de las coordenadas homogéneas tiene que ser distinta de cero, por lo tanto la terna (0, 0, 0) no es válida. Si la coordenada $\omega \neq 0$, la terna $(x,\ y,\ \omega)$ se puede dividir entre $\omega$ y se obtiene $(x/\omega,\ y/\omega,\ 1)$ , cuando se realiza esta división, a los valores $x/ \omega$ y  $y/ \omega$  se les llama \textit{coordenadas cartesianas} del punto homogéneo. Una
elección conveniente es hacer el valor de
$\omega = 1$, así cada posición 2D es representada con las coordenadas homogéneas $(x/\omega,\ y/\omega,\ 1)$. \vskip
En general para cualquier dimensión las coordenadas homogéneas de un punto \textit{p} en \textit{n}D se escribe como $p = (x,\ y,...,x,\omega)$, el cuál es un vector de longitud \textit{n}+1.


\subsubsection{Extensión de las Transformaciones a Otras Dimensiones}
Las trasformaciones geométricas 3D son extensiones de las transformaciones geométricas 2D, pero con la incorporación del eje Z. Muchas de las operaciones matemáticas utilizadas en las transformaciones de escalamiento y translación se extienden fácilmente, pero la rotación no es tan intuitiva y requiere de un poco más de análisis, para comprender su generalización a otras dimensiones y facilitar su comprensión se explica más adelante la rotación 2D.

\clearpage
\subsubsection{Escalamiento 3D}
\textquote{\textit{El escalamiento permite cambiar el tamaño de un objeto expandiéndolo o contrayéndolo en sus dimensiones }} \citep{Matias2007}.
El \textbf{escalamiento 3D} implica el cambio de tamaño de un poliedro\footnote{Un poliedro es un cuerpo geométrico cuyas caras son planas y encierran un volumen finito}, donde cada punto $p = (x,\ y,\ z)$ es transformado por la multiplicación de tres factores de escalamiento: $s_{x}, s_{y}$ y $s_{z}$ a lo largo de los ejes $X,\ Y,\ Z$ respectivamente, de esta forma, las coordenadas del nuevo punto $p^{\prime} = ({x}^{ \prime},\ {y}^{ \prime},\ {z}^{ \prime})$ se obtienen como:

$${x}^{\prime} = x.s_{x}$$
$${y}^{\prime} = y.s_{y}$$
$${z}^{\prime} = z.s_{z}$$

Sea $s = (s_{x},\ s_{y},\ s_{z})$ el vector de factores de escalamiento, y $S(s)$ la matriz de
escalamiento, en coordenadas homogéneas el escalamiento de un punto $p$ en 3D se puede expresar como el producto matricial
$p^{\prime} = p.S(s)$ , es decir:

\begin{equation}
\begin{array}{rccl}
\left[
\begin{array}{rccl}
{x}^{\prime} & {y}^{\prime} & {z}^{\prime} & 1\\
\end{array}
\right]
\end{array}
=
\begin{array}{rccl}
\left[
\begin{array}{rccl}
x & y & z & 1\\
\end{array}
\right]
\end{array} 
.
\left[
\begin{array}{rccl}
s_{x} & 0 & 0 & 0\\
0 & s_{y} & 0 & 0\\
0 & 0 & s_{z} & 0\\
0 & 0 & 0 & 1\\
\end{array}
\right]   
\end{equation}


\begin{center}
\textbf{\footnotesize{Expresión matricial para el escalamiento 3D.}}
\end{center}


\begin{center}
\begin{figure}[h]
\includegraphics[width=12cm]{Img/GEO/geo-escala0.jpg}
\centering
\caption{\textbf{\footnotesize{Efecto de escalamiento de una figura con $s_x=2$, $s_y=2.5$ y $s_z=1.5$}}}
\end{figure}
\end{center}

\clearpage
\subsubsection{Traslación 3D}
\textquote{\textit{La translación permite desplazar un objeto a lo largo de sus dimensiones, como resultado se obtiene un cambio de posición}} \citep{Matias2007}. La \textbf{translación 3D} implica el desplazamiento de un poliedro, donde cada punto $p = (x,\ y,\ z)$ es trasladado $d_x$ unidades en el eje $X$ , $d_y$ unidades en el eje $Y$ y $d_z$ unidades en el eje $Z$, de esta forma, las coordenadas del nuevo punto
$p^{\prime} = ({x}^{\prime}, \ {y}^{\prime}, \ {z}^{\prime})$ se obtienen como:

$${x}^{\prime} = x + d_x$$
$${y}^{\prime} = y + d_y$$
$${z}^{\prime} = z + d_z$$

Sea $d = (d_{x},\ d_{y},\ d_{z})$ el vector de distancias, y $T(d)$ la matriz de translación, en
coordenadas homogéneas la translación de un punto $p$ en 3D se puede expresar como el producto matricial $p^{\prime} = p + T(d)$ , es decir:

\begin{equation}
\begin{array}{rccl}
\left[
\begin{array}{rccl}
{x}^{\prime} & {y}^{\prime} & {z}^{\prime} & 1\\
\end{array}
\right]
\end{array}
=
\begin{array}{rccl}
\left[
\begin{array}{rccl}
x_{1} & x_{2} & x_{3} & 1\\
\end{array}
\right]
\end{array} 
\cdot
\left[
\begin{array}{rccl}
1 & 0 & 0 & 0\\
0 & 1 & 0 & 0\\
0 & 0 & 1 & 0\\
d_{x} & d_{y} & d_{z} & 1\\
\end{array}
\right]
\end{equation}

\begin{center}
\textbf{\footnotesize{Expresión matricial para la traslación 3D.}}
\end{center}

\begin{center}
\begin{figure}[h]
\includegraphics[width=12cm]{Img/GEO/geo-traslacion0.jpg}
\centering
\caption{\textbf{\footnotesize{efecto de translación de una figura con $d_x=2$, $d_y=0$ y $d_z=2$}}}
\end{figure}
\end{center}

\clearpage
\subsubsection{Rotación 2D}
\textquote{\textit{La rotación permite girar un objeto sobre un eje de rotación, dado un valor de ángulo de rotación $\theta$ y su dirección}} \citep{Matias2007}. La rotación de un objeto en 2D se lleva a cabo alrededor de un punto, que es el eje puntual (cero-dimensional) de rotación.\vskip
Para generar una rotación, se especifica el ángulo de rotación , y el punto de rotación $\theta$ (pivote) sobre el cuál el objeto será rotado. Los ángulos de rotación positivos definen una rotación en sentido contrario a las agujas del reloj o sentido antihorario sobre el punto pivote (del eje $X$ al eje $Y$), entonces los ángulos de rotación negativos producen una rotación en el sentido de las agujas del reloj o sentido horario (del eje $Y$ al eje $X$). La rotación 2D es el giro sobre el eje de rotación que es perpendicular al plano $XY$ (mejor conocido como plano XY) y que pasa a través del punto pivote.\vskip
Si el punto pivote se encuentra sobre el origen, se tiene que: $r$ es la distancia del punto $p = (x, \ y)$ al origen, $\phi$ define la posición angular del punto p desde la horizontal, y θ el ángulo de rotación de $p$ para producir el nuevo punto $p^{\prime} = ({x}^{\prime},\ {y}^{\prime})$

\begin{center}
\begin{figure}[h]
\includegraphics[width=8cm]{Img/GEO/geo-rot2d.jpg}
\centering
\caption{\textbf{\footnotesize{Rotación de un punto en 2D alrededor del origen.}}}
\end{figure}
\end{center}

Utilizando coordenadas polares, el punto $p = (x, \ y)$ se puede escribir como $p = (r, \ \phi)$ y el punto $p^{\prime} = ({x}^{\prime},\ {y}^{\prime})$ como $p^{\prime} = (r, \ \phi + \theta)$. Pasando después estos puntos de coordenadas polares a rectangulares se tiene que:


$$
\begin{array}{rccl}
\begin{array}{l@{}l}
x = r \cos(\phi) \\
{x}^{\prime} = r \cos(\phi + \theta)
\end{array}
\end{array}
\ \ \ 
\begin{array}{rccl}
\begin{array}{l@{}l}
y = r \sin(\phi) \\
{y}^{\prime} = r \sin(\phi + \theta)
\end{array}
\end{array} 
$$



Aplicando algunas propiedades trigonométricas:
$$
\begin{array}{l@{}l}
{x}^{\prime} = r \cos(\theta + \phi) = r \cos \phi \cos \theta - r \sin \phi \sin \theta
\\
{y}^{\prime} = r \sin(\theta + \phi) = r \cos \phi \sin \theta - r \sin \phi \cos \theta
\end{array}
$$



Substituyendo los valores de $x = r \cos(\phi)$ y $y = r \sin(\phi)$ se obtienen las ecuaciones para rotar un punto $p = (x, \ y)$ alrededor del origen dado un ángulo $\theta$

\begin{equation}
\begin{cases}
{x}^{\prime} = x \cos(\theta) - y \sin(\theta) \\ 
{y}^{\prime} = x \sin(\theta) - y \cos(\theta)
\end{cases}
\end{equation}

\begin{center}
\textbf{\footnotesize{Fórmulas para la rotación 2D alrededor del origen.}}
\end{center}

Sea $R(\theta)$ la matriz de rotación sobre el origen, en coordenadas homogéneas la
rotación de un punto p alrededor del origen en 2D se puede expresar como el producto matricial $p^{\prime} = p.R(\theta)$, es decir:

\begin{equation}
\begin{array}{rccl}
\left[
\begin{array}{rccl}
{x}^{\prime} & {y}^{\prime} & 1\\
\end{array}
\right]
\end{array}
=
\begin{array}{rccl}
\left[
\begin{array}{rccl}
x & y &  1\\
\end{array}
\right]
\end{array} 
.
\left[
\begin{array}{rccl}
\cos\theta & \sin\theta & 0\\
-\sin\theta & \cos\theta & 0\\
0 & 0 & 1\\
\end{array}
\right]
\end{equation}

\begin{center}
\textbf{\footnotesize{Expresión matricial para la rotación 2D.}}
\end{center}


\begin{figure}[h]
\includegraphics[width=12cm]{Img/GEO/geo-rot2d45.jpg}
\centering
    \caption{\footnotesize{\textbf{Ejemplo de rotación 2D con $\theta = 45^{\circ}$}}}
\end{figure}


\clearpage
\subsubsection{Rotaciones principales 3D}

\textquote{\textit{A diferencia de la rotación en el espacio 2D, donde para hacer rotar un objeto se necesita un punto (cero-dimensional), en 3D para hacer rotar un objeto se necesitan dos puntos no coincidentes que determinan un segmento de recta, cuya línea de soporte define un eje lineal (uni-dimensional) de rotación}} \citep{Matias2007}.\vskip
Las \textbf{rotaciones principales 3D}, son aquellas cuando el eje de rotación se encuentra sobre alguno de los tres ejes principales: $X$, $Y$ o $Z$, las rotaciones sobre cualquier otro eje arbitrario son llamadas \textfb{rotaciones generales  3D}. Se recuerda que inicialmente, se analizan las rotaciones principales.
Por convención, los ángulos de rotación positivos producen rotaciones en contra de
las agujas del reloj (antihorario) sobre el eje de rotación, esto es si se observa el giro desde la parte positiva del eje hacia el origen. Otra forma de determinar la dirección de un giro positivo es mediante la \textbf{regla de la mano derecha} (figura \ref{img:mano}), que dice que: \textquote{\textit{Si se coloca el dedo pulgar de la mano derecha sobre el eje de rotación apuntando hacia la parte positiva de dicho eje, el giro natural del resto de los dedos indica la dirección positiva del giro}} \citep{Matias2007}.

\begin{figure}[h]
\includegraphics[width=14cm]{Img/GEO/geo-mano0.jpg}
\centering
\caption{\textbf{\footnotesize{Regla de la mano derecha para obtener la dirección de un giro positivo en 3D.}}}
\label{img:mano}
\end{figure}

Para entender el concepto de rotación en 3D como una extensión de la rotación 2D, hay que recordar que la rotación 2D es el giro sobre el eje de rotación, que es perpendicular al plano $XY$, el cual en 3D corresponde al eje $Z$, entonces se obtiene la primera de las rotaciones principales.
De esta forma, por cada punto
$p = (x,\ y,\ z)$ dado un ángulo $\theta$, puede ser rotado sobre el eje $Z$ en sentido contrario a las agujas del reloj, obteniendo las coordenadas del nuevo punto $p^{\prime} = ({x}^{\prime},\ {y}^{\prime},\ {z}^{\prime})$ de la misma forma en como se analizó en el espacio 2D quedando la coordenada $z$ sin cambio, entonces, se extienden las formulas para la rotación 2D a 3D como: 

\begin{equation}\label{eq:giro2d}
\begin{cases}
{x}^{\prime} = x \cos(\theta) -y \sin(\theta) \\ 
{y}^{\prime} = x \sin(\theta) +y \cos(\theta) \\
{z}^{\prime} = z
\end{cases}
\end{equation}

\begin{center}
\textbf{\footnotesize{Fórmulas para la rotación 3D alrededor del eje $Z$.}}
\end{center}

Sea $R_{z}(\theta)$ la matriz de rotación alrededor del eje $Z$, en coordenadas homogéneas la rotación de un punto $p$ alrededor de dicho eje, se puede expresar como el producto matricial
$p^{\prime} = p.R_{z}(\theta)$, es decir:



\begin{equation}
\begin{array}{rccl}
\left[
\begin{array}{rccl}
{x}^{\prime} & {y}^{\prime} & {z}^{\prime} & 1\\
\end{array}
\right]
\end{array}
=
\begin{array}{rccl}
\left[
\begin{array}{rccl}
x & y & z & 1\\
\end{array}
\right]
\end{array} 
.
\left[
\begin{array}{rccl}
\cos\theta & \sin\theta & 0 & 0\\
-\sin\theta & \cos\theta & 0 & 0\\
0 & 0 & 1 & 0\\
0 & 0 & 0 & 1\\
\end{array}
\right]
\end{equation}

\begin{center}
\textbf{\footnotesize{Expresión matricial para la rotación 3D alrededor del eje $Z$}}
\end{center}

\begin{figure}[h]
\includegraphics[width=12cm]{Img/GEO/geo-rotacion3d0.jpg}
\centering
    \caption{\footnotesize{\textbf{Ejemplo de rotación sobre el eje $Z$ de una figura con $\theta = 20^{\circ}$}}}
\end{figure}

Las ecuaciones para las rotaciones sobre el eje $X$, y eje $Y$, pueden ser obtenidas mediante las permutaciones cíclicas de los parámetros $X$, $Y$, $Z$: 
$$X \xrightarrow \ Y \xrightarrow \ Z \xrightarrow \ X$$


\begin{figure}[h]
\includegraphics[width=12cm]{Img/GEO/geo-tras0.jpg}
\centering
    \caption{\footnotesize{\textbf{Permutaciones cíclicas de los ejes coordenados}}}
\end{figure}



Entonces, aplicando estas substituciones cíclicas en la \ref{eq:giro2d}, se obtienen las ecuaciones para la rotación alrededor del eje $X$ dado un ángulo
$\theta$


\begin{equation}\label{eq:giro2d1}
  \begin{split}
   \begin{cases}
{y}^{\prime} = y \cos(\theta) -z \sin(\theta) \\ 
{z}^{\prime} = y \sin(\theta) +z \cos(\theta) \\
{x}^{\prime} = x
\end{cases}
  \end{split}
\quad\longrightarrow\quad
  \begin{split}
   \begin{cases}
{x}^{\prime} = x \\ 
{y}^{\prime} = y \cos(\theta) -z \sin(\theta) \\
{z}^{\prime} = z \sin(\theta) +z \cos(\theta)
\end{cases}
\end{split}
\end{equation}

\begin{center}
\textbf{\footnotesize{Fórmulas para la rotación 3D alrededor del eje $X$}}
\end{center}
    
Sea $R_{x}( \theta )$ la matriz de rotación alrededor del eje $X$, en coordenadas homogéneas la
rotación de un punto $p$ alrededor de dicho eje, se puede expresar como el producto matricial $p^{\prime} = p.R_{x}(\theta)$, es decir:

\begin{equation}
\begin{array}{rccl}
\left[
\begin{array}{rccl}
{x}^{\prime} & {y}^{\prime} & {z}^{\prime} & 1\\
\end{array}
\right]
\end{array}
=
\begin{array}{rccl}
\left[
\begin{array}{rccl}
x & y & z & 1\\
\end{array}
\right]
\end{array} 
.
\left[
\begin{array}{rccl}
1 & 0 & 1 & 0\\
0 & \cos\theta & \sin\theta &  0\\
0 & -\sin\theta & \cos\theta & 0 \\
0 & 0 & 0 & 1\\
\end{array}
\right]
\end{equation}

\begin{center}
\textbf{\footnotesize{Expresión matricial para la rotación 3D alrededor del eje $X$}}
\end{center}

Aplicando nuevamente las substituciones cíclicas en la \ref{eq:giro2d1}, se obtienen las fórmulas para la rotación alrededor del eje $Y$ dado un ángulo $\theta$

\begin{equation}
  \begin{split}
   \begin{cases}
{z}^{\prime} = z \cos(\theta) -x \sin(\theta) \\ 
{x}^{\prime} = z \sin(\theta) +x \cos(\theta) \\
{y}^{\prime} = y
\end{cases}
  \end{split}
\quad\longrightarrow\quad
  \begin{split}
   \begin{cases}
{x}^{\prime} = x \cos(\theta) + z\sin(\theta) \\ 
{y}^{\prime} = y \\
{z}^{\prime} = -x \sin(\theta) + z \cos(\theta)
\end{cases}
\end{split}
\end{equation}

\begin{center}
\textbf{\footnotesize{Fórmulas para la rotación 3D alrededor del eje $Y$}}
\end{center}


Sea $R_{y}( \theta )$ la matriz de rotación alrededor del eje $Y$, en coordenadas homogéneas la rotación de un punto p alrededor de dicho eje, se puede expresar como el producto matricial $p^{\prime} = p.R_{y}(\theta)$, es decir:

\begin{equation}
\begin{array}{rccl}
\left[
\begin{array}{rccl}
{x}^{\prime} & {y}^{\prime} & {z}^{\prime} & 1\\
\end{array}
\right]
\end{array}
=
\begin{array}{rccl}
\left[
\begin{array}{rccl}
x & y & z & 1\\
\end{array}
\right]
\end{array} 
.
\left[
\begin{array}{rccl}
1 & 0 & 1 & 0\\
0 & \cos\theta & \sin\theta &  0\\
0 & -\sin\theta & \cos\theta & 0 \\
0 & 0 & 0 & 1\\
\end{array}
\right]
\end{equation}

\begin{center}
\textbf{\footnotesize{Expresión matricial para la rotación 3D alrededor del eje $Y$}}
\end{center}

\subsubsection{Rotaciones 3D como Rotaciones Paralelas a un Plano}

Las rotaciones en el espacio 3D son bien conocidas y entendidas por la mayoría de la
gente, y muchos pueden interpretarla como la rotación de un objeto alrededor de un eje (uni-dimensional) de rotación, sin embargo, es más adecuado pensar en un conjunto de rotaciones paralelas a un plano 2D, inmerso en el espacio. Se sabe que en 3D hay tres ejes coordenados: $X$, $Y$ y $Z$, y los planos principales son los formados por todas las posibles combinaciones de 2 de estos ejes, se obtienen así, los planos principales 3D: $XY$, $XZ$ y $YZ$.\vskip
Como se ve en la explicaciones anteriores, hay tres rotaciones principales, alrededor de cada uno los ejes principales, y durante estos giros se cumple que: dado el origen y ángulo de rotación, el conjunto de todos los puntos rotados por una matriz dada caen en un plano, llamado \textbf{plano de rotación}, y el eje lineal de rotación es el que coincide con el vector normal de este plano. Esto es consistente con el espacio 2D, porque todos los puntos rotados caen en un único y mismo plano, el plano $XY$. \vskip
Entonces se puede deducir que las rotaciones alrededor de los ejes coordenados producen rotaciones de todos los planos paralelos al plano de rotación, el cuál está formado por los ejes restantes, es decir, si el eje de rotación es el eje $Z$, el plano de rotación será el formado por los ejes coordenados restantes: el plano $XY$, de esta manera, si el eje de rotación es el eje $Y$, el plano de rotación será el plano $XZ$, y si el eje de rotación es el eje $X$, y el plano de rotación será el plano $YZ$ (ver figura \ref{rotaciones} a) b) y c) respectivamente).


\begin{figure}[h]
\includegraphics[width=12cm]{Img/GEO/geo-ejes0.jpg}
\centering
    \caption{\footnotesize{\textbf{Rotaciones principales 3D: a) eje $Z$, plano $XY$,   b) eje $Y$, plano $XZ$   y c) eje $X$, plano $YZ$.}}}
    \label{rotaciones}
\end{figure}





\begin{equation}
\label{eq:rotaciones}
\footnotesize{
   \begin{cases}
   \begin{array}{rccl}
    
    R_z(\theta) = R_{x,y}(\theta)
    =
    \left[
    \begin{array}{rccl}
    \cos\theta & \sin\theta & 0 & 0\\
    -\sin\theta & \cos\theta & 0  &  0\\
    0 & 0 & 1 & 0 \\
    0 & 0 & 0 & 1\\
    \end{array}
    \right]
   
    &
    R_x(\theta) = R_{y,z}(\theta)
    =
    \left[
    \begin{array}{rccl}
    1 & 0 & 1 & 0\\
    0 & \cos\theta & \sin\theta &  0\\
    0 & -\sin\theta & \cos\theta & 0 \\
    0 & 0 & 0 & 1\\
    \end{array}
    \right]
    \\ \\
    R_y(\theta) = R_{z,x}(\theta)
    =
    \left[
    \begin{array}{rccl}
    \cos\theta & 0 & -\sin\theta & 0\\
    0 & 1 & 0 &  0\\
    \sin\theta & 0 & \cos\theta & 0 \\
    0 & 0 & 0 & 1\\
    \end{array}
    \right]
    
    \end{array}
\end{cases}
}
\end{equation}


\begin{center}
\caption{\footnotesize{\textbf{Renombramiento de las matrices de rotación 3D en términos de planos de rotación.}}}
\end{center}
    
También se cumple que las rotaciones 3D dejan fijo un subespacio uni-dimensional, tal subespacio es el eje de rotación, lo que significa que todos los puntos que 
caen sobre este eje, no se ven afectados por la rotación. Esto se puede ver gráficamente en la figura \ref{rotaciones}, donde se observa que en cada una 
de las rotaciones, los puntos que caen sobre el eje de rotación no se ven afectados durante el giro. Si se renombran las matrices de rotación 3D, en términos de planos de rotación, colocando como subíndices los ejes que forman dicho plano se tiene la \ref{eq:rotaciones}.

Las Rotaciones principales 3D se cumple cuando el plano de rotación y el eje (n-2)-dimensional están formados por los ejes coordenados. También existen las llamadas \textbf{Rotaciones Generales 3D}, cuando el plano de rotación y el eje están definidos por puntos arbitrarios y no mediante los ejes coordenados, sin embargo para los fines prácticos de este trabajo de investigación, es suficiente conocer los conceptos de las rotaciones principales.
\vskip

\subsubsection{Transformaciones Compuestas}
Con la representación matricial se puede aplicar una secuencia de transformaciones, calculando simplemente la multiplicación matricial de cada una de las matrices de transformación. Dado que se está manejando una representación de la posición de un punto p como vector renglón, se puede aplicar una transformación compuesta a un punto $p$, multiplicando las matrices de izquierda a derecha, comenzando con el punto $p$.
Por ejemplo, si se desea aplicar una translación, seguida de un escalamiento a un punto $p$, la posición final del punto $p^{\prime}$ se calcula de la siguiente manera:

$$p^{\prime} = (p. T(d)).S(s)$$
o bien una traslación seguida de una rotación:
$$p^{\prime} = (p.T(d)).R_{a,b}(\theta)$$

Las matrices de transformaciones compuestas para el caso que sean del mismo tipo, se comportan de la siguiente manera:

\begin{itemize}
  \item Las traslaciones sucesivas son aditivas: $T(d_a).T(d_b) = T(d_a + d_b)$
  \item Los escalamientos sucesivos son multiplicativos: $S(s_a).S(s_b) = S(s_a . s_b)$
  \item Las rotaciones sucesivas son aditivas: $R_{a,b}(\theta).R_{a,b}(\omega) = R_{a,b}(\theta + \omega)$
\end{itemize}

\subsection{Transformaciones lineales del visor}
\textquote{\textit{El visor (cámara) puede ser considerado como un objeto más, en lo que respecta a las transformaciones lineales }} \citep{Ramos2011}. Sin embargo, el movimiento de los visores tiene sus propias peculiaridades, por lo que conviene estudiar de modo independiente las transformaciones lineales que se aplican a estos objetos. Para ello, antes es preciso dar una descripción de los visores.

\subsubsection{Descripción de los visores}
En un sistema gráfico el visor suele ser representado de la siguiente manera:

\begin{figure}[h]
\includegraphics[width=8cm]{Img/GEO/geo-visor0.png}
\centering
    \caption{\footnotesize{\textbf{esquema gráfico de un visor}}}
    \label{geo-visor0}
\end{figure}

En este caso se supone que el eje $Z^{\prime}$ pasa por el centro del plano visual, y que el \textbf{observador} (punto o centro de proyección) se encuentra en el origen del sistema de referencia del visor \textbf{(SRV)}, tal como muestra la siguiente figura.

\begin{figure}[h]
\includegraphics[width=8cm]{Img/GEO/geo-visor-1.png}
\centering
    \caption{\footnotesize{\textbf{esquema gráfico del visor}}}
    \label{geo-visor1}
\end{figure}

En el \textbf{Sistema Universal de Referencia} \textbf{(SUR)}, el visor se puede considerar como un objeto más (aunque normalmente sea invisible). Puede representarse como una caja cerrada donde $(P_1, \ P_2, \ P_3, \ P_4)$ son los vértices del marco, que configuran los límites del sistema de referencia del plano visual \textbf{(SRPV)}, siendo $SRV_0$ el origen del SRV.

\begin{figure}[h]
\includegraphics[width=6cm]{Img/GEO/geo-visor-2.png}
\centering
    \caption{\footnotesize{\textbf{puntos significativos del visor}}}
    \label{geo-visor2}
\end{figure}

El eje $Z^{\prime}$ del SRV suele quedar indicado por $N$, al ser normal al plano visual; el eje $Y^{\prime}$ por $U$ (de Up), dado que este eje se utiliza para controlar la verticalidad del visor. Por último, al eje $X^{\prime}$ se le llama $V$. Debido a esta nomenclatura, el sistema de referencia del visor (SRV) con frecuencia es denominado \textbf{NUV}. Además, el vector unitario $Z^{\prime}$ también se conoce como \textfb{vector de enfoque} \textbf{($V_f$)}, dado que su prolongación pasa por el foco elegido.\\
Con frecuencia el $SRV_0$ y el punto de proyección coinciden, aunque esto puede no ser así. Cuando el \textbf{punto de proyección} (PP) no se encuentra en el eje $Z^{\prime}$, a la recta que une el PP con el foco se denomina \textbf{eje visual}; el vector unitario de dicha recta se conoce como la \textbf{visual del observador} ($V_o$). Si $SRV_0 = PP {\Rightarrow} V_f = V_v$ (Ver Figura  \ref{geo-visor3})

\begin{figure}[h]
\includegraphics[width=8cm]{Img/GEO/geo-visor-3.png}
\centering
    \caption{\footnotesize{\textbf{punto de proyección fuera del eje de enfoque}}}
    \label{geo-visor3}
\end{figure}

\clearpage
\subsubsection{Traslación de los visores}
Para trasladar el visor desde un lugar del SUR a otro, se debe aplicar la matriz de traslación a todos los puntos significativos del visor, es decir, al conjunto de puntos $\{SRV_0, \ PP, \ P_1, \ P_2, \ P_3\}$. En definitiva, de la misma forma que los objetos vistos en la sección anterior (Traslación 3D).

\begin{figure}[h]
\includegraphics[width=10cm]{Img/GEO/geo-visor-4.png}
\centering
    \caption{\footnotesize{\textbf{traslación de los visores}}}
    \label{geo-visor4}
\end{figure}

\subsubsection{Cambio de Escala de los visores}
El cambio de escala del visor normalmente se realiza de modo que el $SRV_0$ no varíe su posición en el SUR, es decir, se efectúa con respecto a un punto fijo. El proceso de cambio de escala es e siguiente:
\begin{enumerate}
    \item Siendo $(x_0, \ y_0, \ z_0)$ las coordenadas del $SRV_0$ en el SUR, se aplica la matriz de traslación $T(-z_0, -y_0, -z_0)$ sobre los puntos significativos del visor.
    \item A continuación se aplica el vector de escala $E(\kappa_z, \ \kappa_y, \ \kappa_x)$, donde $\kappa_z = \kappa_y = \kappa_x$.
    \item Por último se devuelve a su posición original, mediante $T^{-1}$. \\
    \textquote{\textit{\textfb{El cambio de escala en el visor produce el efecto zoom}}} \citep{Ramos2011}.
\end{enumerate}

\subsubsection{Rotación de los visores}
Para girar el visor existen varios planteamientos operativos básicos. Los más frecuentes son:
\begin{enumerate}
\item Establecer uno o más ángulos de giro, hasta que el visor enfoque hacia la posición requerida.
\item Establecer las coordenadas del foco, y hacer que el vector de enfoque se dirija hacia el foco.
\end{enumerate}

\textbf{1. Primer Planteamiento}\\
Si se tiene posicionado el visor en el SUR, con el vector de enfoque apuntando hacia cualquier dirección, es decir, el SUR y el SRV no tienen por qué estar alineados.

\begin{figure}[h]
\includegraphics[width=8cm]{Img/GEO/geo-visor-5.png}
\centering
    \caption{\footnotesize{\textbf{traslación de los visores}}}
    \label{geo-visor5}
\end{figure}

Si se necesita enfocar el visor mediante ángulos de giro, la primera cuestión que se debe resolver es averiguar el eje o ejes de giro más apropiados para controlar el visor.\\
Dado que el visor es el representante del observador en el SUR, no tiene demasiado sentido girarlo con respecto a los ejes (o un eje cualquiera) del SUR. Cuando un observador gira la cabeza (y por tanto los ojos), lo hace con referencia a el mismo, y no con respecto al contexto (habitación, etc) donde se encuentra. Por lo tanto, parece lógico que el control del visor sea más intuitivo si los ángulos de giro se dan respecto al SRV, es decir, tomando $(Z^{\prime}, \ Y^{\prime}, \ X^{\prime})$ como ejes de giro.\\
Ahora bien, como los ejes $(Z^{\prime}, \ Y^{\prime}, \ X^{\prime})$ no tienen por qué estar alineados con $Z, Y, X$, para poder girar el visor, y obtener por tanto las coordenadas finales de los puntos significativos del visor en SUR, es necesario alinear primero el SRV con el SUR. El proceso es similar al utilizado para girar un objeto en cualquier eje y se puede ver gráficamente en la figura \ref{geo-visor6}

\begin{figure}[h]
\includegraphics[width=15cm]{Img/GEO/geo-visor-6.jpg}
\centering
    \caption{\footnotesize{\textbf{primera fase del giro relativo de un visor}}}
    \label{geo-visor6}
\end{figure}

Luego de girar el visor un ángulo $\phi$ alrededor de uno de los ejes, para devolverlo a su posición original se debería calcular el producto de matrices inversas\\
${{G_z}^{-1}}(\gamma) \cdot {{G_y}^{-1}}(\beta) \cdot {{G_x}^{-1}}(\alpha) \cdot (T^{-1})$. De igual modo que en los objetos, esta forma de girar el visor utiliza giros relativos, o sea, partiendo de la posición actual.\\

\textbf{Giros absolutos en los visores} \\
Hasta el momento, todos los giros que se han visto, tanto para los objetos, como para el visor, han sido relativos, es decir, partiendo de la ubicación y orientación actual del objeto. Considerando un visor, se puede analizar cómo sería el giro absoluto.\\
La característica más peculiar del giro absoluto de los visores es que, a la hora de efectuar el giro se parte de un visor en el estado cero, es decir, con el SRV alineado con el SUR.

\begin{figure}[h]
\includegraphics[width=8cm]{Img/GEO/geo-visor-7.jpg}
\centering
    \caption{\footnotesize{\textbf{estado cero del visor}}}
    \label{geo-visor7}
\end{figure}

Por tanto, la principal ventaja del giro absoluto es que se evitan todos los pasos (transformaciones lineales) necesarias para llevar el visor (y objetos en general) hasta el estado cero, como ocurre en los giros relativos. Por el contrario, es necesario llevar un control de giro absoluto de cada componente de giro, es decir, se ha de tener actualizado el vector de giro absoluto $\Phi = ({\phi}_x, {\phi}_y, {\phi}_z)$.
Al igual que en los giros relativos, en los absolutos \textquote{\textit{el usuario controla los giros mediante variaciones (positivas o negativas) de las componentes de giro $({\phi}_x, {\phi}_y, {\phi}_z)$), que constituyen el \textbf{vector incremental de giro $({\Delta}{\Phi})$} en un momento dado}} \citep{Ramos2011}. En el caso de los visores, el vector de giro viene dado con respecto al sistema de referencia local del visor (SRV), que es la manera más intuitiva de girar un visor es sobre los ejes $(X^{\prime}, Y^{\prime}, Z^{\prime})$ del SRV.\\
Para comprender mejor los giros absolutos se debe considerar que:
\begin{itemize}
    \item Como siempre, los giros se ejecutan sobre los ejes ortogonales del SUR, lo que implica que al gira el visor en $Z, Y, X$, también girarán los ejes $(X^{\prime}, Y^{\prime}, Z^{\prime})$.
    \item Dado que los ángulos de giro vienen dados con respecto a $(X^{\prime}, Y^{\prime}, Z^{\prime})$, dichos ángulos, vistos desde el SUR, podemos decir que son acumulativos. Por ejemplo, si un visor que parte del estado cero queda girado en $(X^{\prime}$ un ángulo ${\alpha}_1$, si más tarde se gira en el mimo eje un ángulo ${\alpha}_2$, entonces la orientación actual será la misma que la que se obtendría girando el visor, a partir del estado cero, un ángulo $({\alpha}_1 + {\alpha}_2)$ en $X^{\prime}$.
\end{itemize}

\textbf{Procedimiento para los giros absolutos}\\
Si la posición actual del visor que se desea girar es similar a la mostrada en la figura \ref{geo-visor5}, con el $SRV_o = (x, \ y, \ z)$. Por otro lado, se establece que en un momento dado $\“t\”$, el vector incremental de giro es ${{\Delta}{\Phi}}_t = ({{\delta}{\phi}}_x,  -{{\delta}{\phi}}_y,  {{\delta}{\phi}}_z)$. Según esto, el \textbf{control de giro absoluto} $({\Phi}_t)$ vendría dado en el momento $t$ por:

\begin{equation} {\Phi}_t = {\Phi}_{t-1} + {{\Delta}{\Phi}}_t \end{equation}

Se puede analizar un caso concreto de giro absoluto de un visor: Para simplificar se supone que el giro en $Z^{\prime}$ queda descartado o limitado a giros de $90^{\circ}$, de forma que el plano visual se posicione en modo retrato o bien en modo paisaje. Ver figura \ref{geo-visor8}

\begin{figure}[h]
\includegraphics[width=10cm]{Img/GEO/geo-visor-8.png}
\centering
    \caption{\footnotesize{\textbf{visor en modo retrato y paisaje}}}
    \label{geo-visor8}
\end{figure}

Además, cuando el visor deba girar en $X^{\prime}$ e $Y^{\prime}$, establecemos que siempre gira primero en $Y^{\prime}$, y luego en $X^{\prime}$.\\
Sea entonces un usuario que pretende girar el visor en $Y^{\prime}$ y $X^{\prime}$ (en este orden), dejando el giro en $Z^{\prime}$ invariable, por lo que establece un incremento de giro ${{\delta}{\phi}}_X, -{{\delta}{\phi}}_Y, 0)$. Puesto que no desea variar la forma ni la posición del visor en el SUR, el giro puede realizarse de la siguiente manera:
\begin{enumerate}
    \item Partiendo de un visor en estado cero, se escala (si es necesario) de modo que tenga las mismas características que el visor que se pretende girar.
    \item A continuación, se aplica el giro $G_{Y^{\prime}}({\phi}_y) \cdot G_{X^{\prime}}({\phi}_x)$
    \item Por último, como $(x, y, z)$ son las coordenadas en SUR del visor que se pretende girar, se aplica la transformación $T(x, y, z)$ al nuevo visor (centrado en el SUR), sustituyendo al antiguo.
\end{enumerate}

A continuacion se analiza cómo se realiza el giro $G_{Y^{\prime}}({\phi}_y) \cdot G_{X^{\prime}}({\phi}_x)$\\
Dado que las coordenadas finales del giro del visor han de estar dadas en el SUR, se debe girar el visor en este sistema de referencia.

\begin{figure}[h]
\includegraphics[width=10cm]{Img/GEO/geo-visor-9.png}
\centering
    \caption{\footnotesize{\textbf{visor de partida en el estado cero}}}
    \label{geo-visor9}
\end{figure}

Aprovechando que se parte de un visor en el estado cero como en la figura \ref{geo-visor9} es posible girar directamente el visor en $Y$, un ángulo ${\phi}_y$, mediante la matriz de giro en $Y$, lo cual queda indicado por $G_{Y^{\prime}}({\phi}_y)$. Como ambos sistemas (SRV y SUR) están centrados y alineados, sucede que el giro en $Y$ es igual al giro en $Y^{\prime}$. Por lo tanto
$$G_{y^{\prime}}({\phi}_y) = G_{y}({\phi}_y) $$

Para ello se ha de alinear el eje $X^{\prime}$, con cualquiera de los ejes del SUR. Por conveniencia $X^{\prime}$ se alinea con el eje $X$. Como $G_{y}({\phi}_y)$ ha sido la transformación que ha desalineado el eje $X^{\prime}$, si aplicamos la transformación
${G_{y}^{-1}}({\phi}_y)$, volveremos a tener $X$ y $X^{\prime}$ alineados. A continuación se efectúa el giro $G_{x}({\phi}_x)$ y finalmente se devuelve el eje $X^{\prime}$ a su posición original, multiplicando nuevamente por la matriz ${G_{y}}({\phi}_y)$. En definitiva, el giro en $X^{\prime}$ queda como:

$$G_{x^{\prime}}({\phi}_x) = {G_{y}^{-1}}({\phi}_y) \cdot G_{x}({\phi}_x) \cdot G_{y}({\phi}_y)$$

En conclusión, el giro del visor en $X^{\prime}$ e $Y^{\prime}$ queda 

$$G_{Y^{\prime}}({\phi}_y) \cdot G_{X^{\prime}}({\phi}_x) = G_{y}({\phi}_y) \cdot {G_{y}^{-1}}({\phi}_y) \cdot G_{x}({\phi}_x) \cdot G_{y}({\phi}_y)$$

Como $G_{y}({\phi}_y) \cdot {G_{y}^{-1}}({\phi}_y) = 1$, se tiene finalmente que

\begin{equation}G_{Y^{\prime}}({\phi}_y) \cdot G_{X^{\prime}}({\phi}_x) =  G_{x}({\phi}_x) \cdot G_{y}({\phi}_y) \end{equation}


\clearpage

\textbf{2. Segundo Planteamiento}\\
Es posible controlar el visor estableciendo las coordenadas del foco, y haciendo que el visor enfoque en esa dirección. Se pueden ver dos métodos:
\begin{itemize}
    \item \textbf{Centrar en un punto dado}
    \begin{enumerate}
        \item A través de un píxel seleccionado con el ratón, se averigua el punto de intersección (si existe) de la proyección en perspectiva con algún objeto del escenario. Esta operación es muy sencilla con los métodos de renderizado directos (ray casting o ray tracing). Así, siendo $PP = (x_0, y_0, z_0)$ \textbf{SUR} las coordenadas del \textbf{centro de proyección} en el SUR, y $PX = (x_1, y_1, z_1)$ SUR las coorde- nadas del píxel seleccionado, basta con trazar un vector (rayo) en la dirección $(PX – PP)$, para determinar las coordenadas de intersección con el objeto seleccionado del escenario.
        
        \item A continuación se calcula la normal en el punto de intersección elegido, y si no hay intersección, se elige un punto en la prolongación de la trayectoria de la proyección en perspectiva, a una distancia determinada del origen (o del píxel).
        
        \item Suponiendo que existe un punto de intersección, se multiplica la normal a la superficie por $–1$ para cambiarle el sentido, de modo que apunte en la dirección contraria.
        
        \begin{figure}[h]
        \includegraphics[width=12cm]{Img/GEO/geo-visor-10.png}
        \centering
        \caption{\footnotesize{\textbf{se calcula la normal en el punto de intersección y se cambia de signo}}}
        \label{geo-visor10}
        \end{figure}
        
        Los pasos que siguen son similares a los que se han de realizar para gi- rar los objetos sobre un eje dado del SUR.
        
        \item A continuación el vector –N se traslada del origen de coordenadas del SUR.
        
        \item Una vez que se tiene el vector $–N$ posicionado en el origen del SUR, se han de calcular los ángulos de giro ${{\alpha}_i}^{\prime}$ y ${{\beta}_j}^{\prime}$ que se han de aplicar a un \textbf{nuevo visor en estado cero} (si es necesario, se ha de escalar para que sea idéntico al visor activo), para que el vector de enfoque $(Vf)$ quede alineado con el vector $–N$.\\
        Al estudiar el giro sobre un eje cualquiera se ha visto la manera de calcular estos ángulos. Otra forma de encontrar ${{\alpha}_i}^{\prime}$ y ${{\beta}_j}^{\prime}$ (que en el fondo es lo mismo) es transformando las coordenadas cartesianas en el SUR, en coordenadas polares. 
        
        \begin{figure}[h]
        \includegraphics[width=6cm]{Img/GEO/geo-visor-11.png}
        \centering
        \caption{\footnotesize{\textbf{alineación del vector de enfoque mediante coordenadas polares}}}
        \label{geo-visor11}
        \end{figure}
        
        Entonces:
        $$
        \begin{array}{l@{}l}
        {z^{\prime}} = (-N) \cdot \cos{\beta} \cdot \sin{\alpha}\\
        {y^{\prime}} = (-N) \cdot \cos{\alpha}\\
        {x^{\prime}} = (-N) \cdot \sin{\beta} \cdot \sin{\alpha}
        \end{array}
        $$
        
        Los ángulos a girar son ${{\beta}_j}^{\prime} = \beta$  y ${{\alpha}_i}^{\prime} = (1 – \alpha) $
        
        \item Una vez que se conocen los ángulos de giro ${{\alpha}_i}^{\prime}$ y ${{\beta}_j}^{\prime}$, se efectúa el giro del nuevo visor, como se puede ver en los giros absolutos.
    
        \item A continuación se busca un punto situado en la prolongación del vector $N$, a una distancia $Df$ del punto de intersección.
        
        \item Por último, se traslada el visor a dicho punto (ver figura \ref{geo-visor12}).
        
        \begin{figure}[h]
        \includegraphics[width=14cm]{Img/GEO/geo-visor-12.png}
        \centering
        \caption{\footnotesize{\textbf{se traslada el visor a un punto de la trayectoria de la normal}}}
        \label{geo-visor12}
        \end{figure}

    \end{enumerate}
    
    \item \textbf{Enfocar hacia un punto dado}\\
    Consiste en dirigir el vector de enfoque $(Vf)$ hacia un punto del escenario seleccionado por el usuario mediante el ratón, de manera que el origen del SRV $(SRV_0)$ no varíe.
    \begin{enumerate}
        \item A través de un píxel seleccionado con el ratón, se averigua su punto de intersección de la proyección en perspectiva (si existe), de modo similar al expuesto en el caso anterior.
        \item Una vez conocidas las coordenadas del punto de enfoque, se averigua y normaliza el vector $F$, que une el punto de intersección y el $SRV_0$.
        
        \begin{figure}[h]
        \includegraphics[width=8cm]{Img/GEO/geo-visor-13.png}
        \centering
        \caption{\footnotesize{\textbf{cálculo del vector de enfocar hacia un punto dado por el usuario}}}
        \label{geo-visor13}
        \end{figure}
        
        \item A continuación se averiguan los ángulos de giro ${{\alpha}_i}^{\prime}$ y ${{\beta}_j}^{\prime}$ necesarios para que el vector $Vf$ y el vector $F$ queden alineados. Para ello, tras llevar $F$ al origen del SUR, se pueden transformar las coordenadas cartesianas normalizadas de $F$ en coordenadas polares.
        
        \item Una vez que se conocen los ángulos de giro, se gira un nuevo visor en estado cero, y finalmente se posiciona a SUR, según las coordenadas del $SRV_0$ del visor antiguo.
        
    \end{enumerate}
    
    
\end{itemize}

\subsection{Proyecciones}
Básicamente hay dos métodos para proyectar objetos tridimensionales sobre una superficie bidimensional:

\begin{enumerate}
    \item Todos los puntos del objeto se proyectan sobre la superficie bidimensional mediante líneas paralelas.
    
    \item la proyección se efectúa mediante líneas que convergen en una posición determinada (que suele denominarse centro de proyección).
\end{enumerate}
Estos dos métodos, denominados respectivamente \textbf{proyección en paralelo} y \textbf{proyección en perspectiva}, se pueden observar en la figura \ref{geo-per0}. La proyección de un punto del objeto sobre la superficie de proyección se determina por la intersección de una línea de proyección con dicha superficie. Lo que varía de un método a otro es la forma de trazar la línea de proyección.
\vspace{5mm}
\begin{figure}[h]
    \includegraphics[width=10cm]{Img/GEO/geo-per-0.png}
    \centering
    \caption{\footnotesize{\textbf{a) proyección en paralelo y b) proyección en perspectiva}}}
    \label{geo-per0}
\end{figure}

\textquote{\textit{La proyección en paralelo conserva las dimensiones relativas de los objetos, por lo que es muy empleada en el dibujo técnico para obtener trazos a escala de objetos tridimensionales. Sin embargo, este tipo de proyección no ofrece una representación realista del aspecto del objeto tridimensional. Por el contrario, la proyección en perspectiva sí produce aspectos realistas, pero tiene el inconveniente de que no preserva las dimensiones relativas de los objetos, al aparecer mayores las líneas más cercanas al plano de proyección}} \citep{Ramos2011}.

\begin{figure}[h]
    \includegraphics[width=12cm]{Img/GEO/geo-per-1.png}
    \centering
    \caption{\footnotesize{\textbf{proyección de líneas de igual tamaño a distancias diferentes}}}
    \label{geo-per1}
\end{figure}

\textbf{1. Proyección en paralelo }\\
En este caso todas \textquote{\textit{las líneas de proyección son paralelas entre sí, o dicho de otro modo, \textbf{todas mantienen el mismo ángulo en relación al plano de proyección}}} \citep{Ramos2011}. Cuando este ángulo es recto (las líneas de proyección son perpendiculares al plano) se habla de una \textbf{proyección ortogonal}. Cuando la proyección no es perpendicular se denomina \textbf{proyección oblicua}.

\begin{figure}[h]
    \includegraphics[width=12cm]{Img/GEO/geo-per-2.png}
    \centering
    \caption{\footnotesize{\textbf{proyecciones ortogonal y oblicua}}}
    \label{geo-per2}
\end{figure}

Las proyecciones ortogonales se utilizan habitualmente para obtener las vistas de alzado, planta y perfil de un objeto. En los dibujos de ingeniería, en general, son éstas las proyecciones que se utilizan, dado que las longitudes y los ángulos se representan de manera precisa, lo que permite que se puedan medir los trazos.

\begin{figure}[h]
    \includegraphics[width=12cm]{Img/GEO/geo-per-3.png}
    \centering
    \caption{\footnotesize{\textbf{proyecciones ortogonales}}}
    \label{geo-per3}
\end{figure}

Las proyecciones ortogonales no se limitan a proyectar una sola cara (como ocurre en la figura anterior), sino que es posible hacerlo con más de una cara del objeto. Este tipo proyecciones ortogonales se denominan axonométricas. Dentro de este grupo, la que más se utiliza es la proyección isométrica, la cual se obtiene alineando el plano de proyección de manera que corte a cada eje del SUR, a la misma distancia del origen. En la figura \ref{geo-per4} se muestra una proyección isométrica. Hay ocho posibilidades para obtener una vista isométrica, una en cada octante del espacio. Los tres ejes principales se escalan por igual, de manera que se conservan las proporciones relativas, cosa que no ocurre en las proyecciones axonométricas en general, donde puede haber distintos factores de escala para cada eje.
\begin{figure}[h]
    \includegraphics[width=10cm]{Img/GEO/geo-per-4.png}
    \centering
    \caption{\footnotesize{\textbf{proyecciones ortogonales}}}
    \label{geo-per4}
\end{figure}

Las ecuaciones de transformación para efectuar una proyección parale- la ortogonal son directas. Para cualquier punto $(x, y, z)$ en el SUR, el punto $(x_0, y_0, z_0)$ sobre el plano visual (perpendicular al eje $Z$) se calcula como:

$$x_p = x; \ y_p = y; \ z_p=0$$

Utilizando un sistema de coordenadas homogéneo, las ecuaciones anteriores, expresadas en formato matricial, quedarían como:

$$(x_p, y_p, z_p, 1)=(x, y, z, 1) \cdot M_{ort}$$

Donde:
\begin{equation}
\begin{array}{rccl}
M_{ort}
\end{array}
=
\left[
\begin{array}{rccl}
1 & 0 & 0 & 0\\
0 & 1 & 0 & 0\\
0 & 0 & 1 & 0\\
d_{1} & d_{2} & d_{3} & 1\\
\end{array}
\right]
\end{equation}


\vspace{5mm}
La proyección oblicua se obtiene proyectando los puntos del objeto por medio de líneas paralelas pero no perpendiculares al plano de proyección.

\begin{figure}[h]
    \includegraphics[width=12cm]{Img/GEO/geo-per-5.png}
    \centering
    \caption{\footnotesize{\textbf{proyección oblicua de un punto $(x, y, z)$ sobre el plano de proyección.}}}
    \label{geo-per5}
\end{figure}

En este caso, las coordenadas del punto de proyección son:
$$x_p = x + L\cos{\phi}$$
$$y_p = y + L\sin{\phi}$$

donde $L$ es la longitud de la línea que une los puntos $(x, y)$ y $(x_p, y_p)$ mientras que $\phi$ es el ángulo que forma esa línea con la dirección horizontal del plano de proyección.
Una dirección de proyección puede definirse seleccionando distintos valores para los ángulos $\alpha$ y
$\phi$ . Valores habituales para el ángulo $\phi$ son $30^{\circ}$ y
$45^{\circ}$, que despliegan una vista combinada del frente, lado y parte superior (o frente, lado y parte inferior) de un objeto. La longitud $L$ es función de la coordenada $z$, y puede calcularse a partir de las relaciones
$$\tan{\alpha} = \frac{z}{L} = \frac{1}{L_1}$$

siendo $L1$ el valor de $L$ cuando $z = 1$. De la ecuación anterior se puede deducir 
$$L = z{L}_1$$

con lo cual se pueden volver a escribir las ecuaciones de la proyección oblicua como:

$$x_p = x + z(L_1\cos{\phi})$$
$$y_p = y + z(L_1\sin{\phi})$$

Estas ecuaciones pueden expresarse matricialmente de la siguiente manera:

$$(x_p, y_p, z_p, 1)=(x, y, z, 1) \cdot M_{obl}$$

siendo:

\begin{equation}
\begin{array}{rccl}
M_{obl}
\end{array}
=
\left[
\begin{array}{rccl}
1 & 0 & 0 & 0\\
0 & 1 & 0 & 0\\
L_1\cos{\phi} & L_1\sin{\phi} & 0 & 0\\
0 & 0 & 0 & 1\\
\end{array}
\right]
\end{equation}

\vspace{5mm}
Cuando $L_1= 0$ (que ocurre cuando el ángulo de proyección α es de $90^{\circ}$), se obtiene una proyección ortogonal, es decir, $M_obl = M_ort$. Las proyecciones
oblicuas se darán para valores de $L_1$ distintos de cero.\\
En las proyecciones oblicuas se utilizan a menudo dos ángulos tales
que $\tan{\alpha} = 1$ y tan $\tan{\alpha} = 2$. En el primer caso $\alpha = 45^{\circ}$, que se corresponden con lo que se conoce como proyección \textbf{cavalier}, en la que todas las líneas perpendiculares al plano de proyección se proyectan sin cambio de longitud. En la figura \ref{geo-per6} se pueden ver ejemplos de la proyección cavalier de un cubo, para valores $\phi =$ $45^{\circ}$ y $\phi =$ $30^{\circ}$, respectivamente.


En el segundo de los casos se obtiene la llamada proyección cabinet. El ángulo de proyección es aproximadamente $\alpha = 63,4^{\circ}$ que hace que \textbf{las líneas perpendiculares a la superficie de proyección se proyecten a la mitad de su longitud}. Debido a esta reducción, la proyección \textbf{cabinet} parece más realista que la cavalier. Se puede ver un ejemplo de proyección cabinet de un cubo en la figura \ref{geo-per6} para dos valores diferentes de $\phi$.


\begin{figure}[h]
    \includegraphics[width=14cm]{Img/GEO/geo-per-6.png}
    \centering
    \caption{\footnotesize{\textbf{Proyecciones cavalier y cabinet de un cubo, en el segundo caso se puede apreciar que los cubos se proyectan a la mitad de su longitud.}}}
    \label{geo-per6}
\end{figure}
\clearpage
\textbf{2. Proyecciones en perspectiva}

En este caso \textquote{\textit{las líneas de proyección coinciden todas en un punto que se denomina centro o punto de proyección (PP)}} \citep{Ramos2011}. La posición del centro de proyección puede ser cualquiera, pero si se encuentra en alguno de los ejes ortogonales (p.e., el $Z$) simplifica notablemente los cálculos.
Las ecuaciones de transformación para la proyección en perspectiva se pueden obtener a partir de las ecuaciones paramétricas que describen la línea de proyección que va del punto $P$ al centro de proyección. Ver figura \ref{geo-per7}

\begin{figure}[h]
    \includegraphics[width=12cm]{Img/GEO/geo-per-7.png}
    \centering
    \caption{\footnotesize{\textbf{proyección en perspectiva de un punto.}}}
    \label{geo-per7}
\end{figure}

El sistema de ecuaciones paramétricas de esta línea de proyección es:

$$
\begin{array}{l@{}l}
        x^{\prime} = x - xu\\
        y^{\prime} = y - yu\\
        z^{\prime} = z - (z+d)u
\end{array}
$$

El parámetro $u$ toma valores en el intervalo $[0, \ 1]$ y las coordenadas $(x^{\prime}, \ y^{\prime}, \ z^{\prime})$ representan un punto cualquiera a lo largo de la línea de proyección. Cuando $u = 0$ las ecuaciones anteriores proporcionan las coordenadas $(x, \ y, \ z)$ del punto $P$. En el otro extremo, cuando $u = 1$, se tienen las coordenadas del punto de proyección $(0, \ 0, \ –d)$.\\
Para obtener las coordenadas en el plano de proyección se hace $z^{\prime} = 0$ y se determina $u$, quedando que:

$$u = \frac{z}{z + d}$$

Para este valor de u se produce la intersección de la línea de proyección con el plano, en el punto $(x_p, y_p, 0)$ . Al sustituir la ecuación en el sistema de ecuaciones anterior, se obtienen las ecuaciones de la proyección en perspectiva:

$$x_p = x\frac{z}{z + d} = x\frac{z}{z/d + 1}$$
$$y_p = y\frac{z}{z + d} = x\frac{y}{z/d + 1}$$
$$z_p = 0$$

Utilizando sistemas de coordenadas homogéneas tridimensionales se puede escribir la transformación en perspectiva en forma matricial:

\begin{equation}
\left(
\begin{array}{rccl}
x_y & y_h & z_h & w
\end{array}
\right)
=
\left(
\left[
\begin{array}{rccl}
x & y & z & 1
\end{array}
\right]
\right) \cdot M_{pers}
\end{equation}

siendo:

\begin{equation}
\begin{array}{rccl}
M_{pers}
\end{array}
=
\left[
\begin{array}{rccl}
1 & 0 & 0 & 0\\
0 & 1 & 0 & 0\\
0 & 0 & 0 & 1/d\\
0 & 0 & 0 & 1\\
\end{array}
\right]
\nonumber
\end{equation}

En la representación se obtiene

$$w=\frac{z}{d} + 1$$

de tal manera que, para calcular las coordenadas de la proyección en plano de proyección a partir de las coordenadas homogéneas, basta con hacer

\begin{equation}
\left[
\begin{array}{rccl}
x_p & y_p & z_p & 1
\end{array}
\right]
=
\left[
\begin{array}{rccl}
x_h/w & y_h/w & z_h/w & 1
\end{array}
\right]
\end{equation}

Ver que si en $M_{pers}$ se hace que $d = \infty$, entonces la matriz de perspectiva se convierte en la matriz de proyección ortogonal $(M_{ort})$

\clearpage
\textbf{Clasificación de las proyecciones en perspectiva}\\
En las proyecciones en perspectiva, al punto donde se unen las prolongaciones de las rectas que son paralelas a uno de los ejes de coordenadas se le llama \textbf{punto de fuga}. El número de puntos de fuga principales depende de la orientación del plano de proyección. Las proyecciones en perspectiva se clasifican según el número de puntos de fuga. En un sistema 3D, como máximo habrá 3 puntos de fuga y como mínimo 1.
Si el plano de proyección es paralelo a dos de los ejes ortogonales, entonces sólo habrá un punto de fuga, orientado en la dirección del eje no paralelo. Por ejemplo, si el plano de proyección es paralelo a los ejes $X$ e $Y$, el punto de fuga se encontrará en algún lugar en la dirección de $Z$.


\begin{figure}[h]
    \includegraphics[width=12cm]{Img/GEO/geo-per-8.png}
    \centering
    \caption{\footnotesize{\textbf{tipos de perspectivas, según el número de puntos de fuga.}}}
    \label{geo-per8}
\end{figure}

Si el plano de proyección sólo es paralelo a un eje, entonces habrá dos puntos de fuga, uno por cada eje no paralelo. En la figura \ref{geo-per8}.b, el plano de proyección es paralelo al eje $Y$. Finalmente, si el plano de proyección no es paralelo a ninguno de los ejes, entonces habrá tres puntos de fuga, uno por eje, ver figura \ref{geo-per8}.c.

\clearpage
\section{Modelado Sólido}
Las raíces del Modelado Geométrico se encuentran en los primeros sistemas gráficos, que fueron desarrollados al comienzo de la década de los 60 con propósitos CAM. Esto dió lugar a la revolución industrial de la maquinaria numéricamente controlada en inglés \textit{Numeric Control} (NC)\footnote{El control numérico o control decimal numérico es un sistema de automatización de máquinas herramienta que son operadas mediante comandos programados.}.
El siguiente paso importante fue dado en el MIT\footnote{http://web.mit.edu/}, con el desarrollo de un compilador para un lenguaje de descripción gráfica en 1967. Paralelamente, las principales multinacionales en los campos automovilísticos, aviación, etc. desarrollaron sus primeros sistemas gráficos de diseño.
A mediados de los 70 se produjeron avances significativos en el Modelado Geométrico. Las limitaciones iniciales que presentaban los primeros sistemas gráficos fueron superadas desarrollando nuevas técnicas, las cuales permitieron realizar lo que conocemos como superficies esculpidas en inglés \textit{sculptured surfaces}, las superficies paramétricas, de Bezier, etc.

Mientras tanto, se desarrollaron los primeros \textbf{modeladores alámbricos} en inglés \textit{wireframe} y los esquemas poligonales. Inicialmente estos sistemas fueron bidimensionales y trataban de implantar lo que se conoce como \textbf{dibujo técnico} para ser realizado con la computadora.
Finalmente surgieron los esquemas de \textbf{Modelado de Sólidos} (o Modelado Sólido), sobre los que se desarrolla a continuación.
\textquote{\textit{El \textbf{Modelado Sólido} es una rama relativamente reciente del Modelado Geométrico, que hace hincapié en la aplicabilidad general de los modelos, e insiste en crear solamente modelos ``completos" de los sólidos, es decir, modelos que son adecuados para responder algorítmicamente a cualquier pregunta geométrica que se formule.}} \citep{Ramos2011} 

El objetivo de ``aplicabilidad general" diferencia los esquemas de Modelado Sólido de otros esquemas de modelado geométricos, los cuales se utilizan en casos especiales. Así, los \textbf{modelos gráficos} en inglés \textit{graphical models} se utilizan para describir el dibujo técnico de los objetos, por ejemplo en ingeniería.
Los \textbf{modelos de superficie} en inglés \textit{surface models} proporcionan información detallada sobre superficies, pero no siempre proporcionan la información suficiente para determinar todas las propiedades geométricas. 

\begin{figure}[h]
\includegraphics[width=15cm]{Img/GEO/geo-compa.jpg}
\centering
\caption{\textbf{\footnotesize{Modelos 3D: a) wireframe, b) surface, c) sólido}}}
\end{figure}


De acuerdo con el principio de universalidad, se espera de los modelos sólidos que sean capaces de responder algorítmicamente a las preguntas geométricas típicas que aparecen en las aplicaciones de ingeniería. Estos son algunos ejemplos de dichas preguntas:
¿Cuál es el aspecto del objeto? ¿Cuál es su peso, área, etc.? ¿Toca el objeto a otro
si se mueven? ¿Qué carga puede soportar? ¿Cómo puede fabricarse con los procesos de
manufacturación disponibles?\vskip
La respuesta a estas preguntas podría ser una imagen, un número o una constante booleana. De hecho, incluso podría ser otro modelo sólido,
como por ejemplo en la siguiente pregunta: ¿cuál es el efecto del proceso de fabricación aplicado a este objeto? Obviamente, es importante que un sistema de Modelado Geométrico incluya la posibilidad de modelar no sólo objetos físicos, sino también los efectos de aplicar sobre ellos procesos físicos. El sistema de modelado también debería ser capaz de realizar iteraciones, realizando operaciones sobre los resultados obtenidos al hacer operaciones similares anteriormente. Es decir, las operaciones disponibles en el sistema de modelado deben formar un sistema cerrado donde se garantice que todas las operaciones mantengan la corrección de los modelos generados en las operaciones anteriores.

Las \textbf{ventajas prácticas del modelado sólido} son:
\begin{itemize}
    \item Agiliza el desarrollo y los detalles del diseño.
    \item Mejora la visualización y la comunicación.
    \item Elimina los problemas de interferencias del diseño.
    \item Comprueba la funcionalidad y el rendimiento del diseño (sin la necesidad de prototipos físicos).
    \item Proporciona de forma automática las características topológicas para la fabricación digital, necesarias al programar maquinas herramienta de CNC, impresoras 3D, etc.
\end{itemize}
 


\begin{figure}[h]
\includegraphics[width=10cm]{Img/GEO/geo-modelado0.jpg}
\centering
\caption{\textbf{\footnotesize{Estructura de subconjuntos en el Modelado}}}
\end{figure}


\subsection{Historia del Modelado Sólido }
Las universidades de Hokkaido y Cambridge desarrollaron los primeros sistemas gráficos basados en esquemas de Modelado Sólido: TIPS y BUILD \citep{Toriya:1993:CPA:562297}, respectivamente. Fueron presentados en Budapest en el año 1973, demostrando su superioridad sobre cualquier otro sistema de Modelado Geométrico.
TIPS utiliza figuras básicas o primitivas\footnote{ Las formas geométricas se consideradas primitivas por su básica constitución en las partes que la conforman por ejemplo cubo, cono, esfera.} y operaciones booleanas\footnote{Las operaciones booleanas se basan en los modelos que se estudian con el álgebra de Boole, se utilizan conceptos de suma, resta, intersección, etc. para el modelado de sólidos.} para definir sólidos en 3D. Esta técnica se conoce actualmente como Geometría Constructiva de Sólidos en inglés \textit{Constructive Solid Geometry} (CSG), también llamado \textbf{Modelado Booleano}.
BUILD define los objetos como un conjunto de superficies, más la información topológica que las relaciona (cómo se conectan las caras, aristas y vértices). Hoy se conoce esta técnica como la \textbf{Representación por Fronteras} en inglés \textit{Boundary Representation} (B-Rep).
Desde entonces han surgido otros modeladores, pero la gran mayoría usan conceptos de los dos anteriores o incluso de ambos (Modeladores Híbridos).
En 1977 se desarrolló en la universidad de Rochester (Estados Unidos) el sistema gráfico PADL-1 \citep{Toriya:1993:CPA:562297}, que utiliza CSG para definir los objetos, pero que puede convertir automáticamente las representaciones a B-Rep. La conversión en sentido contrario presenta muchos problemas. 

\begin{figure}[h]
\includegraphics[width=16cm]{Img/GEO/geo-padl.jpg}
\centering
\caption{\textbf{\footnotesize{Ejemplo de modelado con PADL-1}}}
\end{figure}

\clearpage
\subsection{Problemas del Modelado Sólido }
\label{sectionproblema}

El requerimiento de aplicabilidad general de los modelos sólidos implica la necesidad de que sean completos y exactos. Conseguir esto resulta problemático.
A continuación se explican los puntos más conflictivos: 

\subsubsection{1. Completitud}

En general, los modelos gráficos 2D no sirven para el Modelado Sólido, porque evidentemente no se puede responder algorítmicamente a todas las preguntas geométricas en 3D a partir de dibujos realizados en 2D.
Los modelos gráficos bidimensionales pueden ser transformados en modelos tridimensionales, añadiendo la información de la tercera coordenada.
De esta forma se obtiene una representación de sólidos conocida normalmente como \textbf{modelo alámbrico} \footnote{Los modelos alámbricos se caracterizan por no disponer de superficies, sólo constan de puntos, líneas y curvas con las que se describen los lados de los objetos.} en inglés \textit{wireframe model}. Con el modelo alámbrico es posible almacenar un solo modelo tridimensional, y generar todas las vistas bidimensionales a partir de él, superándose de esta manera los problemas planteados por los modelos gráficos en 2D.
Sin embargo, un grupo de líneas tridimensionales no es suficiente para representar una figura ya que, en ocasiones, se pueden dar varias interpretaciones.
Un ejemplo común es mostrado en la figura \ref{fig:problema0}.

\begin{figure}[h]
\includegraphics[width=6cm]{Img/GEO/geo-problema.jpg}
\centering
\caption{\textbf{\footnotesize{posibles interpretaciones de un modelo gráfico ambiguo. }}}
\label{fig:problema0}
\end{figure}

\vskip
Otro problema que plantean los modelos alámbricos es que permiten el diseño de objetos que no pueden ser creados como objetos 3D reales, según se muestra a continuación. 
\begin{figure}[h]
\includegraphics[width=8cm]{Img/GEO/geo-problema1.png}
\centering
\caption{\textbf{\footnotesize{posibles interpretaciones de un modelo gráfico ambiguo. }}}
\end{figure}

\vskip
Otra deficiencia de los modelos alámbricos es la falta de contorno o información de perfil para las superficies supuestas entre las aristas alámbricas.

\begin{figure}[h]
\includegraphics[width=10cm]{Img/GEO/geo-problema2.png}
\centering
\caption{\textbf{ \footnotesize{información de contorno perdida. }}}
\end{figure}



\subsubsection {Integridad}

Para resolver el problema de eliminar líneas y superficies ocultas, normalmente
se reemplazan los modelos gráficos por \textit{modelos poliédricos}\footnote{Un modelo poliédrico es un modelo geométrico cuyas caras son planas y encierran un volumen finito.} Estos modelos proporcionan la suficiente información para identificar las partes de los objetos que quedan ocultas al observador. Se construyen a partir de primitivas bidimensionales (polígonos) en vez de sólo líneas.\vskip
Al remplazar líneas por polígonos aparecen nuevos problemas. Normalmente,los algoritmos de eliminación de líneas ocultas asumen que los polígonos no intersequen entre sí, excepto en los vértices y aristas comunes.
Obviamente, un modelo poliédrico no puede incluir polígonos con intersecciones entre ellos, pues la superficie del objeto tendría intersecciones consigo misma. Por lo tanto, sólo se considerarán válidos a aquellos modelos poliédricos con polígonos sin intersecciones mutuas. Pero ¿cómo asegurarse de que los modelos cumplen este criterio?\vskip
El comprobar que el Modelado Sólido cumple este u otros requisitos preserva la \textit{integridad} del modelo, evitando la generación de modelos incorrectos.
Sin embargo, la comprobación de la integridad de los modelos trae consigo una disminución en la facilidad de uso y flexibilidad de los sistemas de modelado. 

\subsubsection{Complejidad y cobertura geométrica} El problema de la integridad está relacionado con otro: la \textbf{complejidad} en la generación de un modelo poliédrico. Incluso objetos relativamente simples requieren más de cien polígonos; generar toda esa información a mano es complicado, tedioso y propenso a errores.
La \textbf{cobertura geométrica} de un modelo poliédrico no es suficiente para tareas que requieren un modelado exacto de superficies curvas (como la carrocería de un coche), motivo por el cual se han desarrollado diferentes métodos para manejar formas complejas. 

\clearpage

\subsection{Fundamentos del Modelado Sólido }
Un sistema de Modelado Sólido maneja dos tipos de información: los \textbf{datos geométricos} y \textbf{los datos topológicos}. \textquote{\textit{Los datos geométricos son aquellos que representan geométricamente los objetos (coordenadas de vértices, ecuaciones de superficies...). En cambio, los topológicos se refieren a cómo conectar componentes geométricos para conseguir un modelo}}. \citep{Ramos2011}A continuación se desarrollan algunos fundamentos (en 2D y 3D), que sirven principalmente para validar la integridad de los modelos.

\subsubsection{Teorema del camino cerrado }
El giro total a lo largo de un camino cerrado es un entero múltiplo de 360°. Este entero se conoce como número de rotaciones (\textbf{Nr}) del camino. El valor de Nr es independiente de dónde se comience el recorrido del camino y de cómo esté orientado.

\begin{figure}[h]
\includegraphics[width=10cm]{Img/GEO/geo-NR.jpg}
\centering
\caption{\textbf{\footnotesize{Ejemplo de caminos cerrados con valores de Nr diferentes. Nr=1, Nr=2 y Nr=4 respectivamente. }}}
\end{figure}

\subsubsection{Teorema del camino cerrado simple }
\textquote{\textit{Un camino cerrado simple es aquél que no se corta a sí mismo}} \citep{Ramos2011}.\vskip
El teorema del camino cerrado simple dice que el giro total en un camino cerrado que no se corte a sí mismo es $\pm 360^\circ$. En otras palabras, el número de rotación Nr de un camino cerrado simple es $\pm1$.

\begin{figure}[h]
\includegraphics[width=8cm]{Img/GEO/geo-caminos.jpg}
\centering
\caption{\textbf{\footnotesize{La suma de los ángulos de giro en un camino cerrado simple es $\pm 360^\circ$}}}
\end{figure}

Por ejemplo, en el triángulo de la figura anterior, siendo $\theta_1, \theta_2$, y  $\theta_3$ sus ángulos internos, la suma de los ángulos de giro es:

\begin{equation}
(180^\circ - \theta_1) + (180^\circ - \theta_2 ) + (180^\circ - \theta_3) = 3\cdot180 - ( \theta_1 + \theta_2 + \theta_3) = 540 -180 = 360^\circ
\end{equation}

La suma de los ángulos interiores de un triángulo (en la geometría euclidiana) es siempre $180^\circ$.\vskip
La importancia del teorema anterior en modelado radica en que es relativamente fácil medir los giros de los camino cerrados (ej., los ángulos de los polígonos), aplicando métodos locales. De este modo, si al finalizar el recorrido de un camino cerrado (aristas de un polígono) el acumulado final del giro es diferente a $360^\circ$ podemos asegurar que el modelo no es íntegro (está mal construido), ya que uno de sus polígonos se autointerseca, como ocurre en el ejemplo de la figura 3.9.

\begin{figure}[h]
\includegraphics[width=6cm]{Img/GEO/geo-caminon.jpg}
\centering
\caption{\textbf{\footnotesize{La suma de los ángulos de giro en un camino cerrado no simple es diferente de $\pm 360^\circ$}}}
\end{figure}

\clearpage
\subsubsection{ Deformación de curvas y planos }

\textquote{\textit{El teorema de deformación de curvas y planos dice que cualquier curva cerrada simple de un plano se puede transformar mediante una isotopía de ambiente en un cuadrado}} \citep{Ramos2011}.\vskip
En 1936, H.Whitney y W.C.Graustein observaron que dos caminos cerrados coplanarios\footnote{En geometría, un conjunto de puntos en el espacio es coplanario si todos los puntos se encuentran en el mismo plano.} pueden transformarse el uno en el otro sólo si tienen el mismo giro total. Este resultado junto con el teorema anterior se puede utilizar para probar el teorema del camino cerrado simple: por una parte, cualquier curva cerrada simple en un plano se puede transformar en un cuadrado, y además, un camino cerrado sólo puede transformarse en otro si tiene el mismo giro total. Entonces se puede deducir que cualquier camino cerrado simple tiene el mismo giro total que un cuadrado, es decir, $\pm 360^\circ$, con lo que se demuestra el teorema.\vskip
Las transformaciones pueden ser de dos tipos:

\begin{itemize}
\item \textbf{Homotopía regular}. Es una deformación que produce cambios en el camino.
\item \textbf{Isotopía de ambiente}. Suponiendo un camino dibujado sobre una lámina de goma. Si se estira o encoge la lámina por diferentes puntos, se puede conseguir que varíe la trayectoria del camino, o sea, una isotopía de ambiente o transformación de hoja de goma.
\end{itemize}

La homotopía regular es más drástica (no conservadora) que la isotopía de ambiente (conservadora), ya que puede crear o eliminar puntos de corte, cosa que no hace esta última. De hecho, una isotopía de ambiente es un caso especial de la homotopía regular, en la que no se añaden ni eliminan puntos de corte.


\begin{figure}[h]
\includegraphics[width=14cm]{Img/GEO/geo-goma.jpg}
\centering
\caption{\textbf{\footnotesize{Deformación conservadora en una hoja de goma. Se puede  observar a partir de la imagen de la izquierda como mediante la deformación de la hoja de goma se logra que varíe la trayectoria del camino.}}}
\end{figure}


\subsubsection{Teorema de la curva de Jordan }
Se deduce del teorema de deformación de curvas y planos y dice que \textquote{\textit{cualquier curva cerrada simple en un plano, divide a éste en dos regiones: una interior y otra exterior}} \citep{Ramos2011}. Da igual de qué curva cerrada simple se trate, pues siempre va a dividir al plano en una parte interior a la curva y otra exterior. Este teorema es válido sólo para curvas que estén en superficies planas, ya que podemos trazar una curva cerrada simple en un toro\footnote{Un toro o toroide es una superficie de revolución generada por una circunferencia que gira alrededor de una recta exterior coplanaria. Muchos objetos cotidianos tienen forma de toro: un dónut, una rosquilla, una cámara de neumático, etc.}, por ejemplo, y no dividirlo en dos regiones.
El interior de la curva es deformable mediante una isotopía de ambiente y puede
transformarse en un cuadrado. Una región, plana o no, que pueda ser transformada mediante una isotopía de ambiente en un cuadrado se llama \textit{disco topológico} y se caracteriza porque no tiene huecos ni puntos aislados en él.

\subsubsection{Ángulo de Exceso }

\textquote{\textit{Se conoce como \textbf{ángulo de exceso} (o simplemente exceso), el ángulo de giro implícito a un camino cerrado trazado sobre una superficie. También se define como el giro que experimenta un puntero de referencia cuando es llevado alrededor de un camino cerrado}} \citep{Ramos2011}. El ángulo de exceso está íntimamente relacionado con la curvatura de las superficies.\vskip
El concepto sirve para generalizar el teorema del camino cerrado simple, de modo que también sea válido para caminos cerrados simples sobre superficies
curvas. La generalización de este teorema plantea que el giro total a lo largo de un camino cerrado simple, más el ángulo de exceso, debe ser igual a $360^\circ$, es decir, que:

\begin{equation}
 T+E=360   
\end{equation}

donde:

\begin{description}
\item T = Giro Total a lo largo del camino.
\item E = Ángulo de exceso a lo largo del camino.
\end{description}

Para aclarar este concepto obsérvese la figura siguiente

\begin{figure}[h]
\includegraphics[width=9cm]{Img/GEO/geo-curva.jpg}
\centering
\caption{\textbf{\footnotesize{Concepto de ángulo de exceso}}}
\label{fig:exceso}
\end{figure}

En la figura \ref{fig:exceso} se representa un cuadrante esférico. Suponiendo una persona comienza a recorrer desde el punto de inicio, con un puntero sobre la cabeza apuntando hacia el polo. Al llegar a éste, gira $90^\circ$ para volver al ecuador (obsérvese que sólo gira la persona, no el puntero, por lo que entre su nariz y el puntero hay un ángulo de $90^\circ$).
De vuelta en el ecuador, realiza otro giro de $90^\circ$ para regresar al punto de inicio (ahora
su nariz y el puntero están en direcciones opuestas). Una vez allí realiza otro giro de $90^\circ$ que lo dejará en la posición inicial.
Se puede ver que el giro total que ha realizado es de $90^\circ.3 = 270^\circ$ Luego $T = 270^\circ$. En cambio lo que ha girado el puntero (ángulo de exceso) es $E = 90^\circ$. Sumando ambas cantidades se obtiene $360^\circ$ que es lo que afirma el teorema.\vskip

\textquote{\textit{Cuanto más curva es la superficie mayor es el ángulo de exceso. Si la superficie es plana, el ángulo de exceso es cero.}}\vskip

\clearpage
\textbf{Propiedades del ángulo de exceso:} \vskip
\begin{itemize}
    \item Para un determinado camino, su ángulo de exceso es siempre el mismo, independientemente de donde comience el recorrido.
    \item El ángulo de exceso es aditivo. Así, el exceso de cualquier polígono es igual a la suma de los excesos de los sub-polígonos en que se subdivida.
\end{itemize}



\subsubsection{Curvatura total de las superficies }

\textquote{\textit{Para cualquier disco topológico en una superficie cualquiera, el exceso que se obtiene alrededor de su frontera es igual a la \textbf{curvatura total del interior}.
Como el exceso posee la propiedad aditiva, si se subdivide una superficie cualquiera en piezas o trozos poligonales, y para cada polígono se calcula el ángulo de exceso, la suma de los excesos de cada polígono se conoce como \textbf{curvatura total de la superficie}, y se representa por K.
La curvatura total es una constante topológica para todas las superficies cerradas}}\citep{Ramos2011}; por ejemplo, todas las esferas tienen la misma curvatura total.
Por tanto, se puede usar el ángulo de exceso para averiguar la curvatura total de un objeto, simplemente recorriendo caminos cerrados dibujados en la superficie y calculando sus ángulos de exceso.
\vskip

\vspace{5mm}

\vspace{5mm}
\textbf{Evaluación de la curvatura en los modelos 3D cerrados}\vskip
\textquote{\textit{Dos superficies cerradas son \textbf{topológicamente equivalentes} si es posible transformar una superficie en otra mediante transformaciones conservativas, es decir, deformaciones que no rompan o corten la superficie}} \citep{Ramos2011}. Por ejemplo, un cubo y una esfera son topológicamente equivalentes, ya que es posible (al menos mentalmente) transformar progresivamente el cubo hasta convertirlo en una esfera, y viceversa. En cambio, el toro y la esfera no lo son, ya que no es posible obtener un toro a partir de una esfera sin romper (rasgar) la superficie de ésta.
\textquote{\textit{Todos los objetos cerrados que son topológicamente equivalentes poseen la misma curvatura.}}


\vspace{5mm}
\textbf{A) Esferas, toros y asas}

\textquote{\textit{Se puede calcular la curvatura total de los objetos de diferentes familias topológicas, a partir de la curvatura total de estos tres tipos de objetos: \textbf{esferas, toros y asas}}} \citep{Ramos2011}.
Según vimos, el exceso de un cuadrante esférico es de $90^\circ$, o lo que es igual, su curvatura es de $\pi/2$. Como todos los cuadrantes son iguales, la curvatura total de la semiesfera es $2\pi$; por tanto, la curvatura total de la esfera será de $4\phi$ $(K = 4\pi)$.
Por otro lado, aunque no se incluya la demostración, un toro (un donut o rosquilla) tiene una curvatura total 0 $(K = 0)$, lo que no implica que el toro sea plano, sino que tiene tanta curvatura positiva como negativa.\vskip
Un toro, topológicamente hablando, puede considerarse como una esfera con un asa.
El proceso de añadir asas a las esferas no es una deformación topológica conservativa, ya que se ha de cortar la superficie de éstas, para pegar las asas. Esto implica que el objeto original y el resultante (después de añadir las asas) no son topológicamente equivalentes.\vskip
Para construir un toro a partir de una esfera se procede de la siguiente manera: primero se achatan (aplanan) dos regiones circulares en la esfera. De cada región se recorta un disco liso. A continuación se pega (o cose) un asa en los huecos dejados por los discos; el asa es un cilindro hueco (tubo) y sus aristas deben hacerse coincidir con los bordes de los discos recortados. El resultado obtenido es un toro como se muestra en la figura \ref{fig:toro}.

\begin{figure}[h]
\includegraphics[width=15cm]{Img/GEO/geo-asa.jpg}
\centering
\caption{\textbf{\footnotesize{Construcción de un Toro a partir de una Esfera}}}
\label{fig:toro}
\end{figure}

En otras palabras:\vskip 
\begin{equation}
esfera - 2discos + asa = toro
\label{eq:toro}
\end{equation}
Para calcular la curvatura total del asa, en la \ref{eq:toro} se sustituyen los objetos por su curvatura correspondiente $(4\pi \ – \ 2\cdot0 + K_{asa} = 0)$ obteniéndose que la curvatura del asa es $–4\pi$. Por lo tanto, se observa que al añadir asas a cualquier superficie, la curvatura total de dicha superficie disminuye en $4\pi$. Además, también se puede observar que un toro con dos agujeros es topológicamente equivalente a un toro con un asa y a una esfera con dos asas.
En general, para una superficie topológicamente equivalente a una esfera con $g$ asas, la curvatura total es
\begin{equation}
K_{esfera \ con \ g  \ asas} = 4_{\pi}(1 - g)
\label{eq:toro1}
\end{equation}

\begin{figure}[h]
\includegraphics[width=14cm]{Img/GEO/geo-toro.jpg}
\centering
\caption{\textbf{\footnotesize{Equivalente topológico a una esfera con tres asas}}}
\label{fig:toro1}
\end{figure}

$``g”$ se conoce como \textbf{orden o grado del objeto} y también como \textbf{orden de la superficie}.
La importancia de esto es que cualquier superficie cerrada tridimensional que no se corte a si misma es topológicamente equivalente a una esfera con $g$ asas. Por ejemplo, una superficie como la mostrada en la figura \ref{fig:toro1}
es topológicamente equivalente a una esfera con 3 asas.
De la \ref{eq:toro1} se deduce que \textquote{\textit{la curvatura total de una superficie cerrada en el espacio tridimensional es un múltiplo de $4\pi$}}. Esta afirmación no es otra cosa que la \textbf{versión 3D del teorema del camino cerrado}, o bien, del teorema de camino cerrado simple si $g = 0$. Esta característica topológica de las superficies cerradas es muy útil para la construcción y la validación de la integridad de los modelos con estructura compleja, ya que normalmente se conoce la familia topológica $(g)$ del objeto modelado. Para ello se compara la curvatura
calculada con la indicada por la \ref{eq:toro}. Si se desconoce $g$, al menos es posible verificar que su curvatura sea un múltiplo de $4\pi$.

\subsection{Representación de Modelos Sólidos}

\subsubsection{Estudio de los modelos de caras planas o poliedros }
\label{sectionpoliedro}

El estudio de los modelos de caras planas tiene una importancia especial debido a que muchos esquemas de representación usan poliedros y la topología asociada a los mismos.
\textquote{\textit{Por \textbf{poliedro} (poli- muchos, edro- cara) entendemos una disposición de polígonos de forma que solamente dos polígonos se unen en una arista, formando el conjunto de polígonos una superficie cerrada}} \citep{Ramos2011}. Además, es posible recorrer la superficie del poliedro siguiendo sus aristas.

\begin{figure}[h]
\includegraphics[width=12cm]{Img/GEO/geo-vertex.jpg}
\centering
\caption{\textbf{\footnotesize{Caras, aristas y vértices en 2 poliedros diferentes (prisma rectangular y tetraedro)}}}
\end{figure}


\textbf{Características topológicas de los poliedros}
Conocer las características topológicas de los poliedros es importante para la construcción de los modelos y especialmente para su validación. A continuación se estudian los tipos de poliedros más importantes para el modelado y sus propiedades topológicas.

\begin{description}
 \item \textbf{a) Poliedros simples}\vskip
    \textquote{\textit{Un \textbf{poliedro simple} es aquél que puede ser transformado de forma continua en una esfera, o sea, que es topológicamente equivalente a una esfera $(g = 0)$}} \citep{Ramos2011}.\vskip
    Los poliedros regulares forman un subconjunto de los poliedros simples, cuya característica principal es que todas sus caras (polígonos) son iguales.
    
    \begin{description}
    \item i. \textbf{Fórmula de Euler para los poliedros simples}\vskip
    Para un poliedro simple se cumple que el número de vértices, menos el número de aristas, más el número de caras es 2, es decir:

    \begin{equation}
    V - A  +  C = 2
    \end{equation}
    
    Según esta fórmula, se puede demostrar que sólo hay 5 poliedros regulares: tetraedro, hexaedro o cubo, octaedro, dodecaedro e icosaedro.
    \item ii. \textbf{Fórmula de Euler-Poincaré}\vskip
    Poincaré\footnote{Jules Henri Poincaré fue un prestigioso polímata: matemático, físico, científico teórico y filósofo de la ciencia. En 1894 estableció el grupo fundamental de un espacio topológico.} generalizó la fórmula de Euler para el espacio n-dimensional. En lugar de puntos, aristas y caras, él definió elementos de $0, 1, ..., n-1$ dimensiones. A cada uno de estos elementos lo llamó, $N_0, N_1,..., N_{n}-1$, respectivamente, y expresó la fórmula de Euler como:
    
    \begin{equation}
    N_0 - N_1 + N_2 - ... = 1-(-1)^n
    \end{equation}
    
    Para $n = 3$ se obtiene la fórmula de Euler. 
    \end{description}
    
    \item \textbf{b) Poliedros no simples. Número de conectividad y de orden}\vskip
    \textquote{\textit{Los \textbf{poliedros no simples} son los equivalentes topológicos de cualquier objeto sólido con huecos, por lo que son muy útiles en el Modelado Sólido}} \citep{Ramos2011}. En la figura \ref{fig:polino} hay algunos ejemplos de poliedros no simples.
    
    \begin{figure}[h]
    \includegraphics[width=8cm]{Img/GEO/geo-nosimples.jpg}
    \centering
    \caption{\textbf{\footnotesize{ejemplos de poliedros no simples. No se pueden transformar en una esfera}}}
    \label{fig:polino}
    \end{figure}
    
    Para proceder a la clasificación de los poliedros se recurre al concepto de \textbf{número de conectividad (n)}. Si la superficie de un poliedro se puede dividir en dos regiones separadas mediante un camino cerrado trazado a lo largo de sus aristas, decimos que tiene conectividad $n = 0$. Esto es así porque una esfera se puede dividir en dos partes, por cualquier camino cerrado que tracemos sobre su superficie. Se considera que la conectividad de la esfera es 0 $(n = 0)$.\vskip
    De esto se obtiene un resultado: \textquote{\textit{cualquier poliedro cuya conectividad sea 0 puede ser transformado en una esfera}}. En la figura \ref{fig:polino} hay caminos cerrados que no dividen a la superficie del poliedro en dos partes separadas. A estos poliedros se les asigna un número de conectividad mayor que 0.
    Formalmente \textquote{\textit{se define el \textbf{número de conectividad} como el máximo número de bucles distintos con o sin puntos comunes (intersecciones) que se puedan trazar sobre un poliedro, sin que se divida su superficie en dos regiones separadas}}\citep{Ramos2011}.
    Se puede generalizar la fórmula de Euler a poliedros de cualquier número de conectividad n:
    
    \begin{equation}
    V - A + C = 2 - n
    \end{equation}
    
    Asimismo, se define el grado $``g”$ de un poliedro de la misma forma que su número de conectividad, pero sin que los bucles se intersequen. La ecuación de Euler, generalizada a poliedros de cualquier grado g es:
    
    \begin{equation}
    V - A + C = 2 - 2g
    \end{equation}
    
    de donde se deduce que $2g = n$.
    Estas fórmulas son útiles porque partiendo del número de aristas, vértices y caras del poliedro, se puede saber su número de conectividad y el grado
    
    \begin{equation*}
     n = -V + A - C + 2 
    \end{equation*}
    
    \begin{equation}
     g = \frac{(-V + A - C + 2)}{2}
    \end{equation}
    
    
    De este modo se sabe si los poliedros equivalen topológicamente a una esfera, a un toro, etc.
\end{description}


\textbf{Curvatura de los modelos poliédricos}\vskip
\textquote{\textit{Toda la curvatura de las superficies de caras planas se concentra en los vértices, lo que facilita el cálculo la \textbf{curvatura total} \textbf{(K)}. Sólo necesitamos sumar el ángulo de exceso de los pequeños caminos alrededor de cada vértice}} \citep{Ramos2011}, es decir,

\begin{equation}
K = \sum_{i=1}^{v}E_{i}
\end{equation}

donde $E_i$ es el exceso del camino alrededor del vértice $i$, y $v$ el número de vértices del poliedro.
Recordando que $T + E = 2\pi$ la ecuación anterior queda:

\begin{equation}
K = \sum_{i=1}^{v}(2\pi - T_i)
\end{equation}

donde $T_i$ es el total del camino alrededor del vértice $i$. Sacando el $2\pi$ fuera del sumatorio se tiene

\begin{equation}
K = 2\pi V - \sum_{i=1}^{v}( T_i)
\end{equation}

Teniendo en cuenta que el giro total del camino alrededor del vértice $i$ $(Ti)$ es igual a la suma de todos los ángulo interiores de dicho vértice, la expresión anterior se puede expresar más claramente si se agrupan los ángulos interiores por caras, aprovechando la propiedad asociativa de la suma.

\begin{equation}
\label{eq:poli}
K = 2\pi V - \sum_{i=1}^{C}C_i
\end{equation}

donde $ci$ es la suma de los ángulos interiores de la cara $i$ y $C$ es el total de caras del poliedro.
Este es un resultado sorprendente porque podemos calcular el segundo término sin saber cómo están unidas las distintas aristas. Por tanto, si conocemos todas las caras del poliedro y conocemos $V$, podemos calcular la curvatura total sin saber nada sobre las relaciones entre las aristas y las caras.\vskip
Para poliedros cuyas caras sean cuadrados la fórmula es todavía más simple, ya que la suma de los ángulos interiores de cualquier cara es $2\pi$.\vskip 
Por lo tanto, $K = 2\pi V - 2\pi C$ ó $K = 2\pi (V - C)$. Ver que esta ecuación para calcular la curvatura total no depende de los ángulos.
La expresión anterior aún se puede generalizar más. Partiendo de la \ref{eq:poli}, se puede demostrar que la suma
$\sum_{i=1}^{C}C_{i}$ puede expresarse independientemente de los valores particulares de los ángulos; solamente se necesita conocer el número total de caras, vértices y aristas. Según esto, para una superficie de caras planas cerrada con $V$ vértices, $A$ aristas y $C$ caras, la \textit{curvatura total} es 

\begin{equation}
K = 2\pi (V - A + C)
\end{equation}

A la cantidad $(V - A + C)$ se le llama \textbf{característica de Euler} de una superficie y se denota con la letra griega
$\chi$ (chi). Usando esta notación, se reescribe la fórmula de la curvatura como

\begin{equation}
\label{eq:chi}
K = 2\pi \chi
\end{equation}

La \ref{eq:chi} muestra que, para cualquier superficie cerrada, la curvatura total y la característica de Euler están relacionadas. Esto constituye el \textbf{teorema de Gauss-Bonnet}, y puede ser aplicado a todo tipo de superficies cerradas, no sólo a las de caras planas, ya que la característica de Euler es una constante topológica al igual que a curvatura total. Este teorema es de suma importancia para la validación de las redes trazadas sobre superficies cerradas: \textquote{\textit{todas las infinitas redes diferentes que son posibles de trazar sobre una superficie cerrada poseen la misma característica de Euler}} \citep{Ramos2011}.
Este teorema proporciona resultados muy importantes, ya que además de ser un medio muy útil para poder calcular la curvatura total de las superficies cerradas, da una relación entre una cantidad definida en términos topológicos, como es la característica de Euler, con otra definida en términos geométricos, como es la curvatura total.

\clearpage
\textbf{Representación topológica de los poliedros.}\vskip
Uno de los puntos clave en el modelado con poliedros es cómo se ha de registrar su información topológica, es decir, las relaciones entre los vértices, aristas y caras que los definen.
La forma más simple y directa para representar los poliedros consiste en describir cada cara por separado, señalando explícitamente cómo han de unirse. Este método de representación se conoce como \textbf{atlas}. La figura \ref{fig:atlascubo} muestra el atlas de un cubo.

\begin{figure}[h]
\includegraphics[width=8cm]{Img/GEO/geo-atlas0.jpg}
\centering
\caption{\textbf{\footnotesize{atlas de un cubo}}}
\label{fig:atlascubo}
\end{figure}

Cada eje se etiqueta con un par de números indicando la cara y el número de la arista de la cara. Así el par (1,0) se interpreta como la arista 0 de la cara 1. Cada unión de dos aristas se especificará por dos pares de números, identificando las aristas que se unen. De esta forma, el atlas formado queda como siguiente:


$$
\begin{array}{c@{}c@{}c@{}c}
 \begin{array}{cc}
         [(1,0) & (2,0)]
  \end{array} & \begin{array}{cc}
         [(1,1) & (5,0)]
  \end{array} & \begin{array}{cc}
         [(1,2) & (4,0)]
  \end{array} &
  \begin{array}{cc}
         [(1,3) & (3,0)] 
  \end{array}
  \\
  \begin{array}{cc}
         [(2,1) & (3,3)]
  \end{array} & \begin{array}{cc}
         [(2,3) & (6,2)]
  \end{array} & \begin{array}{cc}
         [(2,3) & (5,1)] 
  \end{array} &
  \begin{array}{cc}
         [(3,1) & (4,3)]
  \end{array}
  \\
  \begin{array}{cc}
         [(3,2) & (6,3)]
  \end{array} & \begin{array}{cc}
         [(4,1) & (5,3)]
  \end{array} & \begin{array}{cc}
         [(4,2) & (6,0)] 
  \end{array} &
  \begin{array}{cc}
         [(5,2) & (6,1)] 
  \end{array}
\end{array}
$$   

\begin{center}
\textbf{\footnotesize{representación matricial del atlas}}
\end{center}

Además de especificar qué aristas están unidas, se ha de decir cómo unirlas. La figura \ref{fig:atlas0} muestra dos formas diferentes de unir un par de aristas. La primera, mostrada a la izquierda, es la unión con \textbf{orientación conservadora}, y la segunda tiene \textbf{orientación inversora}. Para unir esas dos aristas hay que hacer coincidir los números de cada una de ellas. Si se hace mediante la orientación conservadora se obtiene un cilindro y una \textbf{cinta de Moebius}\footnote{La cinta de Möbius o Moebius es una superficie con una sola cara y un solo borde. Tiene la propiedad matemática de ser un objeto no orientable.} con la orientación inversora.

\begin{figure}[h]
\includegraphics[width=6cm]{Img/GEO/geo-atlas1.jpg}
\centering
\caption{\textbf{\footnotesize{orientaciones conservadora e inversora}}}
\label{fig:atlas0}
\end{figure}

Para especificar en el atlas de qué forma se van a unir las aristas, se utiliza la \textbf{paridad de transición} que es $\pm 1$, unida al par de aristas. La figura \ref{fig:atlas1} presenta varios ejemplos de un esquema de notación que incluye el número de paridad de transición.

\begin{figure}[h]
\includegraphics[width=10cm]{Img/GEO/geo-atlas2.jpg}
\centering
\caption{\textbf{\footnotesize{atlas y paridad de transición de una esfera (izquierda), un toro (derecha) y una botella de Klein (abajo).}}}
\label{fig:atlas1}
\end{figure}

\vspace{5mm}
\textbf{Superficies Orientables y No Orientables} \vskip
Si utilizamos uniones no conservadoras en un atlas podemos conseguir algunas curiosidades matemáticas llamadas \textit{superficies no orientables}, como la \textbf{cinta de Moebius} y la \textbf{botella de Klein}\footnote{En topología, una botella de Klein es una superficie no orientable abierta cuya característica de Euler es igual a 0 ; no tiene interior ni exterior.} (ver figura \ref{fig:atlas2}). La cinta de Moebius posee una curiosa particularidad. Si se recorre la cinta comenzando en un punto cualquiera, y se da una vuelta completa, como se trata de una cinta bidimensional, cuando se llegue al punto de partida se observará que la derecha e izquierda están intercambiadas. Este tipo de superficies se llaman \textbf{no orientables} y se producen al efectuar uniones no conservadoras entre sus aristas. Por el contrario, si en la superficie nunca se intercambian la izquierda y derecha, entonces se dice que la superficie es \textbf{orientable}.

\begin{figure}[h]
\includegraphics[width=10cm]{Img/GEO/geo-mobius.jpg}
\centering
\caption{\textbf{\footnotesize{Cinta de Moebius y Botella de Klein}}}
\label{fig:atlas2}
\end{figure}

\textquote{\textit{Habíamos visto que para que cualquier superficie cerrada tridimensional sea consistente, debe ser topológicamente equivalente a una esfera con ``$g$ asas''. Ahora se añade otra condición más: \textbf{debe ser orientable}}} \citep{Ramos2011}.\vskip
Si se parte de una cinta de Moebius y se cierra aplicando una orientación conservadora, se obtiene otra superficie no orientable llamada botella de Klein, que no se puede construir en un espacio tridimensional sin que se auto interseque.

\clearpage
\subsubsection{ Objetos de Euler }
\textquote{\textit{A los objetos cerrados tridimensionales de orden $g \geq 0 $ que verifican ciertos
requisitos de construcción, se les denomina objetos de Euler}} \citep{Ramos2011}. Dichas normas son:

\begin{itemize}
\item Todas sus caras (curvas o planas) han de ser discos topológicos. 
\item Cada arista une sólo dos caras y todas finalizan en un vértice en
cada extremo.
\item Por lo menos tres aristas se unen en un vértice. 
\end{itemize}

En los objetos de Euler se cumple que:


\begin{equation}
V - A + C  = 2(S-P)
\end{equation}

\begin{description}
\item $S$: número de superficies inconexas del objeto.
\item $P$: total de pasajes (túneles) en el objeto.
\end{description}

Como el número de pasajes en un objeto es igual al total de ``asas” o agujeros que posea, ocurre que en la ecuación anterior $P$ es igual al orden del objeto $(P = g)$.\vskip
Para entender mejor el significado de $S$, la figura \ref{fig:euler} muestra tres objetos eulerianos, con una, dos y tres superficies inconexas.

\begin{figure}[h]
\includegraphics[width=12cm]{Img/GEO/geo-euler0.jpg}
\centering
\caption{\textbf{\footnotesize{Objetos de Euler con diferentes valores de $S$}}}
\label{fig:euler}
\end{figure}

En la figura \ref{fig:euler1} se pueden ver algunos ejemplos de objetos eulerianos, cuando $S = 1$ y $P = 0$. Ver que en este caso la Ec. 16 se reduce a la ecuación de Euler.

\begin{figure}[h]
\includegraphics[width=14cm]{Img/GEO/geo-euler1.jpg}
\centering
\caption{\textbf{{Ejemplos de objetos de Euler}}}
\label{fig:euler1}
\end{figure}


En la figura \ref{fig:euler2} hay otros dos objetos de Euler. El izquierdo es de grado 1, ya que tiene un túnel que lo cruza; el otro, aunque posee una cavidad, ésta no llega a atravesar el modelo. Por tanto, se trata de un objeto topológicamente equivalente a una esfera, es decir, de grado 0.

\begin{figure}[h]
\includegraphics[width=8cm]{Img/GEO/geo-euler2.jpg}
\centering
\caption{\textbf{\footnotesize{Objetos eulerianos de grado 1 y 0, respectivamente}}}
\label{fig:euler2}
\end{figure}

\vspace{5mm}
\textbf{Operadores de Euler.}\vskip
\textquote{\textit{Los \textbf{operadores de Euler} permiten crear y transformar objetos de Euler, en nuevos objetos (también eulerianos) mediante la adición o eliminación de caras, aristas y vértices}} \citep{Ramos2011}. Dichos operadores son especialmente útiles en la creación y transformación de los modelos poliédricos, ya que directamente generan modelos íntegros, lo que evita (o minimiza) la verificación de la integridad de los modelos. Los operadores de Euler trabajan directamente sobre las estructuras de datos que definen los objetos. Por lo tanto, \textbf{un operador de Euler es un proceso} que actúa sobre la base de datos donde está la información de los poliedros que ha de crear o transformar.\vskip
Durante la transformación de un objeto de Euler en otro objeto de Euler, \textbf{inevitablemente se producen objetos intermedios que no son de Euler}. Por ejemplo, en la figura \ref{fig:euler3} se pueden ver tres transformaciones realizadas con operadores de Euler. En el primer y segundo caso se han añadido las aristas y vértices suficientes para que los objetos resultantes sigan siendo de Euler. En el caso tercero, aunque cumple la ecuación de Euler, sin embargo, las aristas $(1,5)$ y $(2,5)$ no unen dos caras y, además, del vértice 5 no parten tres aristas, por lo que se trata de un objeto intermedio no euleriano. Éste puede convertirse en euleriano añadiendo dos nuevas aristas, la $(4,5)$ y la $(3,5)$.

\begin{figure}[h]
\includegraphics[width=12cm]{Img/GEO/geo-euler3.jpg}
\centering
\caption{\textbf{\footnotesize{Operaciones de Euler sobre un cubo.}}}
\label{fig:euler3}
\end{figure}

A base de añadir o eliminar aristas, vértices y caras, los operadores de Euler sólo pueden transformar los objetos de Euler en otros de la misma familia topológica. Si a partir de un objeto de grado g se pretende obtener otro de grado diferente, entonces no queda más remedio que agujerear alguna superficie (acordarse del proceso de pegado de asas) para poder construir un nuevo pasaje.\vskip
Por lo tanto, para poder cambiar el grado de los objetos, \textbf{los operadores de Euler incorporan la posibilidad de añadir o eliminar agujeros a los discos topológicos que configuran los objetos de Euler}. Al agregar un agujero en una cara, se crea un objeto intermedio donde se cumple que:

\begin{equation}
\label{fig:ecuacioneuler}
V - A + C - O  = 2(S-P)
\end{equation}

$``O”$ es el total de orificios (agujeros) en las caras. Ver que la ecuación de los objetos eulerianos es un caso particular de ésta, ya que entonces $O = 0$.\vskip
Los sumandos de la izquierda en la expresión $V - A + C  = 2(S-P)$ pueden ser modificados directamente en la estructura de datos, mientras que los de la derecha (S y P) no. Esto significa que si, por ejemplo, se desea transformar un objeto de Euler de modo que el objeto final resultante haya cambiado de familia topológica (variado $g$), es posible conseguirlo añadiendo o eliminando vértices, aristas, caras y/o agujeros en las caras, de forma que al final se cumpla que
$V^\prime - A^\prime + C^\prime - O^\prime  = 2(S^\prime-P^\prime)$

En el ejemplo de la figura \ref{fig:euler4}, se aprecia un objeto no euleriano con un agujero en una cara y su transformación en uno de Euler. Observar que el hecho de hacer agujeros en las caras, no implica necesariamente que el objeto euleriano resultante sea de grado diferente al del objeto original.

\begin{figure}[h]
\includegraphics[width=12cm]{Img/GEO/geo-euler4.jpg}
\centering
\caption{\textbf{\footnotesize{Transformación de un objeto no euleriano en otro de Euler.}}}
\label{fig:euler4}
\end{figure}

\vspace{5mm}
\textbf{Elección de los operadores de Euler}\vskip
Dado que interesa que los operadores de Euler sean capaces de cambiar el grado de los objetos, se utiliza la \ref{fig:ecuacioneuler} para establecer los criterios de elección de los operadores de Euler.\vskip
\textquote{\textit{Se ha demostrado que \textbf{no existe un conjunto de operadores de Euler que garantice la coherencia de los objetos intermedios}, es decir, que siempre se crearán objetos intermedios no eulerianos. Sin embargo, algunos operadores generan objetos intermedios más incoherentes que otros. Este hecho sirve como criterio de elección de los operadores de Euler. Así, \textbf{los operadores preferidos serán aquellos que generen objetos intermedios poco incoherentes}, es decir, que se desvíen lo mínimo posible de los objetos de Euler}} \citep{Ramos2011}.
Braid, Hillyard y Stroud \citep{trove.nla.gov.au/work/186367968} establecieron en 1978 un conjunto de 5 operadores básicos, con los cuales es posible efectuar cualquier transformación admisible. Estos operadores son:
\begin{description}
    \item \textbf{PAV}. Poner una arista y un vértice. 
    \item \textbf{PCA}. Poner una cara y una arista.
    \item \textbf{PSCV}. Poner una superficie, una cara y un vértice.
    \item \textbf{PPS}. Poner un pasaje y una superficie.
    \item \textbf{PA-EO}. Poner una arista y eliminar un agujero (orificio).
\end{description}  

Estos operadores a su vez tienen otros 5 operadores complementarios, que en vez de añadir, eliminan elementos:
\begin{description}
    \item \textbf{EAV}. Eliminar una arista y un vértice.
    \item \textbf{ECA}. Eliminar una cara y una arista.
    \item \textbf{ESCV}. Eliminar una superficie, una cara y un vértice.
    \item \textbf{EPS}. Eliminar un pasaje y una superficie.
    \item \textbf{EA-PO}. Eliminar una arista y poner un agujero (orificio).
\end{description}  
    
Los operadores anteriores poseen la propiedad de mantener balanceada la \ref{fig:ecuacioneuler}, es decir, la adición o eliminación de uno o varios elementos a un lado de la ecuación queda contrarrestada añadiendo o quitando los elementos necesarios en el otro lado. Por ejemplo, el operador $PSCV$ añade un vértice (+1) y una cara (+1) en el lado izquierdo de la \ref{fig:ecuacioneuler}, y esto lo contrarresta añadiendo una superficie, que está en el otro lado de la ecuación, y tiene peso 2. Por lo tanto, como se añaden 2 por la izquierda y otros dos por la derecha, la \ref{fig:ecuacioneuler} permanece balanceada.

\begin{center}
 \begin{tabular}{ c |c c c c c c} 
   \empty & V & A & C & O & 2S & 2P \\ 
   PAV & 1 & 1 & 0 & 0 & 0 & 0 \\
   \hline
   PCA & 0 & -1 & 1 & 0 & 0 & 0 \\
   PSCV & 1 & 0 & 1 & 0 & 1 & 0 \\
   PPS & 0 & 0 & 0 & 0 & 1 & 1 \\
   PA-EO & 1 & 0 & -1 & 0 & 0 & 0 \\
   \hline
   EAV & -1 & -1 & 0 & 0 & 0 & 0 \\
   ECA & 0 & -1 & -1 & 0 & 0 & 0 \\
   ESCV & -1 & 0 & -1 & 0 & -1 & 0 \\
   EPS & 0 & 0 & 0 & 0 & -1 & -1 \\
   EA-PO & 0 & -1 & 0 & 1 & 0 & 0 \\
\end{tabular}
\end{center}

\begin{center}
\caption{tabla 2: balance de los diferentes operadores de Euler}
\end{center}

De igual modo, el operador $PCA$ añade una cara (+1), que se contrarresta añadiendo una arista que, aunque está en el mismo lado de la ecuación, tiene signo opuesto (-1). En la tabla 2 se muestra el balanceado con respecto a la \ref{fig:ecuacioneuler}, de cada uno de los operadores de Euler vistos.\vskip
Veamos un ejemplo sobre una de las posibles secuencias de operadores de Euler para construir un tetraedro. Siendo V = 4, A = 6, C = 4, O = P = 0, y S = 1, la siguiente secuencia de operadores finaliza con la creación de un tetraedro:

\begin{center}
 \begin{tabular}{ c |c c c c c c} 
   \empty & V & -A & +C & -O & 2S & -2P \\ 
   \hline
   PSCV & 1 & 0 & 1 & 0 & 1 & 0 \\
   \hline
   PAV & 1 & 1 & 0 & 0 & 0 & 0 \\
   PAV & 1 & 1 & 0 & 0 & 0 & 0 \\
   PAV & 1 & 1 & 0 & 0 & 0 & 0 \\
   \hline
   PCA & 0 & 1 & 1 & 0 & 0 & 0 \\
   PCA & 0 & 1 & 1 & 0 & 0 & 0 \\
   PCA & 0 & 1 & 1 & 0 & 0 & 0 \\
\end{tabular}
\end{center}
\vskip
\begin{center}
\caption{secuencia de operadores de Euler para crear un tetraedro}
\end{center}

Cada uno de los procesos anteriores queda reflejado en la siguiente figura:
\begin{figure}[h]
\includegraphics[width=12cm]{Img/GEO/geo-euler5.jpg}
\centering
\caption{\textbf{\footnotesize{Construcción de un tetraedro mediante los operadores de Euler.}}}
\end{figure}

Vemos en el ejemplo que la fórmula de Euler está equilibrada en todo momento, aunque no se obtiene un sólido válido hasta después de haber realizado la última operación. El primer operador (el PSCV) se encarga de inicializar la estructura de datos, y añade un vértice, una cara e incrementa el contador de superficies. Como argumentos requiere las coordenadas del vértice y los parámetros que describen la cara (no sus aristas).

\subsubsection{Concepto de Frontera. }

\textquote{\textit{Si se tiene una región n-dimensional $R^n$ en un espacio n-dimensional $E^n$, sus puntos pueden ser clasificados como: los que están dentro de la región y los que están en su límite o \textbf{frontera} }} \citep{Ramos2011}. Por lo tanto, el conjunto de puntos de $R^n$ estará formado por el subconjunto de puntos interior $(iR)$, más el conjunto de los puntos de la frontera $(fR)$.

\begin{equation}
R = [iR, fR]
\end{equation}

Según lo anterior, cualquier punto en el espacio $E^n$, tiene la siguiente propiedad respecto a $R^n$:

\begin{itemize}
\item Pertenecer al interior de $R^n$, es decir a $iR$. 
\item Pertenecer a la frontera de $R^n$, es decir a $fR$.
\item No pertenecer a $R^n$. 
\end{itemize}


\begin{figure}[h]
\includegraphics[width=8cm]{Img/GEO/geo-frontera0.jpg}
\centering
\caption{\textbf{\footnotesize{objetos planos con sus puntos frontera e interiores.}}}
\end{figure}

\subsubsection{ Operadores Booleanos. }

Los objetos geométricos pueden considerarse como conjuntos de puntos, tanto de interior como de frontera. \textquote{\textit{En Modelado Sólido, para construir objetos complejos se utilizan operaciones entre conjuntos, tales como unión $(\cup)$, intersección $(\cap)$ y diferencia $(−)$. A estos operadores se les conoce en modelado como \textbf{operadores Booleanos}}} \citep{Ramos2011}. \vskip
Al aplicar los operadores booleanos sobre objetos simples para formar modelos más complejos, es importante que los modelos obtenidos sean íntegros (topológicamente válidos), y que además sean \textbf{dimensionalmente homogéneos}, es decir, que su dimensión sea igual a la de los objetos que se combinan. La figura \ref{fig:booleano0} muestra dos ejemplos donde se pierde la homogeneidad dimensional, después de efectuar la intersección entre objetos válidos de 2 y 3 dimensiones.


\begin{figure}[h]
\includegraphics[width=14cm]{Img/GEO/geo-booleano0.jpg}
\centering
\caption{\textbf{\footnotesize{Intersección que presenta un resultado degenerado.}}}
\label{fig:booleano0}
\end{figure}

lndependientemente de cómo se presenten los objetos, es necesario combinarlos para formar nuevos. Uno de los métodos más intuitivos y comunes para combinar objetos son las \textbf{operaciones booleanas de conjuntos}, como la unión, la diferencia y la intersección, ilustradas en la figura \ref{fig:booleano1}.

\begin{figure}[h]
\includegraphics[width=14cm]{Img/GEO/geo-booleano1.jpg}
\centering
\caption{\textbf{figura 3.11. \footnotesize{Operaciones booleanas Objetos $A \ y  \ B$, $A \cup B$, $A \cap B$, $A - B$, $B - A$}}}
\label{fig:booleano1}
\end{figure}


\vspace{5mm}
\textbf{Operadores booleanos regularizados }

La aplicación de una operación booleana ordinaria de conjuntos a dos objetos sólidos no necesariamente produce un objeto sólido. Por ejemplo, la intersección ordinaria de dos cubos que se unen en un solo vértice es un punto.\vskip
\textquote{\textit{Para evitar los resultados degenerados se utiliza el conjunto de los \textbf{operadores regularizados}, que preservan la homogeneidad dimensional}} \citep{Ramos2011}. Los operadores regularizados se denotan por $\cup^*$, $\cap^*$ y $-^*$ y se definen de manera que las operaciones con sólidos siempre generen sólidos.

\vspace{5mm}
\textbf{Intersección Regularizada ($\cap^{*}$)}

\begin{figure}[h]
\includegraphics[width=12cm]{Img/GEO/geo-booleano2.jpg}
\centering
\caption{\textbf{\footnotesize{Intersección no regularizada ($\cap$) y regularizada ($\cap^*$) de dos solidos.}}}
\end{figure}

Para comprender el proceso de regularización se analizan los objetos bidimensionales A y B de la figura \ref{fig:booleano2}, si realizamos la intersección no regularizada $(\cap)$ con dichos objetos, se obtiene un objeto que no es dimensionalmente homogéneo en su totalidad, pues contiene una ``arista colgante". El resultado deseado se obtiene mediante la intersección regularizada $(\cap^*)$ de A y B.


\begin{figure}[h]
\includegraphics[width=12cm]{Img/GEO/geo-booleano3.jpg}
\centering
\caption{\textbf{ \footnotesize{operador booleano de intersección no regularizado $(\cap)$ y el regularizado $(\cap^*)$.}}}
\label{fig:booleano2}
\end{figure}




Los objetos A y B se pueden representar como la unión de los subconjuntos de frontera e interior. Así:

\begin{equation}
   A = iA \cup fA \ \ \text{y} \ \ B = iB \cup fB
\end{equation}

Por tanto, es posible expresar la intersección no regularizada de A y B como:

\begin{equation}
C = A \cap B = (iA \cup fA) I (iB \cup fB)
\end{equation}

Aplicando la propiedad distributiva queda:

\begin{equation}
\label{eq:booleano0}
C = (iA \cap iB) \cup (iA \cap fB) \cup (fA \cap iB) \cup (fA \cap fB)
\end{equation}

En la figura \ref{fig:booleano3} podemos ver la representación gráfica de cada uno de los términos de la expresión anterior.

\begin{figure}[h]
\includegraphics[width=14cm]{Img/GEO/geo-booleano4.png}
\centering
\caption{\textbf{\footnotesize{subconjuntos de puntos al efectuar $A \cap B$.}}}
\label{fig:booleano3}
\end{figure}

En principio, cada uno de los términos de la \ref{eq:booleano0} es candidato para formar parte del resultado regularizado (homogéneo dimensional), al que llamaremos \textbf{$C^*$}. 
Dado que $C^*$ se trata de un conjunto de puntos, de nuevo se tiene que:

\begin{equation}
C^* = iC^* \cup fC^*
\end{equation}

En la figura \ref{fig:booleano3} se puede ver que $iC = iC^* = iA \cap iB$. Queda entonces por determinar $fC^*$, que será igual a la parte válida de ($fA \cap fB$).\vskip
Ver que las fronteras de los nuevos elementos siempre consistirán en segmentos de fronteras de los elementos que se combinan. Se puede generalizar esta observación diciendo: \textbf{los puntos de frontera pueden llegar a ser puntos de interior, mientras que los puntos de interior nunca pueden llegar a ser puntos de frontera}.\vskip
Además, en las intersecciones regularizadas, aunque no se incluya la demostración, ocurre que:

\begin{equation*}
iA \cup fB \subset fC^* 
\end{equation*}
\begin{equation}
fA \cup iB \subset fC^* 
\end{equation}

Por tanto, tres de los términos de la \ref{eq:booleano0} son válidos para formar fC*.
Sólo queda por analizar el candidato ($fA \cap fB$). Éste término es el único que puede dar problemas de homogeneidad dimensional, ya que pueden surgir subconjuntos de dimensión menor.\vskip
Entre los conjuntos de puntos que se forman al hacer ($fA \cap fB$) (figura \ref{fig:booleano3}, izq.), el punto aislado es un candidato válido de $C^*$ ya que siempre será un vértice o cruce entre dos fronteras.
En cuanto a los restantes subconjuntos (segmentos en el ejemplo), para determinar cuáles pertenecen a $fC^*$, se aplica una \textbf{prueba de pertenencia} como la siguiente:

\begin{enumerate}
\item Se establece para los dos objetos A y B un mismo sentido de giro, p. e., el sentido de giro contrario al de las agujas del reloj.
\item Para cada segmento de ($fA \cap fB$) se elige un punto $``P_0"$ del segmento.
\item Se traza un vector partiendo de $``P_0"$, en el sentido de giro de A, y otro en el sentido de giro de B.
\item Si los vectores tienen sentidos opuestos, el segmento no es válido. En caso contrario el segmento pertenece a $fC^*$.
\end{enumerate}

La figura \ref{fig:booleano4} muestra gráficamente el test anterior

\begin{figure}[h]
\includegraphics[width=4cm]{Img/GEO/geo-booleano5.png}
\centering
\caption{\textbf{\footnotesize{test de validación de un conjunto de puntos de frontera.}}}
\label{fig:booleano4}
\end{figure}

Aplicando esta prueba de validez, el segmento $S_1$ queda eliminado de $fC^*$, mientras que $S_2$ queda admitido. Resumiendo, hemos visto que haciendo

\begin{equation}
C^* (A \cap^* B) = válidos(iA \cap iB) \cup (iA \cap fB) \cup (fA \cap iB) \cup (fA \cap fB)
\end{equation}

se obtiene la intersección regularizada de los objetos A y B, que mantiene la homogeneidad dimensional, respecto de A y B.\vskip
Para desarrollar los operadores booleanos restantes se procede de modo similar, es decir, se dividen los objetos de partida en subconjuntos interior y frontera y se realiza la operación booleana entre dichos subconjuntos, produciéndose candidatos para formar parte de $C^*$.

\subsubsection{Clasificación de los elementos de un conjunto. }

Para regularizar los resultados booleanos es preciso determinar si los puntos se encuentran en el interior, la frontera o fuera de los conjuntos resultantes.
\textquote{\textit{Se entiende por \textbf{clasificación de los elementos de un conjunto}, a la inclusión de los miembros de ese conjunto en uno de estos subconjuntos}} \citep{Ramos2011}:
\begin{itemize}
\item \textbf{Conjunto de los puntos interiores (iA)}.
\item \textbf{Conjunto de los puntos de la frontera (fA)}.
\item \textbf{Conjunto de los puntos externos (cA)}.
\end{itemize}

Además de la regularización de los resultados, en Modelado Sólido es interesante realizar una clasificación de los elementos de un conjunto, para determinar las relaciones de inclusión entre los elementos geométricos, como por ejemplo:
\begin{itemize}
\item dados un sólido y un punto, determinar si el punto está dentro, fuera o en la frontera del sólido.
\item dados un polígono y una línea, determinar qué parte de la línea está dentro, qué parte fuera, y qué parte está en la frontera del polígono.
\item dados dos sólidos, determinar cuándo se tocan (problema típico de animación).
\item dados dos polígonos, determinar cuál es su intersección.
\end{itemize}

\vspace{5mm}
\textbf{Criterios de clasificación en espacios n-dimensionales }\vskip
Para estudiar este tipo de problemas se establecen unos criterios de clasificación generales, organizados según la dimensión del espacio donde se definen.\vskip
En $E0$ la relación básica es entre dos puntos. Éstos pueden coincidir o pueden ser distintos; en este segundo caso, pueden estar lejos o cerca.\vskip
En $E1$, dada una curva, hay varias clasificaciones posibles. Un punto puede ser el punto inicial, el punto final, o un punto intermedio de la curva. En una línea recta pueden darse otras dos clasificaciones: un punto puede estar delante o detrás de la línea, en la misma dirección. Por último, otras clasificaciones posibles son: un punto puede estar a la derecha de la línea o a su izquierda.\vskip
En $E2$, si se trata de un disco topológico, se puede averiguar si un punto está dentro, fuera o en la frontera del disco topológico.\vskip
Finalmente, en $E3$, dado un sólido, un punto puede estar dentro, en la superficie o fuera. Si el sólido es un poliedro, y si el punto está en la superficie, podría encontrarse en una cara, en una arista o en un vértice.
Estas son, más o menos, las posibles clasificaciones que pueden hacerse de los elementos de $E0$, con respecto a $E1$, $E2$ y $E3$.\vskip
En modelado, tan importante como la clasificación de los puntos es la clasificación de los elementos de $E1$ (líneas y curvas) en $E1$, $E2$ y $E3$. Es muy común el tener que averiguar la intersección entre líneas, la intersección y recorte (clipping) entre líneas y polígonos y la intersección entre líneas y sólidos por ejemplo en ray tracing.\vskip
No menos importante es la clasificación entre los elementos de $E2$ (planos, polígonos y superficies curvas) en $E2$ y $E3$, es decir, localizar las intersecciones de superficies y los cortes entre planos y/o superficies con los sólidos.
Finalmente, la clasificación de los elementos de $E3$ con los de $E3$ también es importante, especialmente en animación y modelado, para la detección de colisiones entre los objetos y la composición de modelos complejos, a partir de otros más simples.

\clearpage
\subsubsection{Representaciones de barrido}
\textquote{\textit{Al barrer un objeto a lo largo de una trayectoria por el espacio se define un objeto nuevo, llamado barrido. El barrido más sencillo es el definido por un área bidimensional barrida por una trayectoria lineal normal al plano del área para crear un volumen. Este proceso se conoce como barrido traslacional o \textbf{extrusión}}} \citep{Matias2007}. Para hacer una analogía con algo tangible, se pueden representar objetos formados por la extrusión de material, por ejemplo metal o plástico a través de un molde con la sección transversal deseada.\vskip
En los casos más sencillos cada volumen de barrido no es más que el área del objeto que se barre multiplicada por la longitud del barrido. Las extensiones sencillas comprenden el escalamiento de la sección transversal durante el barrido para producir por ejemplo un objeto fusiforme\footnote{Se llaman fusiformes los objetos u organismos en forma de huso, es decir, con forma alargada, elipsoide, y con las extremidades más estrechas que el centro} o barrer la sección transversal a lo largo de una trayectoria lineal que no es la normal\footnote{Se llama normal a una recta perpendicular a un ente geométrico, la perpendicularidad existe si se cortan formando un ángulo recto}. Los barridos rotacionales se definen mediante la rotación de un área con respecto a un eje.\vskip
El objeto que se barre no tiene que ser bidimensional. Los barridos de sólidos son útiles para modelar la región barrida por la cabeza de corte de una máquina herramienta o un robot que sigue una trayectoria. Los barridos donde el área o el volumen que generan cambia de tamaño, forma u orientación y que siguen una trayectoria curva arbitraria se denominan barridos generales.\vskip
Los \textbf{barridos generales} de secciones transversales bidimensionales generalmente se modelan como secciones transversales bidimensionales parametrizadas barridas con ángulos rectos sobre una curva arbitraria. Los barridos generales son muy difíciles de modelar en forma eficiente. Por ejemplo, la trayectoria y la forma del objeto que producen pueden ocasionar que el objeto se interseque, complicando los cálculos de volumen. Además, los barridos generales no siempre generan sólidos. Por ejemplo, el barrido de un área bidimensional en su propio plano genera otra área bidimensional.\vskip
En términos generales, es difícil aplicar las operaciones regularizadas de conjuntos booleanos a los barridos sin antes convertirlos a otra representación. Incluso los barridos más simples no son cerrados con las operaciones booleanas regularizadas de conjuntos. Por ejemplo, al unión de dos barridos simples generalmente no es un barrido simple, como se ilustra en la figura \ref{fig:barrido}.

\begin{figure}[h]
\includegraphics[width=6cm]{Img/GEO/geo-extrude.jpg}
\centering
\caption{\textbf{\footnotesize{Dos barridos traslacionales definidos por triángulos. La unión de los barridos representados no es un barrido simple de un objeto tridimensional.}}}
\end{figure}

Sin embargo, a pesar de los problemas de cerradura y de cálculo, los barridos son una
forma natural e intuitiva de construir diversos objetos. Por ello, muchos sistemas de modelado de sólidos permiten a los usuarios construir objetos como barridos, pero los almacenan con alguna representación.

\begin{figure}[h]
\includegraphics[width=16cm]{Img/GEO/geo-extrude1.jpg}
\centering
\caption{\textbf{\footnotesize{Extrusión (barrido traslacional), Sweep(barrido general) y Loft(barrido general) respectivamente. }}}
\label{fig:barrido}
\end{figure}


\clearpage
\subsection{Modelado Booleano (CSG) }
\label{sectionCSG}

\textquote{\textit{Al conjunto de procesos que permiten el diseño de sólidos complejos mediante la combinación booleana de objetos simples (primitivas) se conoce como \textbf{modelado booleano}, o también como \textbf{Geometría Constructiva de Sólidos} en inglés \textit{Constructive Solid Geometry} (CSG)}} \citep{Ramos2011}.\vskip
En el modelado booleano, después de trasladar, girar y escalar convenientemente las primitivas, se aplican los \textbf{operadores booleanos regularizados} ($\cup^*$, $\cap^*$ y $-^*$) para combinarlas. Además de los procesos anteriores, también son necesarios métodos de clasificación de vértices y aristas, así como de evaluación de fronteras.
Dado que los operadores booleanos son regularizados, todos los sólidos con los que se va a operar, así como los objetos resultantes, han de tener la misma dimensión espacial.\vskip
Un sólido construido mediante un modelador booleano queda descrito mediante un árbol binario en el que:

\begin{itemize}
\item El nodo raíz es el sólido resultante.
\item Los nodos internos son los operadores booleanos.
\item Los nodos hoja son las primitivas.
\end{itemize}

En los nodos terminales del árbol no sólo se representan las primitivas, sino que también se indican las transformaciones lineales que se han de efectuar sobre ellas. En el árbol, tanto las operaciones como los nodos hoja deberán encontrarse ordenadas, debido a que las operaciones booleanas no son, en general, conmutativas. El proceso de seguimiento (recorrido) del árbol se hará partiendo de los nodos terminales.

\begin{figure}[h]
\includegraphics[width=12cm]{Img/GEO/geo-booleano6.png}
\centering
\caption{\textbf{\footnotesize{Arbol CSG con tres operaciones booleanas: unión ($\cup$), intersección ($\cap$) y diferencia ($-$) }}}
\label{fig:bool}
\end{figure}

En el ejemplo de la figura \ref{fig:bool} se puede ver la descripción de un modelo booleano, llamado R3.\vskip Partiendo de las primitivas $P_0$ (cilindro), $P_1$ (cilindro), $P_2$ (cilindro), $P_3$ (esfera) y $P_4$ (cubo) se obtiene el objeto final ($R_3$) después de tres niveles de operaciones booleanas.\vskip
En primer lugar se efectúa la unión de $P_0$ y $P_1$, después de haber transformado y posicionado adecuadamente las primitivas en el espacio, mediante las matrices netas $T_0$ y $T_1$.

\begin{equation}
R_0 = P_0\cdot T_0 \cup P_1\cdot T_1
\end{equation}

A continuación el resultado intermedio $R_0$ se suma con la primitiva $P_2$ (cilindro), después de haber sido escalada y posicionada por $T_2$.

\begin{equation}
R_1 = R_0 \cup P_2\cdot T_2
\end{equation}

Para producir el resultado $R_2$ se realiza la intersección entre $P_3$ y $P_4$, después de haber transformado y posicionado adecuadamente las primitivas en el espacio, mediante las matrices netas $T_3$ y $T_4$

\begin{equation}
R_2 = P_3\cdot T_3 \cap P_4\cdot T_4
\end{equation}

Finalmente, a $R_2$ se le resta $R_1$, obteniendo así el objeto raíz del árbol $R_3$.


\begin{equation}
R_3 = R_2 - R_1 = (P_3\cdot T_3 \cap P_4\cdot T_4) - ((P_0\cdot T_0 \cup P_1\cdot T_1) \cup (P_2\cdot T_2))
\end{equation}

Se puede apreciar que las transformaciones han incrementado el tamaño del sólido resultante $R_3$. \vskip
\textquote{\textit{El modelado booleano es un proceso descriptivo, es decir, sólo se limita a especificar qué primitivas se utilizan y cómo se combinan. En otras palabras, en los modelos booleanos sólo se dispone de la información geométrica y topológica de las primitivas, pero no la de los objetos modelados}} \citep{Ramos2011}. Por tal motivo, también se les denomina \textbf{modelos descriptivos y/o no evaluados}, ya que para conocer sus características geométricas y topológicas es preciso efectuar un proceso de evaluación, conocido como evaluador de fronteras, que se encarga de hallar las intersecciones entre las superficies de las primitivas, para luego poder buscar los vértices y aristas. Además, ha de analizar la conectividad de los elementos encontrados, para determinar la topología del modelo.

Por lo general, el escalado de las primitivas no es uniforme, es decir, los factores de escala $Sx$, $Sy$, y $Sz$ son diferentes. De este modo, una sola primitiva proporciona una infinita variedad de copias diferentes.\vskip
Para poder combinar las primitivas en un esquema de modelado, éstas han de ser definidas previamente. Una forma frecuente de crearlas es estableciendo los parámetros de las ecuaciones que las definen. Entre las primitivas más comunes se encuentran los cubos, esferas, cilindros, conos y toros. Los parámetros suelen ser longitudes, como radios, diámetros, alturas, etc.

\subsubsection { Primitivas }
Las primitivas son los únicos elementos de los modelos booleanos (sin evaluar) que disponen de la información geométrica y topológica. Por tal motivo, para su definición se ha de utilizar un método que permita el registro de dicha información.

\vspace{5mm}
\textbf{Definición algebraica de las primitivas}\vskip
A cada conjunto de puntos $\Re$ , en principio se le puede asignar una función característica $g_\Re(X): X$ \xrightarrow $\{0,1\}$, que indica si un punto cualquiera $X$ pertenece o no a $\Re$. En otras palabras, si

$$g_\Re(X) = 1 \Rightarrow X \in \Re$$
\begin{equation}
g_\Re(X) = 0 \Rightarrow X \notin \Re
\end{equation}

Esta función característica no es de mucha ayuda cuando se trata de conjuntos de puntos generales (sillas, zapatos), ya que su definición sería bastante ardua. Sin embargo, existe una clase interesante de conjuntos de puntos, cuya función característica puede quedar representada por una ecuación algebraica sencilla, del tipo $F(x, \ y, \ z) = 0$, siendo $x, \ y, \ z$ variables reales. En estos conjuntos se cumple que:
$\forall X = (x, \ y, \ z)$, si $F(X) \geq 0 \Rightarrow X
\in \Re$ , si $F(X) < 0 \Rightarrow X \notin \Re$, es decir que pertenece al complementario de \Re.

\vspace{5mm}
\textbf{Semiespacios}

La función $F(X) = 0$ define una superficie que divide el espacio cartesiano en dos regiones o conjuntos de puntos. Estas dos regiones se llaman \textbf{semiespacios}\footnote{Se denomina semiespacio, a cada una de las dos partes en que un espacio queda dividido por un plano contenido en él.} y están representados por las funciones $F(X)
\geq 0$ y $F(X) \leq 0$. Por lo tanto, la función $F(x, \ y, \ z)$ vale $0$ en la superficie, y toma valores distintos de $0$ en el interior del semiespacio que contiene los puntos que van a formar parte del sólido. Los semiespacios quedan representados matemáticamente mediante la función $F(x, y, z)$, y mediante la ecuación $f(x, \ y, \ z)
\geq 0$ o $f(x, \ y, \ z) \leq 0$. Ver
que en cualquier caso, los puntos de las superficies pertenecen a los semiespacios.\vskip
Como representante típico de los semiespacios está el \textbf{semiespacio planar}, cuya función característica es $A_x + B_y + C_z + D \geq 0$. Este semiespacio se define como la unión de los puntos del plano definido por $A_x + B_y + C_z + D = 0$ (conjunto de puntos de frontera $fR$), más los puntos de uno de los subespacios separados por el plano, en este caso el positivo (puntos de interior $iR$).\vskip
Otro ejemplo es el \textbf{semiespacio cilíndrico}, formado por todos los puntos que se encuentran en el interior y en la superficie de un cilindro infinito, con el eje en Z. En este caso, su ecuación característica es $x^2 + y^2 - r^2 \leq 0$.\vskip
La figura \ref{fig:csg0} muestra los semiespacios anteriores. Las flechas señalan hacia los puntos que pertenecen al semiespacio.

\begin{figure}[h]
\includegraphics[width=12cm]{Img/GEO/geo-semiespacio0.png}
\centering
\caption{\textbf{\footnotesize{ejemplos de semiespacios abiertos. }}}
\label{fig:csg0}
\end{figure}

Los ejemplos anteriores representan superficies ilimitadas que dividen el espacio cartesiano en dos regiones ilimitadas, generando semiespacios abiertos. Sin embargo, también puede haber semiespacios cerrados.\vskip
Así, la ecuación $x^2 + y^2 + z^2 – r^2 = 0$ define una superficie cerrada que divide el espacio cartesiano en una región ilimitada y otra limitada. La superficie representa una esfera de radio $r$, y el semiespacio esférico que genera queda definido por\vskip
$x^2 + y^2 + z^2 – r^2 \leq 0$, o sea, por todos los puntos que están dentro ($iR$) y en la superficie de la esfera ($fR$).
Otros semiespacios interesantes para modelado, definidos por ecuaciones características de grado 2 o superior, son los generados por las superficies cónicas (semiespacios cónicos abiertos, $x^2 + y^2 – z^2 \leq 0$), y por los toros (semiespacios tóricos cerrados, $(x^2 + y^2 + z^2 – (a^2 + b^2))^2 \leq 4a^2(b^2 – z^2)$.\vskip
La figura \ref{fig:csg1} muestra estos semiespacios, con los parámetros que intervienen en sus ecuaciones características.

\begin{figure}[h]
\includegraphics[width=16cm]{Img/GEO/geo-semiespacio1.png}
\centering
\caption{\textbf{\footnotesize{semiespacio esférico, cónico y tórico }}}
\label{fig:csg1}
\end{figure}

En la \ref{fig:csg1} a la derecha se muestra una sección transversal del toro, que consiste en dos círculos, de radio $b$, centrados en $x = \pm a$, $z = 0$.

\vspace{5mm}
\textbf{Primitivas de espacios semiabiertos}\vskip
Por definición, el modelado booleano requiere que las primitivas sean sólidos cerrados. Por tanto, si un modelador desea utilizar semiespacios abiertos (planares, cilíndricos, cónicos, etc.) antes ha de efectuar una composición de semiespacios, de modo que el semiespacio resultante sea un espacio cerrado.\vskip
Como los semiespacios son conjuntos de puntos, \textquote{\textit{los procesos naturales para crear primitivas cerradas a partir de semiespacios abiertos, no son otros que los operadores booleanos regularizados de unión, intersección y diferencia, aunque normalmente, con la intersección es suficiente. En definitiva, las primitivas que requieren semiespacios abiertos en su definición, se construyen combinando copias de semiespacios, mediante operaciones booleanas}} \citep{Ramos2011}.\vskip
En el ejemplo se utilizan semiespacios abiertos diferentes para crear una primitiva, ver la figura \ref{fig:csg2}.
En este caso, se trata de crear un cilindro cerrado. Para ello, se utiliza un semiespacio cilíndrico y dos planares, orientados según muestra la figura. Las ecuaciones características de estos semiespacios son:
\begin{figure}[h]
\includegraphics[width=6cm]{Img/GEO/geo-semiespacio2.png}
\centering
\caption{\textbf{\footnotesize{obtención de una primitiva (cilindro cerrado) a partir de semiespacios. }}}
\label{fig:csg2}
\end{figure}

$$
\begin{array}{l@{}l}
        S_1: x^2 + z^2 - r^2 \leq 0\\
        S_2: y\geq0\\
        S_3: y - a \leq 0 \ \ siendo \ a \ la \ altura \ del \ cilindro.
\end{array}
$$

\vspace{5mm}
El cilindro queda definido por: 
\begin{equation}
 C = S_1 \cap S_2 \cap S_3
\end{equation}

\clearpage
\subsubsection{Conjuntos de primitivas}
\textquote{\textit{Para desarrollar un modelador booleano es fundamental establecer el conjunto de primitivas de que va a disponer el modelador}} \citep{Ramos2011}.\vskip
Se llama \textbf{dominio o poder expresivo} de un modelador, a la \textbf{capacidad que posee para modelar los diferentes objetos}. Cuanto mayor sea el poder expresivo de un modelador, mayores son las posibilidades de modelado.\vskip
\textquote{\textit{El dominio de un sistema de modelado no depende del número de primitivas disponibles, sino que viene dado por la variedad de semiespacios utilizados al construir las primitivas, del conjunto de operadores booleanos desarrollados, y del total de operaciones de transformación disponibles}} \citep{Ramos2011}.

En principio, un sistema de modelado podría permitir al usuario aumentar el dominio y/o la potencia del modelador, dejándole definir sus propias primitivas. Esto implicaría que habría que comprobar, por parte del usuario mismo o del sistema, la validez de estas primitivas, creándose una incertidumbre sobre la integridad de los modelos. La mejor solución es que el sistema de modelado proporcione un conjunto completo de primitivas, de modo que no exista la necesidad de crear otras por parte del usuario. Éste, sólo se encargará de proporcionar los parámetros necesarios para manipular las primitivas, por ej. la posición, orientación, forma y tamaño.\vskip
La figura \ref{fig:csg3} muestra un conjunto de primitivas, más los parámetros de control que cada una requiere (excluidos los de posición y orientación).

\begin{figure}[h]
\includegraphics[width=14cm]{Img/GEO/geo-primitivas0.png}
\centering
\caption{\textbf{\footnotesize{Conjunto operativo de primitivas. }}}
\label{fig:csg3}
\end{figure}

El dominio del conjunto anterior es de 5 semiespacios diferentes (planar, cilíndrico, cónico, esférico, y tórico), y su potencia de modelado es de 11, dado que dispone de 11 primitivas diferentes.

\vspace{5mm}
\textbf{Generación de ejemplares de primitivas}\vskip
\textquote{\textit{En la \textbf{generación de ejemplares de primitivas}, el sistema de modelado define un
conjunto de formas sólidas primitivas tridimensionales que son relevantes para el área de aplicación. Estas primitivas suelen parametrizarse no sólo en función de las transformaciones, sino también con base a otras propiedades}} \citep{Matias2007}. Por ejemplo, un objeto primitivo puede ser una pirámide regular con un número (definido por el usuario) de caras que se unen en la punta. Los ejemplares de primitivas son similares a objetos parametrizados, excepto que los objetos son sólidos.\vskip

Una primitiva parametrizada se puede considerar como la definición de una familia de partes cuyos miembros varían en unos cuantos parámetros, un importante concepto de CAD conocido como \textbf{tecnología de grupos}\footnote{La tecnología de grupos es una filosofía de fabricación en la que las piezas similares se identifican y agrupan conjuntamente con el fin de aprovecharse de sus similitudes en el proceso de diseño y fabricación}.

La generación de ejemplares de primitivas se utiliza con frecuencia en objetos como engranajes o tuercas, que son tediosos de definir en función de combinaciones booleanas de objetos más sencillos pero que se pueden caracterizar fácilmente con parámetros de alto nivel. Por ejemplo, un engranaje se puede parametrizar mediante el diámetro, el espesor, el número de dientes, etc, como se ilustra en la figura \ref{fig:csg4}.


\begin{figure}[h]
\includegraphics[width=14cm]{Img/Modelos/engranaje.jpg}
\centering
\caption{\textbf{\footnotesize{Mismo engranaje con parámetros diferentes}}}
\label{fig:csg4}
\end{figure}

Aunque se pueden construir una jerarquía de ejemplares de primitivas, cada ejemplar de
nodo hoja sigue siendo un objeto definido por separado. En la generación de ejemplares de primitivas no hay medios para combinar objetos y crear uno nuevo de mayor nivel usando, por ejemplo, las operaciones booleanas regularizadas de conjuntos.\vskip
Por lo tanto, la única forma de modelar un nuevo tipo de objeto es describiendo el mecanismo que lo define. Así mismo, es necesario escribir individualmente, para cada primitiva, las rutinas o programas que dibujan el objeto o determinan sus propiedades.



\subsection{Visualización de modelos booleanos}

Para simplificar la explicación y comprender mejor cómo se efectúa la visualización de los modelos booleanos se puede recurrir al algoritmo de \textbf{ray casting} ya que se considerar un subconjunto de ray tracing. Es necesario recordar cuál es la información disponible para decidir las superficies del modelo que son visibles y las que no:
\begin{itemize}
    \item Por un lado, en el espacio de referencia se encuentran N sólidos (primitivas), compartiendo o no un mismo volumen de espacio.
    \item Por otro lado, se dispone de un árbol binario CSG, que proporciona una descripción precisa de cómo se combinan booleanamente dichas primitivas.
\end{itemize}

Como las primitivas presentes pueden ser muchas y las combinaciones entre ellas muy complejas, un planteamiento de ``divide y vencerás” parece el más apropiado para resolver el arduo problema de averiguar qué primitivas y puntos de la superficie son visibles, y cuales no.\vskip

Para ello se aplica el siguiente proceso: 
\begin{enumerate}
    \item Se inicia el recorrido del árbol binario \textbf{comenzando por el nivel inferior}, localizando el primer par de nodos terminales, la primitiva y la matriz de transformación asociada a cada nodo; en el nodo padre de los nodos terminales se encuentra el operador booleano que se ha de aplicar al par de primitivas.
    \item Una vez que las primitivas localizadas están convenientemente escaladas y situadas en el sistema de referencia, \textbf{se efectúa la clasificación del rayo con respecto a cada una de las dos primitivas} (clasificación de E1 en E3), o lo que es igual, se averigua qué puntos del rayo se encuentran en las fronteras de las primitivas y cuáles en su interior. Siendo $t_e$ y $t_s$ los valores que toma $t$ (en la ecuación paramétrica del rayo) \ref{eq:rayos} en los puntos de intersección de entrada y salida (fronteras), el rayo queda clasificado, con respecto a cada primitiva, en el intervalo $[t_e, t_s]$ (un intervalo por primitiva).
    \item Una vez que se dispone de los intervalos ${[t_e, t_s]}_1$ y ${[t_e, t_s]}_2$, \textbf{se procede a clasificar el rayo, con respecto al modelo resultante de operar booleanamente ambas primitivas}, según sea el operador booleano asignado al nodo padre. En otros términos, si $P_1$ y $P_2$ son las primitivas y $<op>$ el operador booleano, siendo $R = P_1 <op> P_2$, se ha de clasificar el rayo con respecto a $R$. Esta clasificación no se realiza directamente sobre el objeto resultante $(R)$, sino indirectamente sobre los intervalos de clasificación del rayo.
    \item Con los resultados obtenidos, se continúa recorriendo el árbol recursivamente, hasta que se llegue a su raíz, momento en el que se sabrá los puntos del modelo final que son intersecados y atravesados por el rayo.
    
\end{enumerate}

 Volviendo al tercer punto, es importante ver que \textquote{\textit{si se crea un nuevo objeto mediante operaciones booleanas con las primitivas (proceso bastante costoso), y se procediese a la clasificación del rayo con el objeto resultante $(R)$, el intervalo o intervalos ${[t_e, \ t_s]}_R$ que se obtuviesen, serían los mismos que los obtenidos al efectuar directamente la operación ${[t_e, \ t_s]}_1 <op> {[t_e, \ t_s]}_2$. Esta propiedad es la clave que permite que la visualización de los modelos booleanos, mediante ray casting o ray tracing, sea muy sencilla}} \citep{Ramos2011}.


\subsubsection{Diagramas de Roth}
Para facilitar la comprensión del proceso de clasificación de los rayos con respecto a las primitivas y modelos resultantes es de gran ayuda (al menos visualmente) la utilización de los llamados \textbf{diagramas de Roth}\footnote{Los diagramas de Roth permiten obtener los puntos de intersección de un rayo con un sólido compuesto a partir de las intersecciones o uniones de los sólidos primitivos que lo componen}. Éstos no son otra cosa que la representación recursiva en la recta real $[−\infty, +\infty]$ de los intervalos de clasificación $[t_e, t_s]$.
Para ver cómo son los diagramas de Roth y entender mejor la visualización de los modelos booleanos en general, es mejor mostrar algunos ejemplos. Se comienza viendo un caso sencillo, en el que sólo intervienen dos primitivas.
Sea $R = P_1.T_1 \cap P_2.T_2$ el objeto $R = I \cap D$ resultante de la intersección de dos primitivas, tal como muestra la figura \ref{fig:visual0}

\begin{figure}[h]
\includegraphics[width=8cm]{Img/GEO/ray0.png}
\centering
\caption{\textbf{\footnotesize{modelo booleano}}}
\label{fig:visual0}
\end{figure}

A la hora de visualizar el modelo booleano, el algoritmo de ray casting se encuentra, en este ejemplo, con dos sólidos posicionados en el \textbf{SUR} (ver sección \ref{section:ray-concept}). Suponiendo que la dirección del rayo trazado sea la que se muestra en la figura \ref{fig:visual1}, la clasificación del rayo, con respecto a las primitivas, queda reflejada en un diagrama de Roth descripto a continuación:

\begin{figure}[h]
\includegraphics[width=10cm]{Img/GEO/ray1.png}
\centering
\caption{\textbf{\footnotesize{diagrama de Roth para un modelo de dos niveles}}}
\label{fig:visual1}
\end{figure}

De los 4 puntos de intersección posibles $(t_{e1},\ t_{s1},\ t_{e2}, $ y $ t_{s2})$, solamente
serán válidos $t_{e2}$ y $t_{s2}$ en la visualización del objeto resultante. \vskip
Ver que $[t_{e2}, t_{s2}] = [t_{e1}, t_{s1}] \cap [t_{e2}, t_{s2}]$. Por lo tanto, no ha sido preciso calcular el objeto resultante (R en la figura \ref{fig:visual0}), para saber qué puntos serán visibles y las propiedades óptico-geométricas en dichos puntos. En el mismo modelo, si el rayo trazado fuese el que se muestra en la figura \ref{fig:visual2}, la clasificación del rayo quedaría:

\begin{figure}[h]
\includegraphics[width=10cm]{Img/GEO/ray2.png}
\centering
\caption{\textbf{\footnotesize{diagrama de Roth}}}
\label{fig:visual2}
\end{figure}

En este caso, al calcular la intersección entre los intervalos de clasificación del rayo, el resultado es $[t_{e1}, t_{s2}] = [t_{e1}, t_{s1}] \cap [t_{e2}, t_{s2}]$. Vemos que se produce una singularidad, la cual es fácilmente detectable dado que $t_{e1} \cong t_{s2}$, considerando el posible error de precisión. La detección de una singularidad puede considerarse como un test de validez alternativo en los operadores booleanos regularizados que, como en el ejemplo, implica que el rayo no interseca con el objeto resultante $R$.\vskip
A continuación se ve otro ejemplo (también en 2D), en el que el árbol binario tiene más de un nivel.

\begin{figure}[!]
\includegraphics[width=15cm]{Img/GEO/ray3.png}
\centering
\caption{\textbf{\footnotesize{diagrama de Roth para un modelo de tres niveles}}}
\label{fig:visual3}
\end{figure}

Como puede verse en el diagrama de Roth de la figura \ref{fig:visual3}, primero se efectúa la clasificación del rayo con las primitivas del nivel inferior $(P_1.T_1$ y $P_1.T_2)$, y a continuación, se hace otro tanto con $R_1$, que es igual a $(P_1.T_1 - P_1.T_2)$. El resultado, pasa a ser la primitiva izquierda del nivel superior. El proceso se repite con $R_1$ y $P_2.T_3$, obteniéndose finalmente los segmentos de clasificación del rayo con $R2$. Conociendo los valores de $t$ en los puntos de intersección, y las primitivas donde se localizan, el algoritmo de ray casting puede completar su ejecución. Si el objeto es opaco, el valor de $t$ más pequeño será el único válido, ya que se trata del punto de intersección más cercano al observador. Si fuese transmisor de la luz, los restantes valores de $t$ serían necesarios para calcular la intensidad y color del píxel.


\clearpage
\subsection{Sistemas de modelado de sólidos }

\textcolor{red}{
Las herramientas de diseño CAD tradicionales fueron pensadas para un usuario, por ende tienen limitaciones para soportar el entorno de desarrollo colaborativo de productos CPD y de forma rápida como requiere el mercado. En un proceso de desarrollo distribuido, se necesita una comunicación efectiva y de alta velocidad porque la mayoría de los errores de diseño se deben a la falta de comunicación entre los equipos de diseño distribuidos.\vskip
Los sistemas de información distribuída que se han aplicado para CPD se pueden clasificar en tres: 
\begin{itemize}
    \item \textit{Web services}
    \item \textit{Remote services}
    \item \textit{Remote repositories}
\end{itemize}
Los sistemas basados en \textbf{web services} tienen ventajas sobre los otros dos porque son relativamente sencillos de diseñar e implementar, reducen los problemas de la instalación de software y facilitan la participación. \citep{Nyamsuren2015}

}

\textquote{\textit{En las aplicaciones gráficas, el software que se ocupa de los modelos sólidos, incluyendo el conjunto de algoritmos que solucionan los problemas geométricos más comunes, se suele llamar \textbf{sistema de modelado de sólidos}}} \citep{Ramos2011}.
En la creación de un sistema de modelado de sólidos, además de los problemas que se explican en la sección \ref{sectionproblema}, existen muchos puntos que hacen que el desarrollo de un sistema de modelado no sea una tarea trivial.
Los requisitos que debe cumplir en un sistema de modelado de sólidos puede resumirse de la siguiente manera:\vskip

\begin{itemize}
\item Inicialmente, los objetos son descritos por el usuario mediante un \textbf{lenguaje de descripción}, los cuales están basados en conceptos de modelado disponibles en el sistema de modelado. El usuario puede introducir la descripción mediante texto, o utilizando una \textbf{interfaz de usuario} que ayuda a la interacción gráfica.

\item Una vez introducidos, los objetos son traducidos para crear la \textbf{representación interna real}. La relación entre el lenguaje de descripción y la representación interna no es necesariamente directa. Además, un mismo sistema de modelado de sólidos puede incluir varios lenguajes de descripción, atendiendo a diferentes usuarios y aplicaciones.


 La transformación del lenguaje de descripción a la representación interna es necesaria para poder encontrar las respuestas a las preguntas geométricas. De hecho, para que un sistema de modelado sea eficiente, debe soportar (utilizar) múltiples representaciones internas de los objetos. Por lo tanto, el sistema ha de incluir \textbf{algoritmos de conversión} que puedan modificar una representación en otra.
 
 \item Además, el sistema de modelado debe proveer interfaces para comunicarse con otros sistemas (importación/exportación). Estas interfaces se utilizan para transmitir o recibir modelos hacia o desde otros sistemas de modelado. Necesariamente deben manejar información geométrica utilizando los diferentes formatos existentes.
 
\item Finalmente, el sistema de modelado debe incluir facilidades para almacenar descripciones de objetos y otros datos en bases de datos permanentes.

\end{itemize}

\begin{figure}[h]
\includegraphics[width=16cm]{Img/GEO/geo-sistema.jpg}
\centering
\caption{\textbf{ \footnotesize{sistema de Modelado de Sólidos. }}}
\end{figure}



\subsubsection{Niveles de Abstracción de un Sistema de Modelado de Sólidos}

\begin{enumerate}
\item \textbf{Interfaz de usuario.} \vskip
Mediante un lenguaje de descripción, el usuario maneja el sistema gráfico con las operaciones comúnmente disponibles a este nivel en cualquier aplicación (crear, modificar, salvar, borrar y analizar diseños).
\item \textbf{Infraestructura matemática y algorítmica.} \vskip
Implementa las operaciones que proporciona el nivel anterior (por ejemplo, los algoritmos para construir la intersección de dos objetos).
\item \textbf{Primitivas.} \vskip
Son operaciones aritméticas y lógicas simples usadas por el nivel anterior para construir los algoritmos. El lenguaje de programación elegido produce estas primitivas.
\end{enumerate}

\clearpage
\subsubsection{ Sistemas de Modelado Booleano. }

Los Sistemas de Modelado Booleano se pueden considerar un ``subconjunto" de los Sistemas de Modelado de Sólidos debido a que su descripción y representación se enfocan en la geometría constructiva de solidos (CSG). Considerando los tres niveles de abstracción vistos anteriormente se puede ver en la figura \ref{fig:sistemabool} un esquema reducido para el sistema de modelado booleano.

\begin{figure}[h]
\includegraphics[width=16cm]{Img/GEO/geo-sistema1.jpg}
\centering
\caption{\textbf{\footnotesize{sistema de Modelado Booleano. }}}
\label{fig:sistemabool}
\end{figure}

Tanto el lenguaje de descripción como el lenguaje de representación interna pueden ser diferentes, aunque en este caso establezcan específicamente procesos CSG. Un ejemplo de esta situación son los lenguajes de descripción basados en python\footnote{\url{https://www.python.org/}} que pueden combinarse con varios softwares de representación interna como OpenCascade\footnote{\url{https://www.opencascade.com/}} y CGAL\footnote{\url{https://www.cgal.org/}}.

\clearpage


\clearpage






\subsection{WEB SERVICES - REST API}
RECOMENDACIONES

\subsection{Interfaces de manipulación directa}




\section{Problemas y recomendaciones
}